!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=68)}([function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},User=__webpack_require__(1),Language=__webpack_require__(2),_doWhenStack=[],_doWhenLocked=!1,_doWhenInterval=!1,_doWhenretryCount=0,_startDoWhenInterval=function(){_doWhenInterval||(_doWhenInterval=window.setInterval(Utils._doWhenCheck,50))},Cookie={setCookie:function(e,t,n,r){var i,a=new Date;a.setDate(a.getDate()+n),i=encodeURIComponent(t),n&&(i+="; expires="+a.toUTCString()),r&&(i+="; path="+r),document.cookie=e+"="+i},getCookie:function(e){var t,n,r,i=document.cookie.split(";");for(t=0;t<i.length;t++)if(n=i[t].substr(0,i[t].indexOf("=")),r=i[t].substr(i[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))===e)return decodeURIComponent(r)}},Utils={capitalize:function(e){return e?e.charAt(0).toUpperCase()+(e.length>1?e.substr(1):""):""},capitalizeHyphenated:function(e){return this._classify(e,"-")},classify:function(e){return this._classify(e,"_")},_classify:function(e,t){var n=this,r="";if(t=t||"_",e&&-1!==e.lastIndexOf(t)){var i=e.split(t);_.each(i,function(e){r+=n.capitalize(e)})}else r=n.capitalize(e);return r},extendClass:function(e,t,n,r,i){if(!_.isObject(r))return e[n]=t;if(_.isObject(r.extendsFrom))return e[n]=r.extendsFrom.extend(r);if(!r.extendsFrom)return e[n]=t.extend(r);var a=e[i+"Custom"+r.extendsFrom]||e[i+r.extendsFrom]||e["Custom"+r.extendsFrom]||e[r.extendsFrom];return a||(SUGAR.App.logger.warn('The "'+r.extendsFrom+'" component was not found to be used as the "'+n+"\"'s parent. Please update your code to point to an existing class."),a=t),e[n]=a.extend(r)},formatNumber:function(e,t,n,r,i,a){t=t||n;var o=e;return _.isNaN(e)||!_.isFinite(e)?o:_.isString(e)&&(e=parseFloat(e,10),_.isNaN(e))?o:_.isNumber(e)?(_.isString(n)&&(n=parseInt(n)),e=!0===a?e.toString():Big(e).toFixed(n),_.isString(r)&&_.isString(i)?this.addNumberSeparators(e,r,i):e):(_.isNull(e)||_.isUndefined(e)||SUGAR.App.logger.warn("formatNumber: invalid variable type ("+(void 0===o?"undefined":_typeof(o))+")"),o)},formatNumberLocale:function(e){return this.formatNumber(e,User.getPreference("decimal_precision")||2,User.getPreference("decimal_precision")||2,User.getPreference("number_grouping_separator")||",",User.getPreference("decimal_separator")||".")},formatName:function(e,t){return t.replace(/(f)|(l)|(s)/g,function(t,n,r,i){return n?e.first_name||"":r?e.last_name||"":i&&(e.last_name||e.first_name)&&e.salutation||""}).replace(/^( )?,/g,"").replace(/, $/g,"").replace(/  /g," ").trim()},formatNameModel:function(e,t,n){n=n||User.getPreference("default_locale_name_format"),t=t||{};var r=SUGAR.App.metadata.getModule(e)||{fields:{}},i=r.nameFormat||{};return _.reduce(n.split(""),function(e,n){if(n<"a"||n>"z")return e+n;if(!i[n])return e;var a;r.fields[i[n]]&&"enum"===r.fields[i[n]].type&&!_.isEmpty(r.fields[i[n]].options)&&(a=Language.getAppListStrings(r.fields[i[n]].options)[t[i[n]]]||t[i[n]]||"");return e+(a||t[i[n]]||"")},"").replace(/^( )?,/g,"").replace(/, +$/g,"").replace(/  /g," ").trim()},formatNameLocale:function(e){return this.formatName(e,User.getPreference("default_locale_name_format"))},addNumberSeparators:function(e,t,n){for(var r=e.split("."),i=/(\d+)(\d{3})/;""!==t&&i.test(r[0]);)r[0]=r[0].toString().replace(i,"$1"+t+"$2");return r[0]+(r.length>1&&""!==r[1]?n+r[1]:"")},unformatNumberString:function(e,t,n,r){if(r=r||!1,void 0===t||void 0===n)return e;if(_.isString(e)||(e=_.isFinite(e)?e.toString():""),""!==t){var i=new RegExp("\\"+t,"g");e=e.replace(i,"")}if((e=e.replace(n,".")).length>0&&r){var a=parseFloat(e);if(a==e)return a}return e},unformatNumberStringLocale:function(e,t){return this.unformatNumberString(e,User.getPreference("number_grouping_separator")||",",User.getPreference("decimal_separator")||".",t)},formatString:function(e,t){for(var n in t)e=e.replace("{"+n+"}",t[n]);return e},regexEscape:function e(t){if(void 0===e.specialRegExp){e.specialRegExp=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","-",",","^","$","#"].join("|\\")+")","g")}return t.replace(e.specialRegExp,"\\$1")},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},cookie:Cookie,isValidEmailAddress:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@\S+$/.test(e)},doWhen:function(e,t,n,r){_doWhenStack.push({check:e,fn:t,obj:n,overrideContext:r}),_doWhenretryCount=50,_startDoWhenInterval()},_doWhenCheck:function _doWhenCheck(){if(0===_doWhenStack.length)return _doWhenretryCount=0,void(_doWhenInterval&&(clearInterval(_doWhenInterval),_doWhenInterval=null));if(!_doWhenLocked){_doWhenLocked=!0;var tryAgain=$.isReady;tryAgain||(tryAgain=_doWhenretryCount>0&&_doWhenStack.length>0);var notAvail=[],executeItem=function(e,t){t.overrideContext&&(e=!0===t.overrideContext?t.obj:t.overrideContext),t.fn&&t.fn.call(e,t.obj)},i,len,item,test;for(i=0,len=_doWhenStack.length;i<len;i+=1)item=_doWhenStack[i],item&&(test=item.check,"string"==typeof test&&eval(test)||"function"==typeof test&&test()?(executeItem(this,item),_doWhenStack[i]=null):notAvail.push(item));if(_doWhenretryCount--,tryAgain){for(i=_doWhenStack.length-1;i>-1;i--)item=_doWhenStack[i],item&&item.check||_doWhenStack.splice(i,1);_startDoWhenInterval()}else _doWhenInterval&&(clearInterval(_doWhenInterval),_doWhenInterval=null);_doWhenLocked=!1}},versionCompare:function(e,t,n){return version_compare(e,t,n)},extendFrom:function(e,t,n){e.prototype=new t,_.extend(e.prototype,n)},deepCopy:function(e){return _.isObject(e)?JSON.parse(JSON.stringify(e)):e},compareBeans:function(e,t){if(e.module!==t.module)throw Error("Only beans of the same module can be compared.");return _.reduce(e.attributes,function(n,r,i){return"id"!==i&&0!==i.indexOf("_")&&!this.areBeanValuesEqual(r,t.get(i))&&this.hasDefaultValueChanged(i,e)&&n.push(i),n},[],this)},areBeanValuesEqual:function(e,t){var n=function(e){return _.isObject(e)&&_.isEmpty(e)?"":_.isObject(e)||!_.isUndefined(e)&&!_.isNull(e)?e:""};return e=n(e),t=n(t),_.isObject(e)&&_.isEqual(e,t)||!_.isObject(e)&&e===t},hasDefaultValueChanged:function(e,t){var n=t._defaults?t._defaults[e]:"";return!this.areBeanValuesEqual(n,t.get(e))},isConnectivityError:function(e){return 0===e.status||"timeout"===e.textStatus},getTimestamp:function(e,t){t=t||{};var n=(e?new Date(e):new Date).toISOString();return t.msecPrecision||(n=n.replace(/\.\d{3}/,"")),n.replace(/Z/,"+00:00")},buildUrl:function(e){return 0===e.indexOf("http")||_.isEmpty(SUGAR.App.config.siteUrl)||(e=SUGAR.App.config.siteUrl.replace(/\/+$/,"")+"/"+e),e},getChangedProps:function(e,t,n){function r(e){return _.isObject(e)?_.isArray(e)?"array":"object":"other"}var i={};return _.each(e,function(a,o){(function e(t,i){if(n)return _.isEqual(t,i);var a=r(t);if(a===r(i)&&_.contains(["object","array"],a)){if("array"===a&&t.length!==i.length)return!1;var o=_.keys(t),s=_.keys(i);return!(o.length!==s.length||!_.isEqual(o.sort(),s.sort())||_.any(t,function(n,r){return!e(t[r],i[r])}))}return n?t===i:t==i})(e[o],t[o])||(i[o]=a)}),i},getParentLayout:function(e){return e.view&&e.view.layout?e.view.layout:e.layout},isSortable:function(e,t){var n=SUGAR.App.metadata.getModule(e).fields[t.name],r=!0;return n&&!_.isUndefined(n.sortable)&&(r=n.sortable),t&&!_.isUndefined(t.sortable)&&(r=t.sortable),r},stripHttpPrefix:function(e){return e.replace(/^https?:\/\//,"")},hardRefresh:function(){window.location.reload(!0)},isDirectionRTL:function(e){return new RegExp("^[^A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿]*[֑-߿יִ-﷽ﹰ-ﻼ]").test(e)}};module.exports=Utils},function(e,t,n){"use strict";var r=n(5);var i=new(Backbone.Model.extend({load:function(e){SUGAR.App.api.me("read",null,null,{success:_.bind(function(t){if(t&&t.current_user){t.current_user._hash&&SUGAR.App.cache.set("userpref:hash",t.current_user._hash),this.set(t.current_user);var n=this.getPreference("language");SUGAR.App.lang.getLanguage()!==n&&SUGAR.App.lang.setLanguage(n,null,{noUserUpdate:!0,noSync:SUGAR.App.isSynced||SUGAR.App.metadata.isSyncing()})}e&&e()},this),error:function(t){SUGAR.App.error.handleHttpError(t),e&&e(t)}})},loadLocale:function(e){SUGAR.App.api.call("read",SUGAR.App.api.buildURL("locale"),null,{success:function(t){e&&e(t)},error:function(t){SUGAR.App.error.handleHttpError(t),e&&e(t)}})},getLanguage:function(){return this.getPreference("language")||SUGAR.App.cache.get("lang")},updateLanguage:function(e,t){this.update("update",{preferred_language:e},function(n){n||SUGAR.App.lang.updateLanguage(e),t&&t(n)})},updateProfile:function(e,t){this.update("update",e,function(e){t&&t(e)})},updatePreferences:function(e,t){var n=this;SUGAR.App.api.isAuthenticated()?SUGAR.App.api.call("update",SUGAR.App.api.buildURL("me/preferences"),e,{success:function(r){r._hash&&(SUGAR.App.cache.set("userpref:hash",r._hash),n.set({_hash:r._hash})),_.each(e,function(e,t){r[t]&&n.setPreference(t,r[t])}),t&&t()},error:function(e){SUGAR.App.error.handleHttpError(e),t&&t(e)}}):t&&t()},update:function(e,t,n){SUGAR.App.api.isAuthenticated()?SUGAR.App.api.me(e,t,null,{success:_.bind(function(e){e.current_user&&(e.current_user._hash&&SUGAR.App.cache.set("userpref:hash",e.current_user._hash),this.set(e.current_user)),n&&n()},this),error:function(e){SUGAR.App.error.handleHttpError(e),n&&n(e)}}):n()},getAcls:function(){return this.get("acl")||{}},getPreference:function(e){return(this.get("preferences")||{})[e]},setPreference:function(e,t){var n=this.get("preferences")||{};return n[e]=t,this.set("preferences",n)},getCurrency:function(){var e=this.get("preferences"),t={};return e&&(e.currency_create_in_preferred=e.currency_create_in_preferred||!1,t=_.pick(e,"currency_id","currency_iso","currency_name","currency_rate","currency_show_preferred","currency_create_in_preferred","currency_symbol")),t},lastState:function(){var e={},t=[],n=function(e){var t=e.split(":"),n=[SUGAR.App.user.id,"last-state"];return(n=n.concat(t)).join(":")},r=function(e){var t;return e.meta&&e.meta.last_state&&(t=e.meta.last_state.id),t};return{get:function(e){var t,r;return _.isUndefined(e)||(r=n(e),t=void 0===(t=SUGAR.App.cache.get(r))?this.defaults(e):t),t},set:function(e,t){if(!_.isUndefined(e)&&!_.isUndefined(t)){var r=n(e);SUGAR.App.cache.set(r,t)}},preserve:function(e){_.isUndefined(e)||t.push(e)},key:function(e,t){var n=r(t);return this.buildKey(e,n,t.module)},buildKey:function(e,t,n){var r,i=[];return t&&(n&&i.push(n),i.push(t,e),r=i.join(":")),r},defaults:function(t){return e[t]},register:function(t){r(t)&&_.each(t.meta.last_state.defaults,function(n,r){e[this.key(r,t)]=n},this)},remove:function(e){var t;_.isUndefined(e)||(t=n(e),SUGAR.App.cache.cut(t))},_getPreservedKeys:function(){var e=[];return _.each(t,function(t){e.push(n(t))}),e}}}()}));r.on("app:logout",function(e){SUGAR.App.cache.cut("userpref:hash"),!0===e&&i.clear({silent:!0})}),r.on("cache:clean",function(e){e(i.lastState._getPreservedKeys())}),e.exports=i},function(e,t,n){"use strict";var r=n(4),i=n(1);function a(e,t,n,i){var a,s=SUGAR.App.metadata.getStrings(e);if((s=n?s[n]:s)&&_.isString(s[t])){if(a=o(s[t]),!_.isUndefined(i)&&a.indexOf("{{")>-1){t="lang."+(n?t+"."+n:t);var l=Handlebars.templates[t];a=l?l(i):r.compile(t,a)(i)}return a}}function o(e){return":"===e.slice(-1)?e.slice(0,-1):e}var s=void 0,l=void 0;e.exports={direction:"ltr",get:function(e,t,n){return this.getModString(e,t,n)||this.getAppString(e,n)||e},getModString:function(e,t,n){var r;return _.isArray(t)?_.find(t,function(t){return r=a("mod_strings",e,t,n),!_.isEmpty(r)},this):r=a("mod_strings",e,t,n),r},getAppString:function(e,t){return a("app_strings",e,null,t)},getAppListStrings:function(e){var t=SUGAR.App.metadata.getStrings("app_list_strings")[e]||{};if(_.isArray(t)){var n={};_.each(t,function(e){_.isString(e)?n[e]=e:_.isArray(e)&&2===e.length&&(n[e[0]]=e[1])}),t=n}return t},getModuleName:function(e,t){var n=!(t=t||{}).plural&&this.getModString("LBL_MODULE_NAME_SINGULAR",e)||this.getModString("LBL_MODULE_NAME",e);return n||_.isUndefined(t.defaultValue)||(n=this.get(t.defaultValue)),n||e},getAppListKeys:function(e){var t=[],n=SUGAR.App.metadata.getStrings("app_list_strings")[e]||{};return _.isArray(n)?_.each(n,function(e){2===e.length&&t.push(e[0])}):_.isObject(n)&&(t=_.keys(n)),t},getLanguage:function(){return l},setLanguage:function(e,t,n){var r=this;n=n||{},_.each(Handlebars.templates,function(e,t){0===t.indexOf("lang.")&&delete Handlebars.templates[t]}),!0!==n.noSync?SUGAR.App.sync({callback:function(i){var a=!1;i||(r.updateLanguage(e),a=!SUGAR.App.api.isAuthenticated()&&!n.noUserUpdate,SUGAR.App.cache.set("langHasChanged",a)),t&&t(i)},getPublic:!SUGAR.App.api.isAuthenticated(),noUserUpdate:n.noUserUpdate||!1,language:e,forceRefresh:!0,metadataTypes:["labels"]}):this.updateLanguage(e)},updateLanguage:function(e){SUGAR.App.cache.set("lang",e),i.setPreference("language",e),this.setCurrentLanguage(e),SUGAR.App.trigger("app:locale:change",e)},setDefaultLanguage:function(e){s=e},getDefaultLanguage:function(){return s},setCurrentLanguage:function(e){l=e,this.setDirection(e)},setDirection:function(e){var t=_.contains(["he_IL","ar_SA"],e),n=this.direction;this.direction=t?"rtl":"ltr",this.direction!==n&&SUGAR.App.trigger("lang:direction:change")},_get:function(e,t,n,r){if(SUGAR.App.config.sidecarCompatMode)return SUGAR.App.logger.warn("Core.Language#_get is a private method that you should not access to. You will NOT be allowed to access it in the next release. Please update your code to rely on the public API only."),a(e,t,n,r);SUGAR.App.logger.error("Core.Language#_get is a private method that you are not allowed to access. Please use only the public API.")},_sanitize:function(e){if(SUGAR.App.config.sidecarCompatMode)return SUGAR.App.logger.warn("Core.Language#_sanitize is a private method that you should not access. You will NOT be allowed to access it in the next release. Please update your code to rely on the public API only."),o(e);SUGAR.App.logger.error("Core.Language#_sanitize is a private method that you are not allowed to access. Please use only the public API.")}}},function(e,t){e.exports=function(e){"undefined"!=typeof execScript?execScript(e):eval.call(null,e)}},function(module,exports,__webpack_require__){"use strict";var _header="(function() {\n  var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\n",_footer="})();",_templates={},_sources={},TemplateManager={init:function init(){_templates=SUGAR.App.config.cacheMeta&&SUGAR.App.cache.get("templates")||{};var src="";_.each(_templates,function(e){src+=e});try{eval(_header+src+_footer)}catch(e){SUGAR.App.logger.error("Failed to eval templates retrieved from local storage:\n"+e)}},_add:function(e,t,n){var r=e[0],i=this.get(r,!1);i&&!n||(i&&n&&_sources[r]!=t&&(_templates[r]=Handlebars.templates[r]=null),_sources[r]=t)},_compile:function(e,t,n){return Handlebars.templates=Handlebars.templates||{},_templates[e[0]]=Handlebars.templates[e[0]]=n||!e[1]?this.compile(e[0],t):e[1],_templates[e[0]]},compile:function compile(key,src){try{_templates[key]="templates['"+key+"'] = template("+Handlebars.precompile(src)+");\n",eval(_header+_templates[key]+_footer)}catch(e){SUGAR.App.logger.error("Failed to compile or eval template "+key+".\n"+e)}return this.get(key,!1)||this.empty},get:function(e,t){return(t=_.isUndefined(t)||t)&&!Handlebars.templates[e]&&_sources[e]&&this._compile([e],_sources[e]),Handlebars.templates?Handlebars.templates[e]:null},_getView:function(e,t,n){var r=e+(t?"."+t:"");return[r,this.get(r,n)]},getView:function(e,t){return this._getView(e,t,!0)[1]},_getField:function(e,t,n,r,i,a){var o,s="f."+e+".",l=s+(n?n+".":"")+t;return n+=".",(o=this.get(s+n+t,a)||this.get(s+t,a))||i||(o=this.get(s+n+r,a)||this.get(s+r,a))||(o=this.get("f.base."+t,a)||this.get("f.base."+r,a)),[l,o]},getField:function(e,t,n,r){return this._getField(e,t,n,r,!1,!0)[1]},_getLayout:function(e,t,n){var r="l."+(t?t+".":"")+e;return[r,this.get(r,n)]},getLayout:function(e,t){return this._getLayout(e,t,!0)[1]},setView:function(e,t,n,r){return this._add(this._getView(e,t,!1),n,r)},setField:function(e,t,n,r,i){return this._add(this._getField(e,t,n,null,!0,!1),r,i)},setLayout:function(e,t,n,r){return this._add(this._getLayout(e,t,!1),n,r)},set:function(e,t){e.views&&_.each(e.views,function(e,n){"_hash"!=n&&_.each(e.templates,function(e,r){r=n==r?r:n+"."+r,this.setView(r,null,e,t)},this)},this),e.fields&&_.each(e.fields,function(e,n){"_hash"!=n&&_.each(e.templates,function(e,r){this.setField(n,r,null,e,t)},this)},this),e.layouts&&_.each(e.layouts,function(e,n){"_hash"!=n&&_.each(e.templates,function(e,r){r=n==r?r:n+"."+r,this.setLayout(r,null,e,t)},this)},this)},empty:function(){return""}};module.exports=TemplateManager},function(e,t,n){"use strict";var r={},i=_.extend({},Backbone.Events,{register:function(e,t,n){n&&n.deprecated&&(r[e]=_.pick(n,"message")),t.on(e,function(){var t=[].slice.call(arguments,0);t.unshift(e),this.trigger.apply(this,t)},this)},unregister:function(e,t){e.off(t)},registerAjaxEvents:function(){var e=this;$(document).off("ajaxStop"),$(document).off("ajaxStart"),$(document).on("ajaxStart",function(t){e.trigger("ajaxStart",t)}),$(document).on("ajaxStop",function(t){e.trigger("ajaxStop",t)})},on:_.wrap(Backbone.Events.on,function(e,t,n,i){var a;_.has(r,t)&&(a=r[t].message?r[t].message:"The global event `"+t+"` is deprecated.",i&&(a+="\n"+i+" should not listen to it anymore."),SUGAR.App.logger.warn(a));return e.call(this,t,n,i)})});e.exports=i},function(e,t,n){"use strict";var r=n(0),i=0,a={reset:function(){_.each(this.layouts,function(e,t){delete this.layouts[t]},this),_.each(this.views,function(e,t){delete this.views[t]},this),_.each(this.fields,function(e,t){delete this.fields[t]},this)},getFieldId:function(){return i},views:{},layouts:{},fields:{},_createComponent:function(e,t,n){var r=new(this.declareComponent(e,n.type||t,n.loadModule||n.module,n.controller,!1,this._getPlatform(n)))(n);return r.trigger("init"),r.bindDataChange(),r},createView:function(e){e.context=e.context||SUGAR.App.controller.context,e.module=e.module||e.context.get("module"),e.name=e.name||e.type,e.meta=e.meta||SUGAR.App.metadata.getView(e.module,e.name,e.loadModule),e.def&&e.def.xmeta&&(e.meta=_.extend({},e.meta,e.def.xmeta));var t=e.meta||{};return e.type=e.type||t.type||e.name,this._createComponent("view",e.type,e)},createLayout:function(e){e.context=e.context||SUGAR.App.controller.context,e.module=e.module||e.context.get("module"),e.name=e.name||e.type,e.meta=e.meta||SUGAR.App.metadata.getLayout(e.module,e.name,e.loadModule),e.def&&e.def.xmeta&&(e.meta=_.extend({},e.meta,e.def.xmeta));var t=e.meta||{};return e.type=e.type||t.type||e.name,this._createComponent("layout",e.type,e)},createField:function(e){var t=e.viewDefs?e.viewDefs.type:e.def.type;e.context=e.context||e.view.context||SUGAR.App.controller.context,e.model=e.model||e.context.get("model"),e.module=e.module||(e.model&&e.model.module?e.model.module:e.context.get("module"))||"",e.sfId=++i;var n=this._createComponent("field",t,e);return e.nested?e.view.nestedFields[n.sfId]=n:e.view.fields[n.sfId]=n,n},_getPlatform:function(e){return e.platform||(SUGAR.App.config&&SUGAR.App.config.platform?SUGAR.App.config.platform:"base")},_getController:function(e){var t=this._getBaseComponent(e.type,e.name,e.module,e.platform);return t.cache[t.moduleBasedClassName]?t.cache[t.moduleBasedClassName]:t.baseClass},componentHasPlugin:function(e){var t;return e.type&&e.name&&e.plugin?(t=this._getController(e))&&t.prototype&&_.contains(t.prototype.plugins,e.plugin):(SUGAR.App.logger.error("componentHasPlugin requires type, name, and plugin parameters"),null)},declareComponent:function(e,t,n,i,a,o){a=!(!i||!a);var s=this._getBaseComponent(e,t,n,o,a);return a&&s.cache[s.moduleBasedClassName]&&delete s.cache[s.moduleBasedClassName],s.cache[s.moduleBasedClassName]||r.extendClass(s.cache,s.baseClass,s.moduleBasedClassName,i,s.platformNamespace)||s.baseClass},_getBaseComponent:function(e,t,n,i,a){i=this._getPlatform({platform:i});var o=r.capitalize(e),s=r.capitalize(i),l=r.capitalizeHyphenated(t)+o,u=s+(n||"")+l,c=s+(n||"")+"Custom"+l,h=this[e+"s"],d=r.capitalize(SUGAR.App.config.appId)+o,f=h[s+"Custom"+l]||h[s+l]||h["BaseCustom"+l]||h["Base"+l]||h[l]||h["BaseBase"+o]||this["Custom"+d]||this[d]||this[o];return h[c]&&!a&&(u=c),{cache:h,platformNamespace:s,moduleBasedClassName:u,baseClass:f}}};e.exports=a},function(e,t,n){"use strict";var r=n(1),i={view:"read",readonly:"read",edit:"write",detail:"read",list:"read",disabled:"read"};function a(e,t){return"no"!==("no"===t.access?"no":t[e])}function o(e,t,n){var r=void 0;return e=i[e]||e,t.fields[n]&&t.fields[n][e]&&(r=t.fields[n][e]),"no"!==r}var s={hasAccess:function(e,t,n){var i=void 0,s=void 0;_.isObject(n)?(i=n.field,s=n.acls):(i=arguments[3],s=arguments[4]);var l=r.getAcls()[t];if(!l&&!s)return!0;if(l=l||{},s){var u=_.extend({},l.fields,s.fields);(l=_.extend({},l,s)).fields=u}var c=a(e,l);if(c&&i&&l.fields){c=o(e,l,i);var h=SUGAR.App.metadata.getModule(t),d=h&&h.fields?h.fields[i]:null;c&&d&&d.group&&(c=o(e,l,d.group))}return c},hasAccessToModel:function(e,t,n){var r=void 0,i=void 0,a=void 0;return t&&(r=t.id,i=t.module,a=t.get("_acl")||{fields:{}}),"edit"!==e||r||(e="create"),this.hasAccess(e,i,{field:n,acls:a})},hasAccessToAny:function(e){return _.some(r.getAcls(),function(t,n){return this.hasAccess(e,n)},this)},_hasAccess:function(e,t){if(SUGAR.App.config.sidecarCompatMode)return SUGAR.App.logger.warn("Core.Acl#_hasAccess is a private method that you should not access. You will NOT be allowed to access it in the next release. Please update your code to rely on the public API only."),a(e,t);SUGAR.App.logger.error("Core.Acl#_hasAccess is a private method that you are not allowed to access. Please use only the public API.")},_hasAccessToField:function(e,t,n){if(SUGAR.App.config.sidecarCompatMode)return SUGAR.App.logger.warn("Core.Acl#_hasAccessToField is a private method that you should not access. You will NOT be allowed to access it in the next release. Please update your code to rely on the public API only."),o(e,t,n);SUGAR.App.logger.error("Core.Acl#_hasAccessToField is a private method that you are not allowed to access. Please use only the public API.")},clearCache:function(){SUGAR.App.logger.warn("`Core.Acl#clearCache` is deprecated since 7.10 and will be removed in a future release. This method has no effect. Please do not use it anymore"),this._accessToAny={}}};Object.defineProperty(s,"action2permission",{configurable:!0,get:function(){return SUGAR.App.logger.warn("`Core.Acl.action2permission` has been made private since 7.10 and you will not be able to access it in the next release. Please do not use it anymore"),i},set:function(e){SUGAR.App.logger.warn("`Core.Acl.action2permission` has been made private since 7.10 and you will not be able to access it in the next release. Please do not use it anymore"),i=e}});var l={};Object.defineProperty(s,"_accessToAny",{configurable:!0,get:function(){return SUGAR.App.logger.warn("`Core.Acl#_accessToAny` is deprecated since 7.10 and will be removed in a future release. Please do not use it anymore"),l},set:function(e){SUGAR.App.logger.warn("`Core.Acl#_accessToAny` is deprecated since 7.10 and will be removed in a future release. Please do not use it anymore"),l=e}}),e.exports=s},function(e,t,n){"use strict";function r(e,t){if(a.plugins[t]&&a.plugins[t][e])return a.plugins[t][e]}function i(e,t){return!!_.find(e.disabledPlugins,function(e){return e===t})}var a={plugins:{view:{},field:{},layout:{},model:{},collection:{}},attach:function(e,t){_.each(e.plugins,function(n){var a=null;if(_.isObject(n)){var o=_.keys(n)[0];a=n[o],n=o}var s=r(n,t);if(s&&!i(e,n)){var l=_.extend({},_.isFunction(e.events)?e.events():e.events,s.events);_.extend(e,s),a&&(_.extend(e,a),a.events&&_.extend(l,a.events)),e.events=l,_.isFunction(s.onAttach)&&s.onAttach.call(e,e,s)}},this)},detach:function(e,t){_.each(e.plugins,function(n){var i=r(n,t);i&&_.isFunction(i.onDetach)&&i.onDetach.call(e,e,i)},this)},register:function(e,t,n){_.isArray(t)||(t=[t]),_.each(t,function(t){this.plugins[t]=this.plugins[t]||{},this.plugins[t][e]=n},this)},_isPluginDisabled:function(e,t){if(SUGAR.App.config.sidecarCompatMode)return SUGAR.App.logger.warn("Core.pluginManager#_isPluginDisabled is a private method that you should not access. You will NOT be allowed to access it in the next release. Please update your code to rely on the public API only."),i(e,t);SUGAR.App.logger.error("Core.pluginManager#_isPluginDisabled is a private method that you are not allowed to access. Please use only the public API.")},_get:function(e,t){if(SUGAR.App.config.sidecarCompatMode)return SUGAR.App.logger.warn("Core.pluginManager#_get is a private method that you should not access. You will NOT be allowed to access it in the next release. Please update your code to rely on the public API only."),r(e,t);SUGAR.App.logger.error("Core.pluginManager#_get is a private method that you are not allowed to access. Please use only the public API.")}};e.exports=a},function(e,t,n){"use strict";var r=n(15),i=n(1),a=Backbone.View.extend({_isInitialized:!1,constructor:function(e){return this.options=e||{},this._wrapInitialize(e),Backbone.View.apply(this,arguments)},_wrapInitialize:function(e){this.initialize=_.wrap(this.initialize,_.bind(function(t){t.call(this,e),this.initialize=t,this._isInitialized=!0,this.delegateEvents()},this))},initialize:function(e){this.context=e.context||SUGAR.App.controller&&SUGAR.App.controller.context||new Backbone.Model,this.meta=e.meta,this.module=e.module||this.context.get("module"),this.model=e.model||this.context.get("model"),this.collection=e.collection||this.context.get("collection"),this.meta&&this.meta.css_class&&this.$el.addClass(this.meta.css_class),this.updateVisibleState(!0),i.lastState.register(this)},_render:function(){return this},render:function(){return!0===this.disposed?(SUGAR.App.logger.error("Unable to render component because it's disposed "+this+"\n"),!1):!!this.triggerBefore("render")&&(this._render(),this.trigger("render"),this)},delegateEvents:function(){return this._isInitialized?Backbone.View.prototype.delegateEvents.apply(this,arguments):this},setTemplateOption:function(e,t){this.options.templateOptions=this.options.templateOptions||{},this.options.templateOptions[e]=_.extend({},this.options.templateOptions[e],t)},bindDataChange:function(){},unbindData:function(){this.model&&this.model.off(null,null,this),this.collection&&this.collection.off(null,null,this)},unbind:function(){this.off(),this.offBefore(),this.undelegateEvents(),SUGAR.App.events.off(null,null,this),SUGAR.App.events.unregister(this),this.context&&this.context.off(null,null,this),this.layout&&this.layout.off(null,null,this)},loadData:_.noop,_dispose:function(){this.unbindData(),this.unbind(),this.remove(),this.model=null,this.collection=null,this.context=null,this.$el=null,this.el=null},dispose:function(){!0!==this.disposed&&(this._dispose(),this.disposed=!0)},toString:function(){return this.cid+"-"+(this.$el&&this.$el.id?this.$el.id:"<no-id>")+"/"+this.module+"/"+this.model+"/"+this.collection},closestComponent:_.noop,show:function(){if(!this.isVisible()){if(!this.triggerBefore("show"))return!1;this._show(),this.trigger("show")}},hide:function(){if(this.isVisible()){if(!this.triggerBefore("hide"))return!1;this._hide(),this.trigger("hide")}},isVisible:function(){return this._isVisible},updateVisibleState:function(e){this._isVisible=!!e},_show:function(){this.$el.removeClass("hide").show(),this.updateVisibleState(!0)},_hide:function(){this.$el.addClass("hide").hide(),this.updateVisibleState(!1)},_super:function(e,t){if(!e||!_.isString(e))return SUGAR.App.logger.error("tried to call _super without specifying a parent method in "+this.name);var n,r=Object.getPrototypeOf(this);if(t=t||[],this._superStack=this._superStack||{},this._superStack[e]=this._superStack[e]||[],this._superStack[e].length>0){if(n=Object.getPrototypeOf(_.last(this._superStack[e])),_.contains(this._superStack[e],n))return SUGAR.App.logger.error("Loop detected calling "+e+" from "+this.name)}else n=Object.getPrototypeOf(r);if(!r[e])return SUGAR.App.logger.error("Unable to find method "+e+" on class "+this.name);for(;!n.hasOwnProperty(e)&&n!==a.prototype;)n=Object.getPrototypeOf(n);for(;r[e]===n[e]&&n!==a.prototype;)r=n,n=Object.getPrototypeOf(n);if(this._superStack[e].push(n),!n)return SUGAR.App.logger.error("Unable to find parent of component "+this.name);if(!n[e])return SUGAR.App.logger.error("Unable to find method "+e+" on parent class of "+this.name);var i=n[e].apply(this,t);return this._superStack[e].pop(),_.isEmpty(this._superStack[e])&&(this._superStack[e]=null),i},getPlaceholder:function(){return new Handlebars.SafeString('<span cid="'+this.cid+'"></span>')}});_.extend(a.prototype,r),e.exports=a},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(8),a=n(0),o=n(24);function s(e,t,n,r){_.isUndefined(t)||(_.isUndefined(e[n])&&(e[n]={}),e[n][r]=t)}Backbone.Model.prototype.doValidate=function(e,t){t(this.isValid())};var l=Backbone.Model.extend({constructor:function(e,t){i.attach(this,"model"),Backbone.Model.prototype.constructor.call(this,e,t)},initialize:function(e){Backbone.Model.prototype.initialize.call(this,e),this.setSyncedAttributes(this.attributes),this._bindEvents(),this._relatedCollections=this._relatedCollections||null,this._activeFetchRequest=null,this.isNew()&&this._defaults&&_.each(this._defaults,function(e,t){this.has(t)||this.set(t,e,{silent:!0})},this),this.fields&&(this.fields=a.deepCopy(this.fields)),this.addValidationTask("sidecar",_.bind(this._doValidate,this))},fetch:function(e){return e=_.extend({},this.getOption(),e),this.abortFetchRequest(),this._activeFetchRequest=Backbone.Model.prototype.fetch.call(this,e),this._activeFetchRequest},getFetchRequest:function(){return this._activeFetchRequest},abortFetchRequest:function(){var e=this.getFetchRequest();e&&SUGAR.App.api.abortRequest(e.uid)},set:function(e,t,n){if(_.isUndefined(e)||_.isNull(e))return this;var i;"object"===(void 0===e?"undefined":r(e))?(i=e,n=t):(i={})[e]=t,n=n||{};var a=this.getCollectionFields(i);return i=_.omit(i,_.keys(a)),Backbone.Model.prototype.set.call(this,i,n),this._setCollectionFieldValues(a,n),this},get:function(e){var t=Backbone.Model.prototype.get.call(this,e);return!this.fields||!this.fields[e]||"collection"!==this.fields[e].type||t instanceof SUGAR.App.MixedBeanCollection?t:(t=this._createMixedBeanCollectionField(e),Backbone.Model.prototype.set.call(this,_.object([e],[t]),{silent:!0}),t)},_setCollectionFieldValues:function(e,t){_.each(e,function(e,n){if(e instanceof SUGAR.App.MixedBeanCollection)this.get(n)!==e&&(this.stopListening(this.get(n)),Backbone.Model.prototype.set.call(this,_.object([n],[e]),t),this.listenTo(e,"update reset",function(e,t){this.trigger("change:"+n,this,e,t)}),this.off("sync",e.resetDelta,e),this.on("sync",e.resetDelta,e));else{var r={},i=this.get(n);_.isObject(e)&&e.records&&(r=_.extend(r,_.omit(e,"records")),e=e.records),_.each(r,function(e,t){i[t]=e}),i.offset=i.next_offset,i.reset(e,t)}},this)},_createMixedBeanCollectionField:function(e,t){var n=this.fields[e];if(n&&n.links){var r=n.links;_.isString(r)&&(r=[r]);var i={};_.each(r,function(e){_.isObject(e)&&_.has(e,"name")&&(e=e.name),_.isString(e)&&(i[e]=this.getRelatedCollection(e))},this);var a=SUGAR.App.data.createMixedBeanCollection(t||[],{links:i,parentBean:this,collectionField:e});return this.listenTo(a,"update reset",function(t,n){this.trigger("change:"+e,this,t,n)}),this.off("sync",a.resetDelta,a),this.on("sync",a.resetDelta,a),a}},_bindEvents:function(){this.on("sync",function(){this._checkAcl(),this.setSyncedAttributes(this.attributes)},this)},_checkAcl:function(){var e=this._checkFieldAcls();!_.size(e)&&_.isEqual(_.omit(this.get("_acl"),"fields"),_.omit(this.getSynced("_acl"),"fields"))||this.trigger("acl:change",e)},_checkFieldAcls:function(){var e={},t=_.property("fields"),n=t(this.getSynced("_acl"))||{},r=t(this.get("_acl"))||{},i=_.extend({},n,r);return _.each(i,function(t,i){_.isEqual(n[i],r[i])||(this.trigger("acl:change:"+i),e[i]=!0)},this),e},dispose:function(){i.detach(this,"model")},_setRelatedCollection:function(e,t){this._relatedCollections||(this._relatedCollections={}),this._relatedCollections[e]=t},getRelatedCollection:function(e){return this._relatedCollections&&this._relatedCollections[e]?this._relatedCollections[e]:SUGAR.App.data.createRelatedCollection(this,e)},isValidAsync:function(e,t){e=e||this.fields,async.waterfall(_.flatten([function(t){t(null,e,{})},_.sortBy(this._validationTasks)]),function(e,n,r){if(!e){var i=_.isEmpty(r);_.isFunction(t)&&t(i,r)}})},doValidate:function(e,t){var n=this;this.trigger("validation:start"),this.isValidAsync(e,function(e,r){e&&n.trigger("validation:success"),n.trigger("validation:complete",n._processValidationErrors(r)),_.isFunction(t)&&t(e)})},_doValidate:function(e,t,n){var r;_.each(e,function(e,n){_.isString(e)&&(n=e,e=this.fields[n]),r=this.get(n),e&&(s(t,o.requiredValidator(e,e.name,this,r),n,"required"),(r||0===r)&&_.each(o.validators,function(i,a){"url"!==a&&s(t,i(e,r,this),n,a)},this))},this),n(null,e,t)},addValidationTask:function(e,t){this._validationTasks=this._validationTasks||{},this._validationTasks[e]=t},removeValidationTask:function(e){this._validationTasks&&(this._validationTasks=_.omit(this._validationTasks,e))},_processValidationErrors:function(e){var t=!0;return _.isEmpty(e)||(SUGAR.App.error.handleValidationError(this,e),_.each(e,function(e,t){this.trigger("error:validation:"+t,e)},this),this.trigger("error:validation",e),t=!1),t},save:function(e,t){var n=this;if(!t||!t.fieldsToValidate)return Backbone.Model.prototype.save.call(this,e,t);this.doValidate(t.fieldsToValidate,function(r){if(r)return Backbone.Model.prototype.save.call(n,e,t)})},canHaveAttachments:function(){return _.has(this.fields,"attachment_list")},getFiles:function(e,t){return(t=t||{}).passOAuthToken=!1,SUGAR.App.api.file("read",{module:this.module,id:this.id},null,e,t)},copy:function(e,t,n){var r={},i=SUGAR.App.metadata.getModule(this.module).fields;t=t||_.pluck(i,"name"),_.each(t,function(t){var n=i[t];if(n&&"no"!==n.duplicate_on_record_copy&&("always"===n.duplicate_on_record_copy||"id"!==t&&"link"!==n.type&&!n.auto_increment)&&e.has(t)){var o=e.get(t);_.isObject(o)&&(o=a.deepCopy(o)),r[t]=o}}),this.set(r,n),this.isCopied=!0},isCopy:function(){return!0===this.isCopied},uploadFile:function(e,t,n,r){return n=n||{},r=r||{},SUGAR.App.api.file("create",{id:!0!==r.temp?this.id:"temp",module:this.module,field:e},t,n,r)},favorite:function(e,t){return(t=t||{}).favorite=!0,this.save({my_favorite:!!e},t)},follow:function(e,t){return e=e||!1,(t=t||{}).following=!0,this.save({following:e},t)},isFavorite:function(){var e=this.get("my_favorite");return"1"===e||!0===e},getChangeDiff:function(e,t){var n={};return e=e||{},t=t||[],_.each(this.attributes,function(r,i){if(!_.contains(t,i)){var a=e[i];_.isEqual(a,r)||(n[i]=a)}}),n},hasChanged:function(e){return this.get(e)instanceof SUGAR.App.MixedBeanCollection?this.get(e).hasDelta():Backbone.Model.prototype.hasChanged.call(this,e)},toJSON:function(e){var t=e&&e.fields?e.fields:_.keys(this.attributes),n={};return _.each(t,function(t){var r=this.get(t);r instanceof SUGAR.App.MixedBeanCollection?_.each(r.getDelta(),function(e,t){n[t]=e}):(_.isObject(r)&&_.isFunction(r.toJSON)&&(SUGAR.App.logger.warn("Calling `toJSON` on object attributes is deprecated in 7.9 and will be removed in 7.10"),r=r.toJSON(e)),n[t]=r)},this),n},toString:function(){return"bean:"+this.module+"/"+(this.id?this.id:"<no-id>")},revertAttributes:function(e){var t=this;(e=e||{}).revert=!0;var n=this.changedAttributes(this.getSynced()),r=this.getCollectionFields(n);this.set(a.deepCopy(n)||{},e),_.each(r,function(e,n){t.get(n).resetDelta()},this),e.silent||this.trigger("attributes:revert")},changedAttributes:function(e){var t=this,n=this.getCollectionFields(e);_.isUndefined(e)||(e=_.omit(e,_.keys(n)));var r=Backbone.Model.prototype.changedAttributes.call(this,e);return _.each(n,function(e,n){t.get(n).hasDelta()&&((r=r||{})[n]=e)},this),r},setSyncedAttributes:function(e){this._syncedAttributes=e?a.deepCopy(e):{}},getSynced:function(e){return e?this._syncedAttributes[e]:this._syncedAttributes},getDefault:function(e){var t=_.clone(this._defaults)||{};return _.isUndefined(e)?t:t[e]},setDefault:function(e,t){var n;return _.isObject(e)?n=e:(n={})[e]=t,this._defaults=_.extend({},this._defaults,n),this.attributes=_.defaults(this.attributes,n),this},setOption:function(e,t){var n;return _.isObject(e)?n=e:(n={})[e]=t,this._persistentOptions=_.extend({},this._persistentOptions,n),this},unsetOption:function(e){return e?this.setOption(e,void 0):this._persistentOptions={},this},getOption:function(e){return e?this._persistentOptions[e]:this._persistentOptions},fieldsOfType:function(e){return _.where(this.fields,{type:e})},getCollectionFields:function(e){return _.pick(e,_.pluck(this.fieldsOfType("collection"),"name"))},merge:function(e,t,n){return _.extend(e,t)}});e.exports=l},function(e,t,n){"use strict";var r=n(10),i=n(8),a=Backbone.Collection.extend({_activeFetchRequest:null,model:r,constructor:function(e,t){i.attach(this,"collection"),t&&t.link&&(this.link=t.link,delete t.link),Backbone.Collection.prototype.constructor.call(this,e,t)},initialize:function(e,t){this._persistentOptions={},this._create=[],this._delete=[],this._add=[],this.setOption(t),this._bindCollectionEvents(),Backbone.Collection.prototype.initialize.call(this,e,t),this.total=null},_bindCollectionEvents:function(){this.on("data:sync:complete",function(){this.getFetchRequest()&&(this._activeFetchRequest=null)},this),this.on("remove",this._decrementTotal,this),this.link&&this.on("sync",this.resetDelta,this)},_decrementTotal:function(){this.total&&this.total--},add:function(e,t){var n=this;return e=Backbone.Collection.prototype.add.call(this,e,t),_.isUndefined(e)||!this.link||t&&t.method?e:(e=_.isArray(e)?e:[e],_.each(e,function(e){if(e)if(e.isNew())n._create.push(e);else{var t=_.find(n._delete,e);t?n._delete=_.without(n._delete,t):n._add.push(e)}},this),1===e.length?e[0]:e)},remove:function(e,t){var n=this;return e=Backbone.Collection.prototype.remove.call(this,e,t),_.isUndefined(e)||!this.link?e:(e=_.isArray(e)?e:[e],_.each(e,function(e){e&&(e.isNew()?n._create=_.without(n._create,e):_.contains(n._add,e)?n._add=_.without(n._add,e):n._delete.push(e))},this),1===e.length?e[0]:e)},reset:function(e,t){return this.resetDelta(),Backbone.Collection.prototype.reset.call(this,e,t)},getDelta:function(){var e={};e.create=_.invoke(this._create,"toJSON");var t=SUGAR.App.data.getOppositeLink(this.link.bean.module,this.link.name),n=SUGAR.App.data.getRelationFields(this.module,t);return e.add=_.map(this._add,function(e){var t={id:e.id};return _.each(n,function(n){e.get(n)&&(t[n]=e.get(n))}),t}),e.delete=_.pluck(this._delete,"id"),e},hasDelta:function(){return!_.all([this._add,this._delete,this._create],_.isEmpty)},resetDelta:function(){this._create=[],this._add=[],this._delete=[]},dispose:function(){i.detach(this,"collection")},_prepareModel:function(e,t){var n=e._search;return delete e._search,(e=Backbone.Collection.prototype._prepareModel.call(this,e,t))&&!e.link&&(e.link=this.link),n&&(e.searchInfo=n),e},fetch:function(e){return e=_.extend({},this.getOption(),e),this.abortFetchRequest(),e.fields=this.fields=e.fields||this.fields||null,e.myItems=_.isUndefined(e.myItems)?this.myItems:e.myItems,e.favorites=_.isUndefined(e.favorites)?this.favorites:e.favorites,e.query=_.isUndefined(e.query)?this.query:e.query,e.reset=!!_.isUndefined(e.reset)||e.reset,this._activeFetchRequest=Backbone.Collection.prototype.fetch.call(this,e),this.getFetchRequest()},getFetchRequest:function(){return _.isFunction(this._activeFetchRequest)?this._activeFetchRequest():this._activeFetchRequest},abortFetchRequest:function(){var e=this.getFetchRequest();e&&(SUGAR.App.api.abortRequest(e.uid),this._activeFetchRequest=null)},resetPagination:function(){this.offset=this.getOption("offset")||0,this.next_offset=0,this.page=this.getOption("page")||1},paginate:function(e){var t=(e=e||{}).limit||SUGAR.App.config.maxQueryResult;e.page=e.page||1,e.reset=!_.isUndefined(e.reset)&&e.reset,e.page--,t&&_.isNumber(this.offset)&&(e.offset=this.offset+e.page*t),e.add&&(e=_.extend({update:!0,remove:!1},e)),this.fetch(e)},fetchTotal:function(e){if(e=e||{},_.isNull(this.total)||!_.isFunction(e.success)){e.success=_.wrap(e.success,_.bind(function(e,t){this.total=parseInt(t.record_count,10),e&&_.isFunction(e)&&e(this.total)},this));var t=this.module,n=null;e.filter=e.filterDef||this.filterDef,this.link&&(n={id:this.link.bean.id,link:this.link.name},t=this.link.bean.module);var r=_.pick(e,"success","complete","error");return e=_.omit(e,"success","complete","error"),SUGAR.App.api.count(t,n,r,e)}e.success.call(this,this.total)},hasAtLeast:function(e,t){(t=t||{}).fields=["id"],delete t.view,t.silent=!0,t.success=_.wrap(t.success,_.bind(function(t,n){var r=n.records.length,i=r>=e,a={length:r,hasMore:-1!==n.next_offset};_.isFunction(t)&&t(i,a),this.reset(null,{silent:!0})},this));var n=this.module,r=null,i="records";t.filter=t.filterDef||this.filterDef,t.limit=t.limit||e,this.link&&(r={id:this.link.bean.id,link:this.link.name},n=this.link.bean.module,i="relationships");var a=_.pick(t,"success","complete","error");return t=_.omit(t,"success","complete","error"),t=SUGAR.App.data.parseOptionsForSync("read",this,t),SUGAR.App.api[i]("read",n,r,t.params,a,t.apiOptions)},getPageNumber:function(e){var t=1,n=SUGAR.App.config.maxQueryResult;return e&&(n=e.limit||n),this.offset&&n&&(t=Math.ceil(this.offset/n)),t},toString:function(){return"coll:"+(this.link?this.link.bean.module+"/"+this.link.bean.id+"/":"")+this.module+"-"+this.length},getNext:function(e,t){var n=this,r=-1,i=function(){t.apply(n,[n.at(r+1),"next"])};this.hasNextModel(e)&&((r=this.getModelIndex(e))+1>=this.length?this.paginate({add:!0,success:i}):i())},getPrev:function(e,t){var n=-1,r=null;this.hasPreviousModel(e)&&(n=this.getModelIndex(e),r=this.at(n-1)),t.apply(this,[r,"prev"])},hasNextModel:function(e){var t=this.getModelIndex(e),n=_.isUndefined(this.next_offset)?-1:parseInt(this.next_offset,10);return t>=0&&(this.length>t+1||-1!==n)},hasPreviousModel:function(e){return this.getModelIndex(e)>0},getModelIndex:function(e){return this.indexOf(this.get(e.id))},setOption:function(e,t){var n;return _.isObject(e)?n=e:(n={})[e]=t,_.extend(this._persistentOptions,n),this},unsetOption:function(e){return e?this.setOption(e,void 0):this._persistentOptions={},this},getOption:function(e){return e?this._persistentOptions[e]:this._persistentOptions},clone:function(){var e=Backbone.Collection.prototype.clone.call(this);return e.link=_.clone(this.link),e.setOption(_.clone(this.getOption())),e}});e.exports=a},function(e,t,n){"use strict";var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(1),a=n(2),o=moment;_.extend(o,{InvalidException:function(e,t){this.name="InvalidException",this.message=e,this.date=t},_cachedFormats:{},_serverDateFormat:"YYYY-MM-DD",_serverLocale:"en",convertFormat:function(e){if(o._cachedFormats[e])return o._cachedFormats[e];var t=e;return _.each([["d","DD"],["m","MM"],["Y","YYYY"],["H","HH"],["h","hh"],["G","H"],["g","h"],["i","mm"]],function(e){var n=r(e,2),i=n[0],a=n[1];t=t.replace(i,a)}),o._cachedFormats[e]=t,t},compare:function(e,t){var n=moment(e),r=moment(t);if(!n.isValid())throw new o.InvalidException("Invalid date passed for comparison.",e);if(!r.isValid())throw new o.InvalidException("Invalid date passed for comparison.",t);return n.isBefore(r)?-1:n.isAfter(r)?1:0},getUserDateFormat:function(e){return e=e||i,this.convertFormat(e.getPreference("datepref"))},getUserTimeFormat:function(e){return e=e||i,this.convertFormat(e.getPreference("timepref"))}});var s={};_.extend(o,{parse:function(e,t){SUGAR.App.logger.warn("The function `Utils.Date.parse()` is deprecated and will be removed in a future release. Please do not use it");var n,r,i,a,o,s,l=new Date("Jan 1, 1970 00:00:00"),u="";if(e instanceof Date)return e;if(t||(t=this.guessFormat(e)),!1===t)return!!/^\d+$/.test(e)&&new Date(e);for(n=$.trim(e),t=$.trim(t)+" ",r=0;r<t.length;r++)if(":"===(i=t.charAt(r))||"/"===i||"-"===i||"."===i||" "===i||"a"===i||"A"===i){switch(-1===(a=n.indexOf(i))&&(a=n.length),o=n.substring(0,a),n=n.substring(a+1),u){case"m":if(!(o>0&&o<13))return!1;l.setMonth(o-1);break;case"d":if(!(o>0&&o<32))return!1;l.setDate(o);break;case"Y":if(o>0==!1)return!1;l.setYear(o);break;case"h":s=t.substring(t.length-4),o=parseInt(o,10);var c=$.trim(s.toLowerCase());if("i a"===c||c===i+"ia"){var h=n.substring(n.length-2).toLowerCase();"pm"===h?o<12&&(o+=12):"am"===h&&12===o&&(o=0)}l.setHours(o);break;case"H":l.setHours(o);break;case"i":o=o.substring(0,2),l.setMinutes(o);break;case"s":l.setSeconds(o)}u=""}else u=i;return l},guessFormat:function(e){if(SUGAR.App.logger.warn("The function `Utils.Date.guessFormat()` is deprecated and will be removed in a future release. Please do not use it"),"string"!=typeof e)return!1;var t,n,r,i,a,o,s,l,u="";if(-1!==e.indexOf(" ")&&(u=e.substring(e.indexOf(" ")+1,e.length),e=e.substring(0,e.indexOf(" "))),t="/",-1!==e.indexOf("/"));else if(-1!==e.indexOf("-"))t="-";else{if(-1===e.indexOf("."))return!1;t="."}if(r="",4===(n=e.split(t))[0].length)r="Y"+t+"m"+t+"d";else{if(4!==n[2].length)return!1;r="m"+t+"d"+t+"Y"}return i="",a=[],""!==u&&(a.push("i"),o=":",2===u.indexOf(".")&&(o="."),3===u.split(o).length&&a.push("s"),s="","am"===(l=u.substring(u.length-2,u.length)).toLowerCase()||"pm"===l.toLowerCase()?(a.unshift("h"),s=l.toLowerCase()===l?"lower":"upper"):a.unshift("H"),i=a.join(o),-1!==u.indexOf(" ")&&(i+=" "),s&&"upper"===s?i+="A":s&&"lower"===s&&(i+="a"),r=r+" "+i),r},parseFormat:function(e){if(SUGAR.App.logger.warn("The function `Utils.Date.parseFormat()` is deprecated and will be removed in a future release. Please do not use it"),!(e in s)){var t,n,r={};for(t=0;t<e.length;t++)switch(n=e.charAt(t)){case"m":case"n":r.month=n;break;case"d":case"j":r.day=n;break;case"Y":r.year=n;break;case"H":case"h":case"g":r.hours=n;break;case"i":r.minutes=n;break;case"s":r.seconds=n;break;case"A":case"a":r.amPm=n}s[e]=r}return s[e]},format:function(e,t){if(SUGAR.App.logger.warn("The function `Utils.Date.format()` is deprecated and will be removed in a future release. Please do not use it"),!_.isDate(e))return"";var n,r,i,a,o,s,l="";for(n=0;n<t.length;n++)switch(r=t.charAt(n)){case"\\":l+=t.charAt(n+1),n++;break;case"m":case"n":l+=(o=e.getMonth()+1)<10&&"m"===r?"0"+o:o;break;case"d":case"j":l+=(i=e.getDate())<10&&"d"===r?"0"+i:i;break;case"Y":l+=e.getFullYear();break;case"H":case"h":case"g":a=e.getHours(),"h"!==r&&"g"!==r||(a=0===(a=a>12?a-12:a)?12:a),l+=a<10&&"g"!==r?"0"+a:a;break;case"i":l+=(o=e.getMinutes())<10?"0"+o:o;break;case"s":l+=(s=e.getSeconds())<10?"0"+s:s;break;case"a":case"A":e.getHours()<12?l+="a"===r?"am":"AM":l+="a"===r?"pm":"PM";break;default:l+=r}return l},roundTime:function(e){if(SUGAR.App.logger.warn("The function `Utils.Date.roundTime()` is deprecated and will be removed in a future release. Please do not use it"),!e.getMinutes)return 0;var t=e.getMinutes();return t<1?t=0:t<16?t=15:t<31?t=30:t<46?t=45:(t=0,e.setHours(e.getHours()+1)),e.setMinutes(t),e},UTCtoLocalTime:function(e){return SUGAR.App.logger.warn("The function `Utils.Date.UTCtoLocalTime()` is deprecated and will be removed in a future release. Please do not use it"),e instanceof Date?new Date(this.toUTC(e)):e},UTCtoTimezone:function(e,t){return SUGAR.App.logger.warn("The function `Utils.Date.UTCtoTimezone()` is deprecated and will be removed in a future release. Please do not use it"),e instanceof Date&&null!=t?(t=60*parseFloat(t)*60*1e3,t-=60*e.getTimezoneOffset()*1e3*-1,new Date(this.toUTC(e)+t)):e},toUTC:function(e){if(SUGAR.App.logger.warn("The function `Utils.Date.toUTC()` is deprecated and will be removed in a future release. Please do not use it"),!(e instanceof Date))return e;var t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=e.getHours(),a=e.getMinutes(),o=e.getSeconds(),s=e.getMilliseconds();return Date.UTC(t,n,r,i,a,o,s)},getRelativeTimeLabel:function(e){SUGAR.App.logger.warn("The function `Utils.Date.getRelativeTimeLabel()` is deprecated and will be removed in a future release. Please do not use it");var t=new Date,n=t.getTime()<e.getTime(),r=n?e-t:t-e,i={str:"",value:void 0};return isNaN(r)||r<0?i:r<2e3?(i.str="LBL_TIME_AGO_NOW",i):r<6e4?(i.str=n?"LBL_TIME_UNTIL_SECONDS":"LBL_TIME_AGO_SECONDS",i.value=Math.floor(r/1e3),i):r<12e4?(i.str=n?"LBL_TIME_UNTIL_MINUTE":"LBL_TIME_AGO_MINUTE",i):r<36e5?(i.str=n?"LBL_TIME_UNTIL_MINUTES":"LBL_TIME_AGO_MINUTES",i.value=Math.floor(r/6e4),i):r<72e5?(i.str=n?"LBL_TIME_UNTIL_HOUR":"LBL_TIME_AGO_HOUR",i):r<864e5?(i.str=n?"LBL_TIME_UNTIL_HOURS":"LBL_TIME_AGO_HOURS",i.value=Math.floor(r/36e5),i):r>864e5&&r<1728e5?(i.str=n?"LBL_TIME_UNTIL_DAY":"LBL_TIME_AGO_DAY",i):r<31536e6?(i.str=n?"LBL_TIME_UNTIL_DAYS":"LBL_TIME_AGO_DAYS",i.value=Math.floor(r/864e5),i):(i.str=n?"LBL_TIME_UNTIL_YEAR":"LBL_TIME_AGO_YEAR",i)},parseDisplayDefault:function(e,t){var n,r,i,a,o,s,l;SUGAR.App.logger.warn("The function `Utils.Date.parseDisplayDefault()` is deprecated and will be removed in a future release. Please do not use it");var u,c,h,d=t||new Date;if(!e)return e;if(s=function(e,t){var n=e.getDate();return e.setMonth(e.getMonth()+t),e.getDate()<n&&(e.setDate(1),e.setDate(e.getDate()-1)),e},l=function(e){var t,n;t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n=d.getDay(),e=e.toLowerCase();for(var r=7;r--;)if(e===t[r]){e=r<=n?r+7:r;break}return e-n},n={day:function(e){return new Date(d.setDate(d.getDate()+e))},week:function(e){return new Date(d.setDate(d.getDate()+7*e))},month:function(e){return s(d,e)},year:function(e){return s(d,12*e)},now:function(){return d},"next monday":function(){return new Date(d.setDate(d.getDate()+l("monday")))},"next friday":function(){return new Date(d.setDate(d.getDate()+l("friday")))},"first of next month":function(){d.setDate(1);var e=d.setMonth(d.getMonth()+1);return new Date(e)}},e&&e.indexOf("&")>=0?(a=(i=e.split("&"))[0],o=i[1]):a=e,a.match(/\b(now|day|week|month|year)/g))if(0===a.indexOf("now")?c="now":-1!==a.indexOf("first day of next month")?c="firstnextmonth":(u=(h=a.split(" "))[0],c=h[1]),c.match("now"))r=n.now();else if(c.match("firstnextmonth"))r=n["first of next month"]();else if(c.match("days?"))r=n.day(parseInt(u,10));else if(c.match("weeks?"))r=n.week(parseInt(u,10));else if(c.match("months?"))r=n.month(parseInt(u,10));else if(c.match("years?"))r=n.year(parseInt(u,10));else{if(!n[a])return;r=n[a]()}else{if(!n[a])return;r=n[a]()}return function(e){var t,n,r;(t=/^(\d\d?).(\d{2}).?([ap]m)?$/.exec(o))&&t.length>2&&((n=t[1])&&("pm"===t[3]?n<12&&(n=parseInt(n,10)+12):"12"===n&&(n="0"),e.setHours(parseInt(n,10))),(r=t[2])&&e.setMinutes(parseInt(r,10)))}(r),r},toDatepickerFormat:function(e){if(_.isUndefined(e)||!e)return"";var t={y:"yy",Y:"yyyy",m:"mm",d:"dd"};return e.replace(/[yYmd]/g,function(e){return t[e]})},stripIsoTimeDelimterAndTZ:function(e){if(SUGAR.App.logger.warn("The function `Utils.Date.stripIsoTimeDelimterAndTZ()` is deprecated and will be removed in a future release. Please do not use it"),!_.isUndefined(e)&&e)return e.replace("T"," ").substr(0,19)},isIso:function(e){return SUGAR.App.logger.warn("The function `Utils.Date.isIso()` is deprecated and will be removed in a future release. Please do not use it"),!!e.match(/^([0-9]{4})-?(1[0-2]|0[1-9])-?(3[0-1]|0[1-9]|[1-2][0-9])$/)||!(!e.match(/[T\+Z ]/g)||!e.match(/^([0-9]{4})-?(1[0-2]|0[1-9])-?(3[0-1]|0[1-9]|[1-2][0-9])/))}}),_.extend(o.fn,{formatUser:function(e,t){var n=o.getUserDateFormat(t);return e||(n+=" "+o.getUserTimeFormat(t)),this.format(n)},formatServer:function(e){var t=e&&o._serverDateFormat,n=this.locale();this.locale(o._serverLocale);var r=this.format(t);return this.locale(n),r},isBetween:function(e,t,n){n=!!_.isUndefined(n)||n;var r=this.isAfter(e)&&this.isBefore(t);return n&&!r&&(r=this.isSame(e)||this.isSame(t)),r}}),_.extend(o.duration.fn,{format:function(){var e=[],t=this.minutes(),n=this.hours(),r=Math.floor(this.asDays());return r>0&&(e.push(r),e.push(a.get(1===r?"LBL_DURATION_DAY":"LBL_DURATION_DAYS"))),n>0&&(e.push(n),e.push(a.get(1===n?"LBL_DURATION_HOUR":"LBL_DURATION_HOURS"))),t>0&&(e.push(t),e.push(a.get(1===t?"LBL_DURATION_MINUTE":"LBL_DURATION_MINUTES"))),e.join(" ")}}),e.exports=o},function(e,t,n){"use strict";var r=n(30),i=n(0),a=n(6),o={},s={preventAnyAlert:!1,init:function(){this.$alerts=$("#alerts"),this.klass=r,SUGAR.App.config&&(this.$alerts=$(SUGAR.App.config.alertsEl).length?$(SUGAR.App.config.alertsEl):this.$alerts,this.klass=a[i.capitalize(SUGAR.App.config.appId)+"AlertView"]||a.views[i.capitalize(SUGAR.App.config.platform)+"AlertView"]||a.views.BaseAlertView||a[i.capitalize(SUGAR.App.config.platform)+"AlertView"]||this.klass),_.each(this.$alerts.find(".alert-wrapper"),function(e,t){var n="init-"+t;o[n]=this._create(n,{el:e})},this)},show:function(e,t){if(!this.$alerts||!this.$alerts.length)return null;if(this.preventAnyAlert)return null;"confirmation"===(t=_.extend({level:"info",autoClose:!1},t||{})).level&&(this.dismissAll(),this.preventAnyAlert=!0),t.messages&&(t.messages=_.isString(t.messages)?[t.messages]:t.messages);var n=o[e];return n||(n=this._create(e,t),o[e]=n),n.level=t.level,t.autoClose&&this._setAutoCloseTimer(n,t.onAutoClose,t.autoCloseDelay),n.render(),n},_create:function(e,t){var n=new this.klass(t);return n.key=e,n.$el.prependTo(this.$alerts),n},_setAutoCloseTimer:function(e,t,n){e.timerId&&clearTimeout(e.timerId),e.timerId=setTimeout(_.bind(function(){_.isFunction(t)&&t(e.key),this.dismiss(e.key)},this),n||SUGAR.App.config.alertAutoCloseDelay||5e3)},dismiss:function(e,t){this.preventAnyAlert=!1;var n=o[e];n&&(n.timerId&&clearTimeout(n.timerId),n.dispose(),delete o[e])},dismissAll:function(e,t){_.each(o,function(n,r){e&&n.level!=e||this.dismiss(r,t)},this)},get:function(e){return o[e]},getAll:function(){return o}};e.exports=s},function(e,t,n){"use strict";var r=n(7),i=n(0),a=n(10),o=n(11),s=n(23),l={},u={},c=function(e,t){var n=SUGAR.App.metadata.getModule(e),r=n.fields[t]&&n.fields[t].relationship;return r||!1},h=_.extend({beanModel:a,beanCollection:o,mixedBeanCollection:s,init:function(){var e=_.bind(this.sync,this);this.beanModel.prototype.sync=e,this.beanCollection.prototype.sync=e,SUGAR.App.events.register("data:sync:start",this),SUGAR.App.events.register("data:sync:complete",this),SUGAR.App.events.register("data:sync:success",this),SUGAR.App.events.register("data:sync:error",this),SUGAR.App.events.register("data:sync:abort",this)},reset:function(e){this.resetModel(e),this.resetCollection(e)},resetModel:function(e){e?delete l[e]:l={}},resetCollection:function(e){e?delete u[e]:u={}},declareModel:function(e,t,n,r,i){n=n||SUGAR.App.config.platform||"base",this.declareModelClass(e,t,n,r),this.declareCollectionClass(e,n,i)},declareModelClass:function(e,t,n,r){var a=i.capitalize(n);e=e||a+"Model",this.resetModel(e);var o=t?t.fields:{},s=null;_.each(_.values(o),function(e){_.isUndefined(e.default)||(null===s&&(s={}),s[e.name]=e.default)});var u={_defaults:s,module:e,fields:o},c=l[a+"Model"]||l.BaseModel||this.beanModel;return r=_.extend(r||{},u),i.extendClass(l,c,e,r,a)},declareCollectionClass:function(e,t,n){var r=i.capitalize(t),a=l[e||r+"Model"];if(e=e||r+"Collection",a){this.resetCollection(e);var o={model:a,module:e,offset:0},s=u[r+"Collection"]||u.BaseCollection||this.beanCollection;return n=_.extend(n||{},o),i.extendClass(u,s,e,n,r)}},mergeModel:function(e,t){var n=t?t.fields:{},r=null;_.each(_.values(n),function(e){_.isUndefined(e.default)||(null===r&&(r={}),r[e.name]=e.default)});var i={_defaults:r,module:e,fields:n};_.extend(l[e].prototype,i)},getModelClasses:function(){return l},getCollectionClasses:function(){return u},declareModels:function(e){e=e||SUGAR.App.metadata.getModules(),_.each(e,function(e,t){l[t]?this.mergeModel(t,e):this.declareModel(t,e)},this)},getBeanClass:function(e){return l[e]||this.beanModel},createBean:function(e,t,n){return l[e]?new l[e](t,n):new h.beanModel(t,n)},createBeanCollection:function(e,t,n){return u[e]?new u[e](t,n):new h.beanCollection(t,n)},createRelatedBean:function(e,t,n,r){var i=this.getRelatedModule(e.module,n);return r=r||{},_.isString(t)?(r.id=t,t=this.createBean(i,r)):_.isNull(t)?t=this.createBean(i,r):t.set(r),t.link={name:n,bean:e,isNew:!0},t.setOption("relate",!0),t},createRelatedCollection:function(e,t,n){var r=this.getRelatedModule(e.module,t),i=this.createBeanCollection(r,n,{link:{name:t,bean:e}});return i.setOption("relate",!0),e._setRelatedCollection(t,i),i},createMixedBeanCollection:function(e,t){return new h.mixedBeanCollection(e,t)},canHaveMany:function(e,t){var n=SUGAR.App.metadata.getModule(e);if(!n||!n.fields||!n.fields[t])return!1;if(n.fields[t].link_type)return"many"===n.fields[t].link_type;var r=n.fields[t].relationship,i=SUGAR.App.metadata.getRelationship(r),a=i.relationship_type.split("-");return"many"===(n.fields[t].side?"left"===n.fields[t].side?a[0]:a[2]:i.lhs_module!==i.rhs_module?e===i.rhs_module?a[0]:a[2]:"many"===a[0]||"many"===a[2]?"many":"one")},getRelateFields:function(e,t){var n=SUGAR.App.metadata.getModule(e);if(!n.fields[t])return SUGAR.App.logger.error("Calling 'getRelateFields' on '"+e+"' with link '"+t+"' but no fields have been found. Please fix your metadata."),[];var r=n.fields[t].relationship,i=this.getRelatedModule(e,t),a=SUGAR.App.metadata.getModule(i).fields,o=_.find(a,function(e){return"link"==e.type&&e.relationship==r});return o&&(o=_.filter(a,function(e){return"relate"==e.type&&e.link==o.name})),o||[]},getRelationshipFields:function(e,t){SUGAR.App.logger.warn("DataManager#getRelationshipFields is deprecated since 7.10. It will be removed in a future release. Please use DataManager#getRelationFields instead");var n=null,r=SUGAR.App.metadata.getModule(e).fields[t];if(r.rel_fields){var i=r.relationship,a=this.getRelatedModule(e,t),o=SUGAR.App.metadata.getModule(a).fields,s=_.find(o,function(e){return"link"==e.type&&e.relationship==i});if(s&&(s=_.find(o,function(e){return e.link==s.name&&"relationship_info"==e.link_type})),s&&s.relationship_fields){var l=_.keys(r.rel_fields);_.each(s.relationship_fields,function(e,t){_.include(l,t)&&(n||(n=[]),n.push(e))})}}return n},getRelationFields:function(e,t){var n=SUGAR.App.metadata.getModule(e)&&SUGAR.App.metadata.getModule(e).fields;if(!n)return!1;var r=_.filter(n,function(e){return e.link===t&&!_.isUndefined(e.rname_link)});return!!r&&_.pluck(r,"name")},getOppositeLink:function(e,t){var n=c(e,t),r=this.getRelatedModule(e,t),i=SUGAR.App.metadata.getModule(r);if(!i||!i.fields)return!1;var a=_.findWhere(i.fields,{type:"link",relationship:n});return!!a&&a.name},getRelatedModule:function(e,t){var n=SUGAR.App.metadata.getModule(e);if(!n||!n.fields||!n.fields[t])return!1;var r=SUGAR.App.metadata.getRelationship(c(e,t));return r?n.fields[t].module||(e===r.rhs_module?r.lhs_module:r.rhs_module):n.fields[t].module||!1},getRelatedNameField:function(e,t){return _.find(SUGAR.App.metadata.getModule(e).fields,function(e){if(e.name!==t&&e.id_name===t)return e},this)},getEditableFields:function(e,t){var n=["id"],i=["parent","relate"];return(t=t||[]).length||(t=_.keys(e.attributes)),_.each(t,function(t){var a;!e.has(t)||!e.fields[t]||e.fields[t].source&&"non-db"===e.fields[t].source&&e.fields[t].type&&-1!==i.indexOf(e.fields[t].type)||!r.hasAccessToModel("edit",e,t)||((a=e.get(t))&&"collection"===e.fields[t].type&&!_.isEmpty(a.links)?_.each(a.links,function(e){n.push(e.link.name)}):n.push(t))}),e.toJSON({fields:n})},sync:function(e,t,n){SUGAR.App.logger.trace("data-sync-"+(n.relate?"relate-":"")+e+": "+t),n=this.parseOptionsForSync(e,t,n);var r=this.getSyncCallbacks(e,t,n),i=null;if(t.dataFetched=!1,this.trigger("data:sync:start",e,t,n),t.trigger("data:sync:start",e,n),_.isFunction(n.endpoint))i=n.endpoint(e,t,n,r);else if(t.link&&t.link.bean&&!0===n.relate){var a=null;if("create"!=e&&"update"!=e||(a=this.getEditableFields(t,n.fields),"update"==e&&t.link.isNew&&(e="create")),!t.link.bean.id)return SUGAR.App.logger.error("Attempted to load linked context with no id on the linked bean: "+t.link.bean),!1;i=SUGAR.App.api.relationships(e,t.link.bean.module,{id:t.link.bean.id,link:t.link.name,relatedId:t.id,related:a},n.params,r,n.apiOptions)}else n.favorite?i=SUGAR.App.api.favorite(t.module,t.id,t.isFavorite(),r,n.apiOptions):n.following?i=SUGAR.App.api.follow(t.module,t.id,t.get("following"),r,n.apiOptions):n.collectionField?i=SUGAR.App.api.collection(n.module,{id:n.beanId,field:n.collectionField},n.params,r,n.apiOptions):n.query||t instanceof s?i=SUGAR.App.api.search(n.params,r,n.apiOptions):t.module?i=SUGAR.App.api.records(e,t.module,"update"==e||"create"==e?this.getEditableFields(t,n.fields):t.attributes,n.params,r,n.apiOptions):SUGAR.App.logger.error("Unable to sync model with no module");return i},parseOptionsForSync:function(e,t,n){if((n=n||{}).params=_.extend({},n.params),n.filterDef=n.filter||t.filterDef,n.method=e,n.view&&_.isString(n.view)&&"read"==e&&(n.params.view=n.view),n.fields&&"read"==e&&(n.params.fields=n.fields.join(",")),!0===n.viewed&&(n.params.viewed="1"),"read"==e&&t instanceof o){if(n.offset&&0!==n.offset&&(n.params.offset=n.offset),(n.limit||SUGAR.App.config&&SUGAR.App.config.maxQueryResult)&&(n.params.max_num=n.limit||SUGAR.App.config.maxQueryResult),t.orderBy&&t.orderBy.field&&(n.params.order_by=t.orderBy.field+":"+t.orderBy.direction),!0===n.myItems&&(n.params.my_items="1"),!0===n.favorites&&(n.params.favorites="1"),!_.isEmpty(n.filterDef)){var r=i.deepCopy(n.filterDef);_.has(r,"filter")&&(r=r.filter),_.isArray(r)||(r=[r]),n.params.filter=r}_.isEmpty(n.query)||(n.params.q=n.query,_.isEmpty(n.module_list)&&t.module&&(n.module_list=[t.module])),n.module_list&&(n.params.module_list=n.module_list.join(","))}return"update"===e&&n.lastModified&&(n.apiOptions=n.apiOptions||{},n.apiOptions.headers=n.apiOptions.headers||{},n.apiOptions.headers["X-TIMESTAMP"]=n.lastModified),n},getSyncCallbacks:function(e,t,n){return{success:this.getSyncSuccessCallback(e,t,n),error:this.getSyncErrorCallback(e,t,n),complete:this.getSyncCompleteCallback(e,t,n),abort:this.getSyncAbortCallback(e,t,n)}},getSyncSuccessCallback:function(e,t,n){var r=this;return function(i,a){if(t.inSync=!0,t.original_assigned_user_id=t.get("assigned_user_id"),"read"==e&&t instanceof o){var l=n.offset||0;i=i||{},_.isNumber(i.next_offset)&&(t.offset=-1!=i.next_offset?i.next_offset:l+(i.records||[]).length,t.next_offset=i.next_offset,t.page=t.getPageNumber(n)),n.update||(t.total=_.isNumber(i.total)?i.total:null),t instanceof s&&(t.xmod_aggs=i.xmod_aggs||null,t.tags=i.tags||null,_.isObject(i.next_offset)&&(t.offset=i.next_offset,t.next_offset=i.next_offset)),i=i.records||[],r._updateCollectionProperties(t,n)}if(!0===n.relate&&(t.link.isNew=!1,"read"!=e)){if(t.link.bean){var u=t.link.bean.getSynced(),c=_.reduce(i.record,function(e,t,n){return _.isEqual(u[n],t)||(e[n]=t),e},{});t.link.bean.set(c),t.link.bean.setSyncedAttributes(i.record)}i=i.related_record,"delete"==e&&(t.set(i),delete t.link)}t.dataFetched=!0,n.success&&n.success(i),r.trigger("data:sync:success",e,t,n,a),t.inSync=null}},getSyncErrorCallback:function(e,t,n){return _.bind(function(r){if(r.request&&r.request.aborted)return this.getSyncAbortCallback(e,t,n)(r.request);SUGAR.App.error.handleHttpError(r,t,n),this.trigger("data:sync:error",e,t,n,r),t.trigger("data:sync:error",e,n,r),_.isFunction(n.error)&&n.error(r)},this)},getSyncCompleteCallback:function(e,t,n){return _.bind(function(r){this.trigger("data:sync:complete",e,t,n,r),t.trigger("data:sync:complete",e,n,r),_.isFunction(n.complete)&&n.complete(r),n.previousModels=null,n={}},this)},getSyncAbortCallback:function(e,t,n){return _.bind(function(r){this.trigger("data:sync:abort",e,t,n,r),t.trigger("data:sync:abort",e,n,r)},this)},_updateCollectionProperties:function(e,t){t=t||{},e.myItems=t.myItems,e.favorites=t.favorites,e.query=t.query,e.modelList=t.modelList,e.filterDef=t.filterDef}},Backbone.Events);e.exports=h},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=/\s+/,a=function(e,t,n,a){if(!n)return!0;if("object"===(void 0===n?"undefined":r(n))){for(var o in n)e[t].apply(e,[o,n[o]].concat(a));return!1}if(i.test(n)){for(var s=n.split(i),l=0,u=s.length;l<u;l++)e[t].apply(e,[s[l]].concat(a));return!1}return!0},o=function(e,t){var n=!1,r=-1,i=e.length,a=void 0;switch(t.length){case 0:case 1:case 2:case 3:for(;++r<i;)n=!1===(a=e[r]).callback.call(a.ctx,t[0],t[1],t[2])||n;break;default:for(;++r<i;)n=!1===(a=e[r]).callback.apply(a.ctx,t)||n}return!n};e.exports={before:function(e,t,n){return a(this,"before",e,[t,n])&&t?(this._before=this._before||{},(this._before[e]||(this._before[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},triggerBefore:function(e){var t=!1;if(!this._before)return!t;var n=Array.prototype.slice.call(arguments,1);if(i.test(e)){for(var r=e.split(i),a=0,s=r.length;a<s;a++)t=!this.triggerBefore.apply(this,[r[a]].concat(n))||t;return!t}var l=this._before[e],u=this._before.all;return l&&(t=!1===o(l,n)),u&&(t=!1===o(u,n)||t),!t},offBefore:function(e,t,n){var r,i=void 0,o=void 0,s=void 0;if(!this._before||!a(this,"offBefore",e,[t,n]))return this;if(!e&&!t&&!n)return this._before=void 0,this;for(var l=0,u=(r=e?[e]:_.keys(this._before)).length;l<u;l++)if(e=r[l],s=this._before[e]){if(this._before[e]=i=[],t||n)for(var c=0,h=s.length;c<h;c++)o=s[c],(t&&t!==o.callback||n&&n!==o.ctx)&&i.push(o);i.length||delete this._before[e]}return this}}},function(e,t,n){"use strict";var r=n(7),i=n(9),a=n(8),o=n(2),s=n(4),l=i.extend({initialize:function(e){a.attach(this,"view"),i.prototype.initialize.call(this,e),this.type=e.type,this.name=e.name||this.type,this.action=e.meta&&e.meta.action?e.meta.action:this.name,this._loadTemplate(e),this.fields={},this.nestedFields={},this.fallbackFieldTemplate=this.fallbackFieldTemplate||"detail",this.layout=this.options.layout,this.primary=e.primary,this._setLabels(),this.dataView?this.context.set("dataView",this.dataView):this.context.addFields(this.getFieldNames()),SUGAR.App.events.on("app:locale:change",function(){this._setLabels()},this)},_getTemplate:function(e,t){return s.getView(e,this.module)||s.getView(e,t)},_loadTemplate:function(e){var t,n;(e=e||{}).template?(t=e.template,n=null):this.meta&&this.meta.template?(t=this._getTemplate(this.meta.template,e.loadModule),n=this.meta.template):(t=this._getTemplate(this.name,e.loadModule),n=this.name),t||(this.meta&&this.meta.type?(t=this._getTemplate(this.meta.type,e.loadModule),n=this.meta.type):(t=s.empty,n="")),this.tplName=n,this.template=t},_renderHtml:function(e,t){if(this.template)try{this.$el.html(this.template(e||this,t||this.options.templateOptions))}catch(e){SUGAR.App.logger.error("Failed to render "+this+"\n"+e),SUGAR.App.error.handleRenderError(this,"_renderHtml")}},_renderFields:function(){var e=this,t={};this.$("span[sfuuid]").each(function(){var e=$(this),n=e.attr("sfuuid");t[n]=e}),_.each(this.fields,function(n){e._renderField(n,t[n.sfId])})},_renderField:function(e,t){e.setElement(t||this.$("span[sfuuid='"+e.sfId+"']"));try{e.render()}catch(t){SUGAR.App.logger.error("Failed to render "+e+" on "+this+"\n"+t),SUGAR.App.error.handleRenderError(this,"_renderField",e)}},_render:function(){return r.hasAccessToModel(this.action,this.model)?(this._disposeFields(),this._renderHtml(),this._renderFields()):(SUGAR.App.logger.info("Current user does not have access to this module view. name: "+this.name+" module: "+this.module),this.primary&&SUGAR.App.error.handleRenderError(this,"view_render_denied")),this},_setLabels:function(){this.modulePlural=o.getAppListStrings("moduleList")[this.module]||this.module,this.moduleSingular=o.getAppListStrings("moduleListSingular")[this.module]||this.modulePlural},loadData:function(e){r.hasAccess("read",this.module)&&this.context.loadData(e)},getFieldNames:function(e){var t=[];e=e||this.context.get("module"),this.meta&&this.meta.panels&&(t=_.reduce(_.map(this.meta.panels,function(e){var t=_.flatten(_.compact(_.pluck(e.fields,"fields")));return _.pluck(e.fields,"name").concat(_.pluck(t,"name")).concat(_.flatten(_.compact(_.pluck(e.fields,"related_fields"))))}),function(e,t){return e.concat(t)},[])),t=_.compact(_.uniq(t));var n=SUGAR.App.metadata.getModule(e,"fields");if(n){t=_.reject(t,function(e){return _.isUndefined(n[e])});var r=[];_.each(t,function(e){"relate"==n[e].type?r.push(n[e].id_name):"parent"==n[e].type&&(r.push(n[e].id_name),r.push(n[e].type_name)),_.isArray(n[e].fields)&&(r=r.concat(n[e].fields))}),t=_.union(t,r)}return t},getFields:function(e,t){var n={},r=this.getFieldNames(e);return _.each(r,function(e){var r=this.getField(e,t);r&&(n[e]=r.def)},this),n},getField:function(e,t){return _.find(_.extend({},this.fields,this.nestedFields),function(n){return n.name==e&&(!t||n.model==t)})},closestComponent:function(e){if(this.layout)return this.layout.name===e?this.layout:this.layout.closestComponent(e)},_show:function(){i.prototype._show.call(this),_.each(_.extend({},this.fields,this.nestedFields),function(e){e.updateVisibleState(!0)})},_hide:function(){i.prototype._hide.call(this),_.each(_.extend({},this.fields,this.nestedFields),function(e){e.updateVisibleState(!0)})},_dispose:function(){a.detach(this,"view"),this._disposeFields(),i.prototype._dispose.call(this)},_disposeFields:function(){_.each(this.fields,function(e){e.dispose()}),this.fields={},this.nestedFields={}},toString:function(){return"view-"+this.name+"-"+i.prototype.toString.call(this)},getFieldMeta:function(e,t){var n=_.flatten(_.pluck(this.meta.panels,"fields")),r=_.find(n,function(t){return t.name===e});return!r&&t&&(r=_.find(_.flatten(_.pluck(n,"fields")),function(t){return t&&t.name===e}))&&(r._isChild=!0),r},setFieldMeta:function(e,t){_.each(this.meta.panels,function(n){_.each(n.fields,function(r,i){r.name===e?n.fields[i]=_.extend(r,t):_.isArray(r.fields)&&_.each(r.fields,function(n,i){n.name===e&&(r.fields[i]=_.extend(n,t))})})})}});e.exports=l},function(e,t,n){"use strict";var r=n(9),i=n(8),a=n(4),o=n(6),s=r.extend({initialize:function(e){i.attach(this,"layout"),r.prototype.initialize.call(this,e),this._components=[],this.meta=this.meta||{},this.type=this.meta.type||this.options.type,this.name=this.meta.name||this.options.name||this.type||"",this.meta.label?this.label=this.meta.label:this.options.def&&this.options.def.label?this.label=this.options.def.label:this.options.label?this.label=this.options.label:this.label="",this.layout=this.options.layout,this._loadTemplate(e),this.template&&(this.$el.append(this.template(this,e)),this.placeComponentsFromTemplate()),this.meta.lazy_loaded&&(this._componentsMeta=this.meta.components,this.meta.components=[]),SUGAR.App.events.on("app:locale:change",function(){this.render()},this)},_loadTemplate:function(e){if(e=e||{},this.meta.template)this.template=a.getLayout(this.meta.template,this.module)||a.getLayout(this.meta.template,e.loadModule);else{var t=a.getLayout(this.name,this.module)||a.getLayout(this.type,this.module);t||(t=e.loadModule?a.getLayout(this.name,e.loadModule)||a.getLayout(this.type,e.loadModule):a.getLayout(this.name)||a.getLayout(this.type)),this.template=t}},placeComponentsFromTemplate:function(){var e={};_.isEmpty(this._components)||(this.$("span[cid]").each(function(){var t=$(this),n=t.attr("cid");e[n]=t}),_.each(this._components,function(t){var n=e[t.cid];n&&n.replaceWith(t.el)},this))},initComponents:function(e,t,n){var r,i;if(!this.disposed)return e=e||this.meta.components,i=this._components.length,this._addComponentsFromDef(e,t,n),r=this._components.slice(i),_.each(r,function(e){_.isFunction(e.initComponents)&&e.initComponents()}),this.trigger("init"),r},createComponentFromDef:function(e,t,n){if(t=t||this.context,n=n||this.module,e.context&&(e.context instanceof SUGAR.App.Context?t=e.context:(t=t.getChildContext(e.context)).prepare(),n=t.get("module")),e.view){if(_.isString(e.view))return o.createView({context:t,name:e.view,def:e,module:n,loadModule:e.loadModule,primary:e.primary,layout:this});if(_.isObject(e.view))return o.createView({context:t,module:n,loadModule:e.loadModule,meta:e.view,type:e.view.type,name:e.view.name,primary:e.view.primary,layout:this})}else if(e.layout){if(_.isString(e.layout))return o.createLayout({context:t,name:e.layout,def:e,module:n,loadModule:e.loadModule,layout:this});if(_.isObject(e.layout))return o.createLayout({context:t,module:n,loadModule:e.loadModule,meta:e.layout,type:e.layout.type,name:e.layout.name,def:e,layout:this})}else SUGAR.App.logger.warn("Invalid layout definition:\n"+e.layout)},_addComponentsFromDef:function(e,t,n){e=e||[],_.each(e,function(e){e.initializedInTemplate?delete e.initializedInTemplate:(e.view||e.layout)&&this.addComponent(this.createComponentFromDef(e,t,n),e)},this)},addComponent:function(e,t){e.layout||(e.layout=this),this._components.push(e),this._placeComponent(e,t)},_placeComponent:function(e){this.$el.append(e.el)},removeComponent:function(e){var t=_.isNumber(e)?e:this._components.indexOf(e);t>-1&&(this._components.splice(t,1)[0].layout=null)},getComponent:function(e){return _.find(this._components,function(t){return t.name===e})},_render:function(){return this._components&&this._components.length>0?_.each(this._components,function(e){e.render()},this):SUGAR.App.logger.info("Can't render anything because the layout has no components: "+this.toString()+"\nEither supply metadata or override Layout.render method"),this},loadData:function(e){this.disposed||(this.context.loadData(e),_.each(this._components,function(t){t.loadData(e)},this))},getFieldNames:function(e){var t=[];return e=e||this.module,_.each(this._components,function(n){n.module==e&&(t=_.union(t,n.getFieldNames(null,!0)))},this),t},getFields:function(e){var t={};return _.each(this._components,function(n){_.extend(t,n.getFields(e))}),t},closestComponent:function(e){if(this.layout)return this.layout.name===e?this.layout:this.layout.closestComponent(e)},_show:function(){r.prototype._show.call(this),_.each(this._components,function(e){e.updateVisibleState(!0)})},_hide:function(){r.prototype._hide.call(this),_.each(this._components,function(e){e.updateVisibleState(!0)})},_dispose:function(){i.detach(this,"layout"),this._disposeComponents(),r.prototype._dispose.call(this)},_disposeComponents:function(){_.each(this._components,function(e){e.dispose()}),this._components=[]},toString:function(){return"layout-"+(this.options.type||this.options.name)+"-"+r.prototype.toString.call(this)}});e.exports=s},function(e,t,n){"use strict";var r=n(7),i=n(9),a=n(8),o=n(2),s=n(4),l=i.extend({fieldTag:"input",initialize:function(e){a.attach(this,"field"),i.prototype.initialize.call(this,e),this.sfId=e.sfId,this.view=e.view,this.viewDefs=e.viewDefs||{},this.name=this.viewDefs.name||e.def&&e.def.name;var t=this.model&&this.model.fields?this.model.fields[this.name]:null;this.fieldDefs=_.extend({},t,this.viewDefs.defs),this.def=_.extend({},t,e.def),this.type=this.viewDefs.type||this.def.type||this.fieldDefs.type;var n=this.def.label||this.def.vname||this.name;this.label=o.get(this.viewDefs.label||n,this.module),this.template=s.empty,this.model&&(this.model.on("error:validation:"+this.name,this.handleValidationError,this),this.model.on("validation:start attributes:revert",this.removeValidationErrors,this),this.model.on("acl:change:"+this.name,this.handleAclChange,this))},viewFallbackMap:{edit:"detail"},handleAclChange:function(){this._resetAction(),this.render()},_resetAction:function(){this.action=void 0},_checkAccessToAction:function(e){return r.hasAccessToModel(e,this.model,this.name)},_getFallbackTemplate:function(e){return this.isDisabled()&&"disabled"===e?"edit":this.view.fallbackFieldTemplate||"detail"},_loadTemplate:function(){var e,t=this.options.viewName||this.options.def.view||(this.view.meta&&this.view.meta.type?this.view.meta.type:this.view.name),n=this.action;for(this.isDisabled()&&"edit"===t?t=this.action:n=this.action||(this.view.action&&this.view.name!=this.view.action?this.view.action:t);t&&!this._checkAccessToAction(n);)n=t=this.viewFallbackMap[t];if(t){var r=this.module||this.context.get("module");e=this._getFallbackTemplate(t),this.template=s.getField(this.type,t,r,e)||s.getField("base",t,r,e)||s.empty}else this.template=s.empty;this.tplName=t,this.action=n},delegateEvents:function(e){(e=e||_.result(this,"events")||(this.def?this.def.events:null))&&(e=_.clone(e),_.each(e,function(t,n){var r=this[t];!r&&_.isString(t)&&(r=_.bind(function(e){_.isFunction(this.triggerMetadataEvent)&&this.triggerMetadataEvent(e,t)},this),this["callback_"+n]=r,e[n]="callback_"+n),_.isFunction(t)||r||delete e[n]},this),Backbone.View.prototype.delegateEvents.call(this,e))},_render:function(){return this._loadTemplate(),this.model instanceof Backbone.Model&&(this.value=this.getFormattedValue()),this.dir=_.result(this,"direction"),o.direction===this.dir&&delete this.dir,this.unbindDom(),this.$el.html(this.template(this)||""),this.def&&this.def.css_class&&this.getFieldElement().addClass(this.def.css_class),this.$(this.fieldTag).attr("dir",this.dir),this.bindDomChange(),this},getFieldElement:function(){return this.$el},bindDomChange:function(){if(this.model instanceof Backbone.Model){var e=this,t=this.$el.find(this.fieldTag);t.on("change",function(){e.model.set(e.name,e.unformat(t.val()))})}},bindDataChange:function(){this.model&&this.model.on("change:"+this.name,function(e,t){"edit"===this.action?this.$(this.fieldTag).val(this.format(t)):this.render()},this)},hasChanged:function(){return!_.isEqual(this.format(this.model.getSynced(this.name)),this.format(this.model.get(this.name)))},format:function(e){return e},unformat:function(e){return e},getFormattedValue:function(){return this.format(this.model.has(this.name)?this.model.get(this.name):null)},handleValidationError:function(e){},removeValidationErrors:function(){},getPlaceholder:function(){return new Handlebars.SafeString('<span sfuuid="'+this.sfId+'"></span>')},setDisabled:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;(e=!!_.isUndefined(e)||e)&&!1===this.isDisabled()?(this._previousAction=this.action,this.action="disabled",this.render(),n=!0):!1===e&&this.isDisabled()&&(this.action=this._previousAction,delete this._previousAction,this.render(),n=!0),n&&t.trigger&&this.context.trigger("field:disabled",this.name,e,this)},isDisabled:function(){return"disabled"===this.action},setViewName:function(e){this.options.viewName=e},setMode:function(e){this.isDisabled()?this._previousAction=e:this.action=e,this.setViewName(e),this.render()},unbindDom:function(){this.$el.find(this.fieldTag).off()},_dispose:function(){a.detach(this,"field"),this.unbindDom(),i.prototype._dispose.call(this)},toString:function(){return"field-"+this.name+"-"+this.sfId+"-"+i.prototype.toString.call(this)},_show:function(){this.getFieldElement().removeClass("hide").show(),this.updateVisibleState(!0)},_hide:function(){this.getFieldElement().addClass("hide").hide(),this.updateVisibleState(!1)},equals:function(e){return this.type===e.type&&_.isEqual(this.getFormattedValue(),e.getFormattedValue())},closestComponent:function(e){if(this.view)return this.view.name===e?this.view:this.view.closestComponent(e)}});e.exports=l},function(e,t,n){"use strict";var r=n(1);e.exports={_math:function(e,t,n,r,i){var a;if(r=_.isFinite(r)&&r>=0?parseInt(r):6,Big.E_NEG=-1*(r+1),i=i||!1,!_.isFinite(t))return t;try{switch(e){case"round":a=Big(t).round(r);break;case"add":a=Big(t).plus(n);break;case"sub":a=Big(t).minus(n);break;case"mul":a=Big(t).times(n).round(r);break;case"div":a=Big(t).div(n).round(r);break;default:return t}}catch(e){if("BigError"==e.name)return t}return i&&!_.isString(a)?a.toFixed(r):_.isString(a)?a:a.toString()},round:function(e,t,n){return this._math("round",e,null,t,n)},add:function(e,t,n,r){return this._math("add",e,t,n,r)},sub:function(e,t,n,r){return this._math("sub",e,t,n,r)},mul:function(e,t,n,r){return this._math("mul",e,t,n,r)},div:function(e,t,n,r){return this._math("div",e,t,n,r)},isDifferentWithPrecision:function(e,t,n){var i=SUGAR.App.metadata.getConfig(),a=n||r.getPreference("decimal_precision");n=_.isFinite(a)?a:i.defaultCurrencySignificantDigits||2;var o=this._math("round",this.getDifference(e,t,!0),null,n),s=0===n?"0":this._math("div",.1,Math.pow(10,n-1));return"0"!==o&&parseFloat(o)>=parseFloat(s)},getDifference:function(e,t,n){var r=this._math("sub",e,t);return(n=!_.isUndefined(n)&&n)?Math.abs(r):r}}},function(e,t,n){"use strict";var r=n(19),i=n(1),a=n(0);e.exports={getBaseCurrencyId:function(){return SUGAR.App.metadata.getBaseCurrencyId()},getBaseCurrency:function(){var e=SUGAR.App.metadata.getBaseCurrencyId(),t=SUGAR.App.metadata.getCurrency(e);return t.currency_id=e,t},getCurrenciesSelector:function(e){var t={};return _.each(SUGAR.App.metadata.getCurrencies(),function(n,r){t[r]=e(n)}),t},getCurrencySymbol:function(e){var t=SUGAR.App.metadata.getCurrency(e);return t?t.symbol:""},formatAmount:function(e,t,n,r,i,o){if(!_.isFinite(e))return e;var s=SUGAR.App.metadata.getConfig();return t=t||this.getBaseCurrencyId(),o=o||"",_.isFinite(n)||(n=_.isFinite(s.defaultCurrencySignificantDigits)?s.defaultCurrencySignificantDigits:2),i=i||s.defaultDecimalSeparator||".",r=_.isUndefined(r)?s.defaultNumberGroupingSeparator||",":r,(this.getCurrencySymbol(t)||this.getCurrencySymbol(this.getBaseCurrencyId()))+o+(e=a.formatNumber(e,n,n,r,i))},formatAmountLocale:function(e,t,n){var r=i.getPreference("decimal_separator"),a=i.getPreference("number_grouping_separator"),o=i.getPreference("decimal_precision");return n=_.isFinite(n)?n:o,this.formatAmount(e,t,n,a,r)},unformatAmount:function(e,t,n,r){return r=r||!1,e=e.toString().replace(/^[^\d\.\,-]+/,""),a.unformatNumberString(e,t,n,r)},unformatAmountLocale:function(e,t){var n,r,a=SUGAR.App.metadata.getConfig();return n=i.getPreference("decimal_separator")||a.defaultDecimalSeparator||".",r=i.getPreference("number_grouping_separator")||a.defaultNumberGroupingSeparator||",",this.unformatAmount(e,r,n,t)},convertAmount:function(e,t,n){var i,a;return t==n?r.round(e,void 0,!0):(i=SUGAR.App.metadata.getCurrency(t),a=SUGAR.App.metadata.getCurrency(n),this.convertWithRate(e,i.conversion_rate,a.conversion_rate))},convertToBase:function(e,t){return this.convertAmount(e,t,this.getBaseCurrencyId())},convertFromBase:function(e,t){return this.convertAmount(e,this.getBaseCurrencyId(),t)},convertWithRate:function(e,t,n){return t=t||1,n=n||1,r.mul(r.div(e,t,void 0,!0),n,void 0,!0)}}},function(e,t,n){"use strict";var r=n(13),i=n(0),a=n(2);function o(e,t,n){t?t.apply(l,_.union([e],n||[])):l.handleStatusCodesFallback(e)}function s(e,t){var n="handle"+i.classify(e.code)+"Error";(l[n]||t||l.handleStatusCodesFallback).call(l,e)}var l={init:function(){this.enableOnError(),Object.defineProperty(this,"remoteLogging",{get:function(){return SUGAR.App.logger.warn("`Core.Error#remoteLogging` property has been deprecated since 7.10."),!1},configurable:!0})},initialize:function(e){SUGAR.App.logger.warn("The function `Core.Error#initialize` is deprecated in 7.10. Please do not use it. The function initializing the component is `Core.Error#init`"),e=e||{},this.statusCodes=e.statusCodes?_.extend(this.statusCodes,e.statusCodes):this.statusCodes,e.disableOnError||this.enableOnError()},statusCodes:{0:function(e,t,n){"timeout"===e.textStatus?o(e,this.handleTimeoutError):this.handleStatusCodesFallback(e,t,n)},400:function(e){s(e,this.handleUnspecified400Error)},401:function(e){s(e,this.handleUnauthorizedError)},403:function(e){o(e,this.handleForbiddenError)},404:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){o(e,this.handleNotFoundError,_.rest(arguments))}),405:function(e){o(e,this.handleMethodNotAllowedError)},409:function(e){o(e,this.handleMethodConflictError)},412:function(e){o(e,this.handleHeaderPreconditionFailed)},422:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){e.model=t,o(e,this.handleValidationError,_.rest(arguments))}),424:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){e.model=t,o(e,this.handleMethodFailureError,_.rest(arguments))}),500:function(e){o(e,this.handleServerError)},502:function(e){o(e,this.handleServerError)},503:function(e){o(e,this.handleServerError)}},errorName2Keys:{maxValue:"ERROR_MAXVALUE",minValue:"ERROR_MINVALUE",maxLength:"ERROR_MAX_FIELD_LENGTH",minLength:"ERROR_MIN_FIELD_LENGTH",datetime:"ERROR_DATETIME",required:"ERROR_FIELD_REQUIRED",email:"ERROR_EMAIL",primaryEmail:"ERROR_PRIMARY_EMAIL",duplicateEmail:"ERROR_DUPLICATE_EMAIL",number:"ERROR_NUMBER",isBefore:"ERROR_IS_BEFORE",isAfter:"ERROR_IS_AFTER",greaterThan:"ERROR_IS_GREATER_THAN",lessThan:"ERROR_IS_LESS_THAN"},getErrorString:function(e,t){var n=t.module||"";return a.get(this.errorName2Keys[e]||e,n,t)},handleValidationError:function(e){var t=e.responseText;r.dismissAll(),_.each(t,function(e,t){var n="";_.isObject(e)?_.each(e,function(e,t){n+="(Message) "+this.getErrorString(t,e)+"\n"},this):n=e,SUGAR.App.logger.debug("validation failed for field `"+t+"`:\n"+n)},this)},handleHttpError:function(e,t,n){l.statusCodes[e.status]?l.statusCodes[e.status].call(l,e,t,n):l.handleStatusCodesFallback(e)},handleUnhandledError:function(e,t,n){SUGAR.App.logger.fatal(e+" at "+t+" on line "+n)},handleStatusCodesFallback:function(e){SUGAR.App.logger.error(e.toString())},handleRenderError:function(e,t,n){var o,s,l="render_error_"+e.module+"_"+e.name,u="error";switch(t){case"_renderHtml":o=a.get("ERR_RENDER_FAILED_TITLE"),s=[a.get("ERR_RENDER_FAILED_MSG"),a.get("ERR_CONTACT_TECH_SUPPORT")];break;case"_renderField":o=a.get("ERR_RENDER_FIELD_FAILED_TITLE"),s=[i.formatString(a.get("ERR_RENDER_FIELD_FAILED_MSG"),[n.name]),a.get("ERR_CONTACT_TECH_SUPPORT")];break;case"view_render_denied":o=a.get("ERR_NO_VIEW_ACCESS_TITLE"),u="warning";var c=a.getModuleName(e.module,{plural:!0});s=[i.formatString(a.get("ERR_NO_VIEW_ACCESS_MSG"),[c])];break;case"layout_render":o=a.get("ERR_LAYOUT_RENDER_TITLE"),s=[a.get("ERR_LAYOUT_RENDER_MSG")];break;default:o=a.get("ERR_GENERIC_TITLE"),s=[a.get("ERR_INTERNAL_ERR_MSG"),a.get("ERR_CONTACT_TECH_SUPPORT")],SUGAR.App.logger.error("handleRenderError called for render error caught in "+t+", but we have no corresponding handler!")}r.show(l,{level:u,title:o,messages:s})},enableOnError:function(e,t){var n,r=this;return!this.overloaded&&(n=window.onerror,window.onerror=function(i,a,o){e?e.call(t):r.handleUnhandledError(i,a,o),n&&n()},this.overloaded=!0,!0)},throwErrorWithCallStack:function(e,t){if(SUGAR.App.logger.warn("The function `Core.Error#throwErrorWithCallStack` is deprecated in 7.10. Please do not use it."),_.isString(e)&&(e=new Error(e)),e.message=e.message+"; "+e.stack,t)return e;throw e},_callCustomHandler:function(e,t,n){if(SUGAR.App.config.sidecarCompatMode)return SUGAR.App.logger.warn("Core.Error#_callCustomHandler is a private method that you should not access. You will NOT be allowed to access it in the next release. Please update your code to rely on the public API only."),o(e,t,n);SUGAR.App.logger.error("Core.Error#_callCustomHandler is a private method that you are not allowed to access. Please use only the public API.")},_handleFineGrainedError:function(e,t){if(SUGAR.App.config.sidecarCompatMode)return SUGAR.App.logger.warn("Core.Error#_handleFineGrainedError is a private method that you should not access. You will NOT be allowed to access it in the next release. Please update your code to rely on the public API only."),s(e,t);SUGAR.App.logger.error("Core.Error#_handleFineGrainedError is a private method that you are not allowed to access. Please use only the public API.")}};e.exports=l},function(e,t,n){"use strict";var r=n(15),i=n(5),a={beforeRoute:function(e,t){return!!this.triggerBefore("route",{route:e,args:t})&&(_.indexOf(SUGAR.App.config.unsecureRoutes,e)>=0||(SUGAR.App.api.isAuthenticated()?!!SUGAR.App.isSynced||(Backbone.history.stop(),SUGAR.App.sync(),!1):(SUGAR.App.router.login(),!1)))},after:function(e,t){},start:function(){SUGAR.App.augment("router",new SUGAR.App.Router({}),!1),i.trigger("router:start",SUGAR.App.router),SUGAR.App.router.init(),SUGAR.App.router.start()},stop:function(){SUGAR.App.logger.warn("`Core.Routing#stop` method is deprecated since 7.10. Please use `Core.Router#stop` instead."),SUGAR.App.router.stop()}};_.extend(a,r),e.exports=a},function(e,t,n){"use strict";var r=n(10),i=n(11);e.exports=i.extend({initialize:function(e,t){if(this._linkedCollections={},(t=t||{}).links){if(!t.parentBean)return void SUGAR.App.logger.error("You cannot instantiate a mixed-bean-collection with linked collections but without a parent bean.");this._parentBean=t.parentBean,this._collectionField=t.collectionField,_.each(t.links,function(e,t){_.isString(e)?this._linkedCollections[t]=SUGAR.App.data.createBeanCollection(e):this._linkedCollections[t]=e,this.listenTo(this._linkedCollections[t],"add",this._onLinkAdd),this.listenTo(this._linkedCollections[t],"remove",this._onLinkRemove),this.listenTo(this._linkedCollections[t],"reset",this._onLinkReset)},this),delete t.links}i.prototype.initialize.call(this,e,t)},_prepareModel:function(e,t){var n=e instanceof r?e.module:e._module;return this.model=SUGAR.App.data.getBeanClass(n),i.prototype._prepareModel.call(this,e,t)},_onLinkAdd:function(e,t,n){this._updating||i.prototype.set.call(this,e,{merge:!1,add:!0,remove:!1})},_onLinkRemove:function(e,t,n){this._updating||i.prototype.remove.call(this,e)},_onLinkReset:function(e){var t=_.groupBy(this.models,function(e){return e instanceof r?e.get("_link"):e._link}),n=_.findKey(this._linkedCollections,function(t){return t===e}),a={},o={merge:!1,add:!0,remove:!1};this._updating&&(_.extend(a,{silent:!0}),_.extend(o,{silent:!0})),i.prototype.remove.call(this,t[n],a),i.prototype.set.call(this,e.models,o)},set:function(e,t){return e=Backbone.Collection.prototype.set.call(this,e,t),this._parentBean?(this._updating=!0,t=t||{},_.isUndefined(e)||_.isArray(e)||(e=[e]),_.each(e,function(e){var n=e.get("_link");n&&this._linkedCollections[n]&&this._linkedCollections[n].add(e,t)},this),this._updating=!1,e):e},remove:function(e,t){return e=Backbone.Collection.prototype.remove.call(this,e,t),this._parentBean?(this._updating=!0,t=t||{},_.isUndefined(e)||_.isArray(e)||(e=[e]),_.each(e,function(e){var n=e.get("_link");n?this._linkedCollections[n]&&this._linkedCollections[n].remove(e,t):_.each(this._linkedCollections,function(n){var i=e instanceof r?e.get("module"):e._module;n.module===i&&n.remove(e,t)})},this),this._updating=!1,e):e},reset:function(e,t){if(!this._parentBean)return Backbone.Collection.prototype.reset.call(this,e,t);t=t?_.clone(t):{},_.isUndefined(e)||_.isArray(e)||(e=[e]);var n=_.groupBy(e,function(e){return e instanceof r?e.get("_link"):e._link});return this._updating=!0,_.each(this._linkedCollections,function(e,r){e.reset(n[r],_.omit(t,"silent"))},this),this._updating=!1,t.silent||this.trigger("reset",this,t),e},getDelta:function(){var e={};return _.each(this._linkedCollections,function(t,n){t.hasDelta()&&(e[n]=t.getDelta())},this),e},hasDelta:function(){return _.some(this._linkedCollections,function(e){return e.hasDelta()})},resetDelta:function(){_.each(this._linkedCollections,function(e,t){e.resetDelta()})},fetch:function(e){return(e=e||{}).module_list=this.module_list=e.module_list||this.module_list||SUGAR.App.metadata.getModuleNames({filter:"visible"}),i.prototype.fetch.call(this,e)},groupByModule:function(){return _.groupBy(this.models,function(e){return e.module})},toString:function(){return"mcoll:"+this.length},paginate:function(e){return e=e||{},this._parentBean&&_.extend(e,{collectionField:this._collectionField,beanId:this._parentBean.id,module:this._parentBean.module,offset:this.offset}),i.prototype.paginate.call(this,e)},resetPagination:function(){if(!this._parentBean)return i.prototype.resetPagination.call(this);this.offset=this.next_offset={}}})},function(e,t,n){"use strict";var r=n(12),i=n(1),a=n(0),o=n(2);function s(e){return _.every(e,_.isEmpty)}var l={validators:function(){var e=function(e,t,n){var r=_.isUndefined(e[n])?e.validation?e.validation[n]:null:e[n];if(_.contains(["int","float","decimal","currency"],e.type)&&_.isFinite(r))if(t="int"==e.type?parseInt(t):parseFloat(t),"max"==n){if(t>r)return r}else if("min"==n){if(t<r)return r}else if("greaterthan"==n){if(t<=r)return r}else if("lessthan"==n&&t>=r)return r},t=function(e,t,n,r){if(-1!==_.indexOf(["date","datetimecombo"],e.type)&&e.validation&&e.validation.type===n){var i=r.fields[e.validation.compareto];if(!_.isUndefined(i)&&-1!=_.indexOf(["date","datetimecombo"],i.type)){var a=Date.parse(r.get(i.name));if(t=Date.parse(t.toString()),!_.isNaN(a)&&!_.isNaN(t)){var s=o.get(i.label||i.vname||i.name,r.module);if("isbefore"==n)return a<t?s:void 0;if("isafter"==n)return a>t?s:void 0}}}};return{maxLength:function(e,t){if(_.isNumber(t)&&(t=t.toString()),_.isNumber(e.len)&&_.isString(t)){var n=e.len;if((t=(t=t||"").toString()).length>n)return n}},minLength:function(e,t){if(_.isNumber(e.minlen)){var n=e.minlen;if((t=(t=t||"").toString()).length<n)return n}},url:function(e,t){SUGAR.App.logger.warn("The function `app.validation.validators.url()` is deprecated since 7.10 because it has no effect.")},email:function(e,t){var n;if(("email"==e.type||"email-text"===e.type)&&(t.length>0&&_.each(t,function(t){(""!==t.email_address||!_.isUndefined(e.required)&&e.required)&&(a.isValidEmailAddress(t.email_address)||(n||(n=[]),n.push(t.email_address)))}),n&&n.length>0))return n},primaryEmail:function(e,t){if("email"==e.type&&t.length>0&&!_.find(t,function(e){return"1"==e.primary_address}))return!0},duplicateEmail:function(e,t){if("email"==e.type){var n,r,i=_.pluck(t,"email_address"),a=[],o=i.length;for(n=0;n<o;n++)for(r=n+1;r<o;r++)i[n]==i[r]&&a.push(i[n]);if(a&&a.length>0)return a}},datetime:function(e,t){var n,a,o,s,l,u,c;function h(e,t,n){var r=parseInt(e,10);return!isNaN(r)&&r>=t&&r<=n}if("date"===e.type||"datetimecombo"===e.type){if(_.isNaN(Date.parse(t))&&_.isNaN(Date.parse(t.replace(/[\.\-]/g,"/"))))return t;if(r.isIso(t)){if("0"===t.charAt(0))return t}else{if(l=t.replace(/[\.\-]/g,"/").split("/"),_.filter(l,function(e){return 3===e.length||e.length>4}).length)return t;if(!0===/([\.\/\-])\1/.test(t))return t;for(o=(a=i.getPreference("datepref")).match(/[.\/\-\s].*?/),u=0,c=(s=a.split(o)).length;u<c;u++)switch(n=l[u],s[u].toLowerCase().charAt(0)){case"m":if(!h(n,1,12))return t;break;case"d":if(!h(n,1,31))return t}}}},minValue:function(t,n){return e(t,n,"min")},maxValue:function(t,n){return e(t,n,"max")},greaterThan:function(t,n){return e(t,n,"greaterthan")},lessThan:function(t,n){return e(t,n,"lessthan")},number:function(e,t){if(-1!=_.indexOf(["int","float","decimal","currency"],e.type))return!(!(_.isBoolean(t)||_.isString(t)&&!t.trim().length||isNaN(parseFloat(t)))&&_.isFinite(t))||void 0},isBefore:function(e,n,r){return t(e,n,"isbefore",r)},isAfter:function(e,n,r){return t(e,n,"isafter",r)}}}(),requiredValidator:function(e,t,n,r){if(!0===e.required&&"id"!==t&&"image"!==e.type&&_.isUndefined(e.auto_increment)){var i=n.get(t),a=_.isUndefined(i),o=_.isNull(r)||""===r||!1===r||_.isArray(r)&&s(r)||r instanceof Backbone.Collection&&!r.length;if(e.id_name&&n.get(e.id_name))return;if(a&&_.isUndefined(r)||o)return!0}},_isArrayEmpty:function(e){if(SUGAR.App.config.sidecarCompatMode)return SUGAR.App.logger.warn("Data.Validation#_isArrayEmpty is a private method that you should not access. You will NOT be allowed to access it in the next release. Please update your code to rely on the public API only."),s(e);SUGAR.App.logger.error("Data.Validation#_isArrayEmpty is a private method that you are not allowed to access. Please use only the public API.")}};e.exports=l},function(e,t,n){"use strict";var r=n(10),i=n(11),a=n(14);function o(){return(void 0===this.get("fetch")||this.get("fetch"))&&!this.isDataFetched()&&!this.get("create")}var s=Backbone.Model.extend({initialize:function(e){Backbone.Model.prototype.initialize.call(this,e),this.id=this.cid,this.parent=null,this.children=[],this._fetchCalled=!1},clear:function(e){var t=this.get("collection");t&&t.abortFetchRequest(),_.each(this.children,function(t){t.clear(e)}),this.children=[],this.parent=null,_.each(this.attributes,function(e){e&&e.off===Backbone.Events.off&&(e.off(),e.stopListening(),_.isFunction(e.dispose)&&e.dispose())},this),this.off(),Backbone.Model.prototype.clear.call(this,e),this.resetLoadFlag()},resetLoadFlag:function(e){e=e||{};var t=!!_.isUndefined(e.recursive)||e.recursive,n=!!_.isUndefined(e.resetModel)||e.resetModel,r=!!_.isUndefined(e.resetCollection)||e.resetCollection;this._fetchCalled=!1,this.get("model")&&n&&(this.get("model").dataFetched=!1),this.get("collection")&&r&&(this.get("collection").dataFetched=!1),t&&_.each(this.children,function(e){e.resetLoadFlag()})},isCreate:function(){return!0===this.get("create")},getChildContext:function(e){var t,n=(e=e||{}).forceNew||!1;delete e.forceNew;var r=e.cid||e.name||e.link||e.module;if(r&&!n&&(t=_.find(this.children,function(e){return e.cid==r||e.get("link")==r||e.get("module")==r})),t||(e=_.extend({fetch:this.get("fetch")},e),t=new s(e),this.children.push(t),t.parent=this),e.link){var i=this.get("model");t.set({parentModel:i,parentModule:i?i.module:null})}else e.module||t.set({module:this.get("module")});return this.trigger("context:child:add",t),t},prepare:function(e,t){var n;if(e||!this.get("model")&&!this.get("collection")){var r=this.get("modelId"),i=this.get("create");n=this.get("link"),this.set(n?this._prepareRelated(n,r,i):this._prepare(r,i))}return!e&&this._relatedCollectionsPopulated||n&&!t||this._populateRelatedContexts(),this},setFetch:function(e,t){t=t||{},this.set("fetch",e),(void 0===t.recursive||t.recursive)&&_.each(this.children,function(t){t.setFetch(e)})},_prepare:function(e,t){var n,r,i=this.get("module"),o=this.get("mixed");return e?r=[n=a.createBean(i,{id:e})]:!0===t?r=[n=a.createBean(i)]:n=a.createBean(i),{collection:!0===o?a.createMixedBeanCollection(r):a.createBeanCollection(i,r),model:n}},_prepareRelated:function(e,t,n){var r,i,o=this.get("parentModel");return o=o||a.createBean(this.get("parentModule"),{id:this.get("parentModelId")}),t?(r=a.createRelatedBean(o,t,e),i=a.createRelatedCollection(o,e,[r])):!0===n?(r=a.createRelatedBean(o,null,e),i=a.createRelatedCollection(o,e,[r])):(r=a.createRelatedBean(o,null,e),i=a.createRelatedCollection(o,e)),this.has("parentModule")||this.set({parentModule:o.module},{silent:!0}),this.has("module")||this.set({module:r.module},{silent:!0}),{parentModel:o,collection:i,model:r}},addFields:function(e){if(e){var t=_.union(e,this.get("fields")||[]);return this.set("fields",t)}},loadData:function(e){if((e=e||{}).forceFetch||o.call(this)){delete e.forceFetch;var t,n=this.get("modelId"),a=this.get("module"),s=SUGAR.App.config.orderByDefaults&&a?SUGAR.App.config.orderByDefaults[a]:null;t=n?this.get("model"):this.get("collection"),s&&t instanceof i&&!t.orderBy&&(t.orderBy=s),t&&(t instanceof r||t instanceof i)?(this.get("dataView")&&_.isString(this.get("dataView"))&&t.setOption("view",this.get("dataView")),this.get("fields")&&t.setOption("fields",this.get("fields")),this.get("limit")&&t.setOption("limit",this.get("limit")),this.get("module_list")&&t.setOption("module_list",this.get("module_list")),this.get("viewed")&&t.setOption("viewed",this.get("viewed")),e.context=this,!0!==this.get("skipFetch")&&t.fetch(e),this._fetchCalled=!0):SUGAR.App.logger.warn("Skipping fetch because model is not Bean, Bean Collection, or it is not defined, module: "+this.get("module"))}},_populateRelatedContexts:function(){this.get("collection")&&(this.get("collection").each(function(e){var t=e.fieldsOfType("collection");_.isEmpty(t)||_.each(t,function(e){var t=e.links;_.isString(t)&&(t=[t]),_.each(t,function(e){this.getChildContext({link:e}).prepare()},this)},this)},this),this._relatedCollectionsPopulated=!0)},_shouldFetch:function(){if(SUGAR.App.config.sidecarCompatMode)return SUGAR.App.logger.warn("Core.Context#_shouldFetch is a private method that you should not access. You will NOT be allowed to access it in the next release. Please update your code to rely on the public API only."),o.call(this);SUGAR.App.logger.error("Core.Context#_shouldFetch is a private method that you are not allowed to access. Please use only the public API.")},reloadData:function(e){e=e||{},this.resetLoadFlag(e),this.loadData(e),this.trigger("reload",this,e)},isDataFetched:function(){var e=this.get("modelId")?this.get("model"):this.get("collection");return this._fetchCalled||e&&!!e.dataFetched}});e.exports=s},function(e,t,n){"use strict";var r=n(7),i=(n(13),n(0)),a=(n(2),n(21)),o=n(5),s=n(22),l=n(1),u=Backbone.Router.extend({initialize:function(e){e=e||{},this._previousFragment="",this._currentFragment=""},_routeHandler:function(e){var t=Array.prototype.slice.call(arguments,1),n=e.route;s.beforeRoute(n,t)&&(this._previousFragment=this._currentFragment,this._currentFragment=this.getFragment(),e.apply(this,t),s.after(n,t))},_moduleExists:function(e){return!e||!_.isUndefined(SUGAR.App.metadata.getModule(e))||(a.handleHttpError({status:404}),!1)},_addDefaultRoutes:function(){var e=[{name:"notFound",route:/^.*$/,callback:function(){a.handleHttpError({status:404})}}];this.addRoutes(e)},route:function(e,t,n){if(!t)throw new Error("You need to provide a route name.");_.isEmpty(this._routes[t])||SUGAR.App.logger.error('Route "'+t+'" is being overridden. This is highly NOT advisable.'),this._routes[t]=n,n||(n=this[t]),n.route=t,n=_.wrap(n,this._routeHandler),Backbone.Router.prototype.route.call(this,e,t,n)},getFragment:function(){return Backbone.history.getFragment()},navigate:function(e,t){return Backbone.Router.prototype.navigate.apply(this,arguments),t&&t.trigger||(this._previousFragment=this._currentFragment,this._currentFragment=this.getFragment()),this},getPreviousFragment:function(){return this._previousFragment},goBack:function(){window.history.back()},go:function(e){window.history.go(e)},init:function(){this._routes={},this._addDefaultRoutes(),o.trigger("router:init")},start:function(){Backbone.History.started||Backbone.history.start()},stop:function(){Backbone.history.stop()},reset:function(){SUGAR.App.router.stop(),Backbone.history.handlers=[],SUGAR.App.router.init(),SUGAR.App.router.start()},addRoutes:function(e){if(e){var t=e.reverse();_.each(t,function(e){this.route(e.route,e.name,e.callback)},this)}},get:function(e){return this._routes[e]},refresh:function(){Backbone.history.loadUrl(Backbone.history.fragment)},buildRoute:function(e,t,n){var r;return _.isFunction(i.customBuildRoute)&&(r=i.customBuildRoute.apply(this,arguments),!_.isEmpty(r))?r:(e?(r=_.isString(e)?e:e.get("module"),t&&(r+="/"+t),n&&(r+="/"+n)):r=n,r)},redirect:function(e,t){this.navigate(e,_.extend({trigger:!0,replace:!0},t))},index:function(){if(SUGAR.App.logger.debug("Route changed to index"),SUGAR.App.config.externalLogin){var e=l.lastState.get("externalAuthLastPage");if(e)return l.lastState.remove("externalAuthLastPage"),void this.navigate(e,{trigger:!0})}SUGAR.App.config.defaultModule?this.navigate(SUGAR.App.config.defaultModule,{trigger:!0}):r.hasAccess("read","Home")&&this.navigate("Home",{trigger:!0})},list:function(e){this._moduleExists(e)&&(SUGAR.App.logger.debug("Route changed to list of "+e),SUGAR.App.controller.loadView({module:e,layout:"records"}))},layout:function(e,t){this._moduleExists(e)&&(SUGAR.App.logger.debug("Route changed to layout: "+t+" for "+e),SUGAR.App.controller.loadView({module:e,layout:t}))},create:function(e){this._moduleExists(e)&&(SUGAR.App.logger.debug("Route changed: create "+e),SUGAR.App.controller.loadView({module:e,create:!0,layout:"edit"}))},login:function(){SUGAR.App.logger.debug("Logging in"),SUGAR.App.controller.loadView({module:"Login",layout:"login",create:!0}),o.trigger("app:login"),SUGAR.App.config.externalLogin&&(Backbone.history.fragment&&l.lastState.set("externalAuthLastPage",Backbone.history.fragment),SUGAR.App.api.ping(null,{success:function(){o.trigger("app:login:success"),SUGAR.App.router.refresh()}}))},logout:function(e){SUGAR.App.api.isAuthenticated()?(e="1"===e,SUGAR.App.logger.debug("Logging out: "+e),SUGAR.App.logout({complete:function(){SUGAR.App.router.navigate("#"),SUGAR.App.config.externalLogin?SUGAR.App.controller.loadView({module:"Login",layout:"logout",skipFetch:!0,create:!0}):e?window.location.reload():SUGAR.App.router.login()},success:function(e){o.trigger("app:logout:success",e)}},e)):this.redirect("/")},record:function(e,t,n,r){if(this._moduleExists(e)){var i=SUGAR.App.controller.context.get("collection"),a=SUGAR.App.controller.context.get("listCollection"),o={module:e,layout:r||"record",action:n||"detail"};"create"!==t?_.extend(o,{modelId:t}):(_.extend(o,{create:!0}),o.layout="create"),i&&i.module===e&&i.get(t)&&(o.listCollection=i),a&&a.module===e&&a.get(t)&&(o.listCollection=a),SUGAR.App.controller.loadView(o)}}});e.exports=u},function(e,t,n){"use strict";var r=n(20),i=n(12),a=n(18),o=n(0),s=n(2),l=n(17),u=n(4),c=n(16),h=n(6),d={field:function(e,t){var n=h.createField({def:this,viewDefs:this,view:e,model:t.hash.model,viewName:t.hash.template});return t.hash.parent&&_.isArray(t.hash.parent.fields)&&t.hash.parent.fields.push(n),n.getPlaceholder()},fieldOfType:function(e,t){var n={type:e,name:e,label:t};return h.createField({def:n,view:this}).getPlaceholder()},component:function(e,t){var n,r,i="";return n=_.find(e.meta.components,function(e){var n;return n=e.layout||e.view,(_.isString(n)?n:n.name||n.type)===t}),_.isObject(n)&&!_.isEmpty(n)&&(r=e.initComponents([n])[0],n.initializedInTemplate=!0,i=r.getPlaceholder()),i},eachOptions:function(e,t){var n,r,i="";return n=_.isString(e)?s.getAppListStrings(e):e,_.isArray(n)?r=function(e,n){i+=t.fn({key:n,value:e})}:_.isObject(n)?r=function(e,n){i+=t.fn({key:n,value:e})}:n=null,n&&_.each(n,r,this),i},buildRoute:function(e){var t=e.hash.context,n=e.hash.model||(t&&t.get("model")?t.get("model"):{}),r=e.hash.module||n.module||(t&&t.get("module")?t.get("module"):null),i=e.hash.id||n.id,a=e.hash.action;return SUGAR.App.router.buildRoute(r,i,a)},fieldValue:function(e,t,n){return e.get(t)||n.hash.defaultValue||""},has:function(e,t,n){return _.isArray(t)||_.isObject(t)||(t=[t]),_.include(t,e)?n.fn(this):n.inverse(this)},notHas:function(e,t,n){var r=n.fn,i=n.inverse;return n.fn=i,n.inverse=r,Handlebars.helpers.has.call(this,e,t,n)},isSortable:function(e,t,n){return o.isSortable(e,t)?n.fn(this):""},eq:function(e,t,n){return e==t?n.fn(this):n.inverse(this)},notEq:function(e,t,n){return e!=t?n.fn(this):n.inverse(this)},match:function(e,t,n){return new RegExp(t).test(e)?n.fn(this):n.inverse(this)},notMatch:function(e,t,n){return new RegExp(t).test(e)?n.inverse(this):n.fn(this)},log:function(e){SUGAR.App.logger.debug("*****HBS: Current Context*****"),SUGAR.App.logger.debug(this),SUGAR.App.logger.debug("*****HBS: Current Value*****"),SUGAR.App.logger.debug(e),console.log(e),SUGAR.App.logger.debug("***********************")},str:function(e,t,n){return t=_.isString(t)?t:null,s.get(e,t,n)},relativeTime:function(e,t){var n,r,a=i(e);return t.hash.title=t.hash.title||a.formatUser(t.hash.dateOnly),n=_.map(t.hash,function(e,t){return t+'="'+Handlebars.Utils.escapeExpression(e)+'"'}).join(" "),r='<time datetime="'+a.format()+'" '+n+">"+a.fromNow()+"</time>",new Handlebars.SafeString(r)},arrayJoin:function(e,t){return e.join(t)},nl2br:function(e){var t=(e=Handlebars.Utils.escapeExpression(e)).replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>");return new Handlebars.SafeString(t)},formatCurrency:function(e,t){return _.isObject(t)&&(t=t.hash.currencyId||void 0),r.formatAmountLocale(e,t)},firstChars:function(e,t){return e.substring(0,t)},formatDate:function(e,t){return(e=i(e)).formatUser(t.hash.dateOnly)},getModuleName:function(e,t){var n={plural:t.hash.plural,defaultValue:t.hash.defaultValue};return s.getModuleName(e,n)},partial:function(e,t,n,r){var i,o,s;if(!r&&n.hash&&(r=n,n={}),s=_.extend({templateComponent:t},n,r.hash),i=r.hash.module||t.module,t&&t.options.templateOptions&&t.options.templateOptions.partials)o=t.options.templateOptions.partials[e];else if(t instanceof a){var h=r.hash.fallbackTemplate;o=u.getField(t.type,e||"detail",i,h)}else if(t instanceof c){var d=t.tplName;!(o=u.getView(t.name+"."+e,i)||u.getView(t.name+"."+e))&&d&&(o=u.getView(d+"."+e,i)||u.getView(d+"."+e))}else t instanceof l&&(o=u.getLayout(t.name+"."+e,i)||u.getLayout(t.name+"."+e));return new Handlebars.SafeString(o?o(s):"")}};e.exports=d},function(e,t,n){"use strict";var r={isEmptyValue:function(e){return!_.isNumber(e)&&!_.isBoolean(e)&&!_.isDate(e)&&_.isEmpty(e)},changed:function(e,t){if(!_.isEmpty(e)||!_.isEmpty(t)){var n={},r=_.keys(_.extend(n,t,e));return _.each(r,function(r){var i=!1;_.has(e,r)&&_.has(t,r)&&_.isEqual(e[r],t[r])||(i=!0),n[r]=i}),n}}};e.exports=r},function(e,t,n){"use strict";var r=n(0),i=window.location.pathname.replace(/\/[^\/]*$/,"/cookie.html"),a=function(){return{}},o={initAsync:function(e){var t=document.createElement("iframe");t.style.display="none",t.src=i,document.body.appendChild(t),t.contentWindow.onload=function(){a=function(){return t.contentWindow.getCookie()},e()}},has:function(e){return e in a()},get:function(e){return a()[e]},set:function(e,t){r.cookie.setCookie(e,t,null,i)},cut:function(e){r.cookie.setCookie(e,"",-1,i)}};e.exports=o},function(e,t,n){"use strict";var r=n(9).extend({tpl:'<div class="alert alert-block">{{#if title}}<strong>{{title}}</strong>{{/if}}{{#each messages}}{{./this}}{{/each}}</div>',render:function(){var e=Handlebars.compile(this.tpl);this.$el.html(e(this.options)),this.$(".alert").addClass("alert-"+this.options.level)}});e.exports=r},function(module,exports,__webpack_require__){"use strict";var Acl=__webpack_require__(7),Events=__webpack_require__(5),Template=__webpack_require__(4),User=__webpack_require__(1),Utils=__webpack_require__(0),Language=__webpack_require__(2),ViewManager=__webpack_require__(6),DataManager=__webpack_require__(14),_keyPrefix="meta:",_metadata={},_mdLoaded={},_syncing=!1;function _setHash(e,t){var n=t?"public:":"";SUGAR.App.cache.set(_keyPrefix+n+"hash",e._hash)}function _cacheMeta(e){SUGAR.App.cache.set(_keyPrefix+"data",e)}function _getCachedMeta(){return SUGAR.App.cache.get(_keyPrefix+"data")}function _injectLabels(e,t){_.each(t,function(n,r){"_hash"!==r&&(e[r]=t[r])}),delete e.labels}function _fetchLabels(e,t){var n,r,i,a=User.getLanguage();n=e.ordered_labels||e.labels,Language.setDefaultLanguage(n.default),t.language&&n[t.language]?r=t.language:n[a]?r=a:(r=Language.getDefaultLanguage(),User.id&&User.updateLanguage(r)),Language.setCurrentLanguage(r),i=Utils.buildUrl(n[r]),SUGAR.App.api.call("read",i,null,{success:function(e){try{e=_.isString(e)?JSON.parse(e):e}catch(e){return SUGAR.App.logger.fatal("Failed to parse labels data: "+e),void t.error({code:"sync_failed",label:"ERR_SYNC_FAILED"})}t.success(e)},error:function(e){e.code="sync_failed",e.label="ERR_SYNC_FAILED",t.error(e)}})}function _initCustomComponents(e,t){var n=this,r="base"!==SUGAR.App.config.platform?["base",SUGAR.App.config.platform]:["base"];_.each({layout:"layout",view:"view",fieldTemplate:"field",data:"data"},function(i,a){n._metaTypeIsSeparatedByPlatform(e,a,r)&&_.each(r,function(r){var o=e[a+"s"][r];n._sortAndDeclareComponents(o,i,t,r)}),_.each(e[a+"s"],function(e,n){"view"===i&&e.templates&&_.each(e.templates,function(e,r){r=n===r?r:n+"."+r,Template.setView(r,t,e,!0)}),"layout"===i&&e.templates&&_.each(e.templates,function(e,r){r=n===r?r:n+"."+r,Template.setLayout(r,t,e,!0)}),"field"===i&&e.templates&&_.each(e.templates,function(e,r){Template.setField(n,r,t,e,!0)})})},this)}module.exports={fieldTypeMap:{varchar:"text",datetime:"datetimecombo",multienum:"enum",text:"textarea",decimal:"float"},_patchMetadata:function(e,t){return t&&!0!==t._patched?(_.each(t.views,function(n){n.meta&&_.each(n.meta.panels,function(n){n.fields=this._patchFields(e,t,n.fields)},this)},this),t._patched=!0,t):t},_patchFields:function(e,t,n){var r=this;return _.each(n,function(i,a){var o=_.isString(i)?i:i.name,s=t.fields[o];i.fields?i.fields=r._patchFields(e,t,i.fields):_.isEmpty(s)?""===i&&(i={view:"detail"},n[a]=i):(_.isString(i)&&(i={name:i}),_.isObject(i.displayParams)&&(_.extend(i,i.displayParams),delete i.displayParams),i.type=i.type||s.custom_type||s.type||"base",i.type=r.fieldTypeMap[i.type]||i.type,i.label=i.label||s.vname||i.name,n[a]=i)},this),n},_sortControllers:function _sortControllers(type,components,module){var updated={},nameMap={},entries={},updateWeights=function e(t){var n=t.controller;"base"===t.type&&(entries["Base"+Utils.capitalize(type)].weight=-99999),_.isObject(n)&&_.isString(n.extendsFrom)&&entries[n.extendsFrom]&&!updated[n.extendsFrom]&&(entries[n.extendsFrom].weight--,updated[n.extendsFrom]=!0,e(entries[n.extendsFrom]))};return _.each(components,function(entry,name){if(entry.controller){var controller=entry.controller,className=(module||"")+Utils.capitalizeHyphenated(name)+Utils.capitalize(type);if(nameMap[className]=name,_.isString(controller))try{controller=eval("["+controller+"][0]")}catch(e){SUGAR.App.logger.error("Failed to eval view controller for "+className+": "+e+":\n"+entry.controller)}else{var emptyController="field"!==type&&1===Object.getOwnPropertyNames(controller).length&&controller.hasOwnProperty("extendsFrom");emptyController&&SUGAR.App.logger.warn("Instead of creating an empty js controller `"+className+"` and specify the parent with extendsFrom, please use `type` property in the metadata `"+name+"`, to specify controller to use. It will allow you to delete your empty controllers and save memory.")}entries[className]={type:name,controller:controller,weight:0}}}),_.each(entries,function(e,t){var n,r=e.controller;_.isObject(r)&&_.isString(r.extendsFrom)&&(n="Custom"+r.extendsFrom)in entries&&t!=n&&(r.extendsFrom=n)}),_.each(entries,function(e){updated={},updateWeights(e)}),_.sortBy(entries,"weight")},_sortAndDeclareComponents:function(e,t,n,r){var i,a,o;!_.isUndefined(e)&&e&&(i=this._sortControllers(t,e,n),"data"===t?(_.each(i,function(e){"model"===e.type?a=e.controller:"collection"===e.type&&(o=e.controller)}),DataManager.declareModelClass(n,null,r,a),DataManager.declareCollectionClass(n,r,o)):_.each(i,function(e){ViewManager.declareComponent(t,e.type,n,e.controller,!0,r)}))},_metaTypeIsSeparatedByPlatform:function(e,t,n){if(!_.isUndefined(e[t+"s"]))for(var r=0;r<n.length;r++)if(!_.isUndefined(e[t+"s"][n[r]])&&_.isUndefined(e[t+"s"][n[r]].controller))return!0;return!1},_declareClasses:function(e){var t=this,n="base"!==SUGAR.App.config.platform?["base",SUGAR.App.config.platform]:["base"];_.each(["field","view","layout","data"],function(r){var i;t._metaTypeIsSeparatedByPlatform(e,r,n)&&_.each(n,function(n){i=e[r+"s"][n],t._sortAndDeclareComponents(i,r,null,n)},this)},this),_.each(e.modules,function(e,t){_initCustomComponents.call(this,e,t)},this)},getModules:function(){return _metadata.modules},getHiddenSubpanels:function(){return _metadata.hidden_subpanels},getModule:function(e,t){var n=this.getModules();return n&&(n=n[e]),n&&t&&(n=n[t]),n},getRelationship:function(e){return _metadata.relationships?_metadata.relationships[e]:null},getField:function(e){if(!(e=e||{}).module)throw new Error("Cannot get vardefs without a module");var t=this.getModule(e.module,"fields");return t&&e.name?t[e.name]:t},getView:function(e,t,n){if(!e&&!t)return _metadata.views;var r=this.getModule(e,"views");return t&&(r=r&&r[t]&&void 0!==r[t].meta?r[t].meta:n?(r=this.getModule(n,"views"))&&r[t]?r[t].meta:null:_metadata.views&&_metadata.views[t]?_metadata.views[t].meta:null),r?this.copy(r,{module:e,view:t}):r},getLayout:function(e,t,n){if(!e&&!t)return _metadata.layouts;var r=this.getModule(e,"layouts");return t&&(r=r&&r[t]&&void 0!==r[t].meta?r[t].meta:n?(r=this.getModule(n,"layouts"))&&r[t]?r[t].meta:null:_metadata.layouts&&_metadata.layouts[t]?_metadata.layouts[t].meta:null),r?this.copy(r,{module:e,layout:t}):r},getModuleNames:function(e){var t=["enabled","!enabled","visible","!visible","display_tab","!display_tab","show_subpanels","!show_subpanels","quick_create","!quick_create"];e=e||{};var n=[];if(_.isUndefined(_metadata.modules_info))return n=_.clone(User.get("module_list")),e.access&&(n=_.filter(n,function(t){return Acl.hasAccess(e.access,t)})),n||[];var r,i=!1;return e.filter&&(_.isArray(e.filter)||(e.filter=[e.filter]),r=[],_.each(e.filter,function(e){e&&_.indexOf(t,e)>-1?(r.push(e),i="display_tab"===e):e&&SUGAR.App.logger.warn("Can't filter getModuleNames by "+e)}),_.isEmpty(r)&&(r=void 0)),n=_.chain(_metadata.modules_info).keys().without("_hash").value(),r&&_.each(r,function(t){if("!"===t.charAt(0)){var r=this.getModuleNames({filter:t.substring(1),access:e.access});n=_.difference(n,r)}else n=_.filter(n,function(e){return _metadata.modules_info[e][t]})},this),_.isEmpty(User.get("module_list"))||(i?n=_.intersection(User.get("module_list"),n):r||(n=_.union(User.get("module_list"),n))),e.access&&(n=_.filter(n,function(t){return Acl.hasAccess(e.access,t)})),n},getStrings:function(e){return _metadata[e]||{}},getFullModuleList:function(){return _metadata.full_module_list||{}},getConfig:function(){return _metadata.config||{}},getBaseCurrencyId:function(){return"-99"},getCurrency:function(e){return this.getCurrencies()[e]},getCurrencies:function(){return _metadata.currencies||{}},getLogoUrl:function(){return _metadata.logo_url},getServerInfo:function(){return _metadata.server_info||{}},getModuleTabMap:function(){return _metadata.module_tab_map||{}},getTabMappedModule:function(e){return this.getModuleTabMap()[e]||e},getFilterOperators:function(e){var t=_metadata.filters&&_metadata.filters.operators&&_metadata.filters.operators.meta||{},n=e&&this.getModule(e,"filters"),r=n&&n.operators&&n.operators.meta;return r?_.extend({},t,r):t},get:function(){return _metadata},getEditableDropdownFilter:function(e){var t=_metadata.editable_dropdown_filters;return t&&t[e]?this.copy(t[e]):{}},copy:function(e,t){return Utils.deepCopy(e)},set:function(e,t,n){if(_.each(e.modules,function(e,t){this._patchMetadata(t,e)},this),this._declareClasses(e),e.config&&SUGAR.App.setConfig(e.config),Template.set(e,e._hash&&e._hash!=this.getHash(t)),_.isEmpty(e._hash)||_setHash(e,t),n)_metadata=e;else{var r=e._override_values||[];delete e._override_values,_.each(e,function(e,t){_metadata[t]=_.isObject(e)&&!_.contains(r,t)?_.extend(_metadata[t]||{},e):e})}SUGAR.App.config.cacheMeta&&!t&&_cacheMeta(_metadata),"prod"!=SUGAR.App.config.env&&(this._dev_data=_metadata)},getHash:function(e){var t=e?_keyPrefix+"public:hash":_keyPrefix+"hash";return SUGAR.App.cache.get(t)||_metadata._hash||""},sync:function(e,t){_syncing=!0,(t=t||{}).params=t.params||{};var n=this,r=t.metadataTypes||(t.getPublic?SUGAR.App.config.publicMetadataTypes:SUGAR.App.config.metadataTypes)||[],i=function(r){SUGAR.App.logger.debug("Failed fetching metadata"),t.getPublic||SUGAR.App.error.handleHttpError(r),e.call(n,r)},a=e;e=function(e){_syncing=!1,_.isFunction(a)&&a(e)},SUGAR.App.api.getMetadata({types:r,callbacks:{success:function(a){var o;if(t=t||{},_.isEmpty(a))e.call(n,{code:"sync_failed",label:"ERR_SYNC_FAILED"});else{if(SUGAR.App.logger.debug("Updating metadata"),_mdLoaded[t.getPublic?"public:md":"md"]&&n.getHash(t.getPublic)==a._hash&&!t.forceRefresh)return SUGAR.App.logger.debug("Skipping update as metadata hash matches"),e.call(n);if((_.isEmpty(r)||_.include(r,"server_info")&&!t.getPublic)&&!0!==(o=SUGAR.App.isServerCompatible(a.server_info)))return e(o);_mdLoaded[t.getPublic?"public:md":"md"]=!0,a.jssource?n._loadJSSource(a,t,e,i,n):a.labels||a.ordered_labels?_fetchLabels(a,{language:t.language,success:function(r){_injectLabels(a,r),n.set(a,t.getPublic),e.call(n)},error:i}):e.call(n)}},error:i},public:t.getPublic,params:t.params})},isSyncing:function(){return _syncing},_loadJSSource:function(e,t,n,r,i){var a,o=this._checkJSSourceUpdated(e,!!t.getPublic);if("reload"===o)return Utils.hardRefresh();o&&(SUGAR.jssource=!1,(a=document.createElement("script")).src=Utils.buildUrl(e.jssource),document.head.appendChild(a)),async.parallel([function(e){o?Utils.doWhen("SUGAR.jssource",function(){i._declareClasses(SUGAR.jssource),e()}):e()},function(n){_fetchLabels(e,{language:t.language,success:function(r){_injectLabels(e,r),i.set(e,t.getPublic),n()},error:function(){r.apply(i,arguments),n()}})}],function(){n&&n.call(i)})},_checkJSSourceUpdated:function(e,t){return t?this._publicJSSourceFile?this._publicJSSourceFile!=e.jssource&&"reload":(this._publicJSSourceFile=e.jssource,!0):e.jssource_public&&this._publicJSSourceFile&&e.jssource_public!=this._publicJSSourceFile?(Utils.hardRefresh(),"reload"):this._jsSourceFile?this._jsSourceFile!=e.jssource&&"reload":(this._jsSourceFile=e.jssource,!0)},init:function(){if(_.bindAll(this,"storageHandler"),window.addEventListener("storage",this.storageHandler),SUGAR.App.config.cacheMeta){var e=_getCachedMeta();e&&this.set(e,!1)}Events.on("cache:clean",function(e){e([_keyPrefix+"public:hash",_keyPrefix+"hash",_keyPrefix+"data"])})},storageHandler:function(){!_syncing&&(this.getHash()!=_metadata._hash&&_mdLoaded.md||SUGAR.App.api.getUserprefHash()&&User.get("_hash")&&SUGAR.App.api.getUserprefHash()!=User.get("_hash"))&&(_syncing=!0,_mdLoaded.md=!1,SUGAR.App.sync({getPublic:!SUGAR.App.api.isAuthenticated()}))},clearCache:function(){SUGAR.App.cache.cut(_keyPrefix+"public:hash"),SUGAR.App.cache.cut(_keyPrefix+"hash"),SUGAR.App.cache.cut(_keyPrefix+"data")},reset:function(){_metadata={},this.clearCache()}}},function(e,t,n){"use strict";var r=n(5),i=n(25),a=n(6);e.exports=Backbone.View.extend({initialize:function(){this.context=new i,r.on("app:sync:complete",function(){SUGAR.App.api.setStateProperty("loadingAfterSync",!0),_.each(SUGAR.App.additionalComponents,function(e){e&&_.isFunction(e._setLabels)&&e._setLabels(),e.render()}),SUGAR.App.router.reset(),SUGAR.App.api.clearStateProperty("loadingAfterSync")}),r.on("app:login:success",function(){SUGAR.App.sync()})},loadView:function(e){var t=this.layout;if(SUGAR.App.triggerBefore("app:view:change")&&SUGAR.App.triggerBefore("app:view:load")){if(this.context.clear({silent:!0}),this.context.set(e),this.context.prepare(),this.layout=a.createLayout({name:e.layout,module:e.module,context:this.context}),t)document.createDocumentFragment().appendChild(t.el);SUGAR.App.$contentEl.append(this.layout.$el),this.layout.initComponents(),(!e||e&&!e.skipFetch)&&this.layout.loadData(),this.layout.render(),t&&t.dispose(),SUGAR.App.trigger("app:view:change",e.layout,e)}},loadAdditionalComponents:function(e){_.isEmpty(SUGAR.App.additionalComponents)?(SUGAR.App.additionalComponents={},_.each(e,function(e,t){if(e.target){var n=this.$(e.target);if(!n.get(0))return void SUGAR.App.logger.error('Unable to place additional component "'+t+'": the target specified does not exist.');e.layout?(SUGAR.App.additionalComponents[t]=a.createLayout({context:this.context,type:e.layout,el:n}),SUGAR.App.additionalComponents[t].initComponents()):SUGAR.App.additionalComponents[t]=a.createView({type:e.view||t,context:this.context,el:n}),SUGAR.App.additionalComponents[t].render()}else SUGAR.App.logger.error('Unable to place additional component "'+t+'": no target specified.')},this)):SUGAR.App.logger.error("`Controller.loadAdditionalComponents` has already been called. It can not be called twice.")}})},function(e,t,n){"use strict";var r=n(5),i="",a={},o=function(e){return i+e},s=_.extend({},store,{cut:store.remove,cutAll:store.clear}),l=function(e){if(!e.has("uniqueKey")){for(var t={},n=0,r=localStorage.length;n<r;n++){var i=localStorage.key(n);t[i]=localStorage[i]}_.each(t,function(t,n){try{JSON.parse(t),t=e.store.deserialize(t)}catch(e){t=function(e){return new Function("return "+e)()}(t)}null===t&&(t=void 0),e.store.set(n,t)}),e.set("uniqueKey",a.uniqueKey)}},u=_.extend({},Backbone.Events,{store:s,init:function(){i=a.env+":"+a.appId+":",l(this),this.get("uniqueKey")!==a.uniqueKey&&(this.cutAll(!0),this.set("uniqueKey",a.uniqueKey)),r.register("cache:clean",this)},has:function(e){return this.store.has(o(e))},get:function(e){return this.store.get(o(e))},set:function(e,t){e=o(e);try{this.store.set(e,t)}catch(n){n.name.toLowerCase().indexOf("quota")>-1&&(this.clean(),this.store.set(e,t))}},clean:function(){var e=[],t={};this.trigger("cache:clean",function(t){e=_.union(t,e)}),_.each(e,function(e){t[e]=this.get(e)},this),this.cutAll(),_.each(t,function(e,t){_.isUndefined(e)||this.set(t,e)},this)},cut:function(e){e=o(e),this.store.has(e)&&this.store.cut(e)},cutAll:function(e){if(!0===e)return this.store.cutAll();var t=this.store.getAll();_.each(t,function(e,t){0===t.indexOf(i)&&this.store.cut(t)},this)}});e.exports=function(e){return a=e||{},u}},function(e,t,n){"use strict";var r={level:"error",formatter:"SimpleFormatter",consoleWriter:"ConsoleWriter",serverWriter:"ServerWriter"},i={ConsoleWriter:{write:function(e,t){window.console||(window.console={}),window.console.log||(window.console.log=function(){}),e.value<=o.levels.INFO.value?console.log(t):e.value==o.levels.WARN.value?console.warn(t):console.error(t)}},ServerWriter:{write:function(e,t){if(!(e.value<o.levels.WARN.value)&&SUGAR.App.api.isAuthenticated()){var n=r.writeToServer||!1;if(n&&t.trim().length){var i=SUGAR.App.api.buildURL(void 0,"logger"),a={level:e.name.toLowerCase(),message:t};SUGAR.App.api.call("create",i,a,{success:function(e){if(!e.status)throw"Failed to write log message {"+t+"} onto server"},error:function(e){throw e}})}}}}},a={SimpleFormatter:{format:function(e,t,n){var r=n.getUTCFullYear()+"-"+(n.getUTCMonth()+1)+"-"+n.getUTCDate()+" "+n.getUTCHours()+":"+n.getUTCMinutes()+":"+n.getUTCSeconds();return e.name+"["+r+"]: "+t}}},o={levels:{TRACE:{value:1,name:"TRACE"},DEBUG:{value:2,name:"DEBUG"},INFO:{value:3,name:"INFO"},WARN:{value:4,name:"WARN"},ERROR:{value:5,name:"ERROR"},FATAL:{value:6,name:"FATAL"}},trace:function(e){this.log(this.levels.TRACE,e)},debug:function(e){this.log(this.levels.DEBUG,e)},info:function(e){this.log(this.levels.INFO,e)},warn:function(e){this.log(this.levels.WARN,e)},error:function(e){this.log(this.levels.ERROR,e)},fatal:function(e){this.log(this.levels.FATAL,e)},getLevel:function(){var e=r.level;return e?(e=e.toUpperCase(),this.levels[e]||this.levels.ERROR):this.levels.ERROR},log:function(e,t){try{var n=this.getLevel();if(e.value<n.value)return;if(t=t||"<none>",_.isFunction(t)&&(t=t.call(this)),_.isObject(t))try{t=JSON.stringify(t)}catch(e){t=t.toString()}var o=a[r.formatter]||a.SimpleFormatter,s=i[r.consoleWriter]||i.ConsoleWriter,l=i[r.serverWriter]||i.ServerWriter;t=o.format(e,t,new Date),s.write(e,t),l.write(e,t)}catch(e){console.log("Failed to log message {"+t+"} due to exception: "+e)}}};Object.defineProperty(o,"SimpleFormatter",{get:function(){return SUGAR.App.logger.warn("`Utils.Logger.SimpleFormatter` has been made private since 7.10 and you will not be able to access it in the next release. Please do not use it anymore"),a.SimpleFormatter}}),Object.defineProperty(o,"ServerWriter",{get:function(){return SUGAR.App.logger.warn("`Utils.Logger.ServerWriter` has been made private since 7.10 and you will not be able to access it in the next release. Please do not use it anymore"),i.ServerWriter}}),Object.defineProperty(o,"ConsoleWriter",{get:function(){return SUGAR.App.logger.warn("`Utils.Logger.ConsoleWriter` has been made private since 7.10 and you will not be able to access it in the next release. Please do not use it anymore"),i.ConsoleWriter}}),e.exports=function(e){return r=e||{},o}},function(e,t,n){"use strict";var r=n(12);!function(e,t){var n,r=6e4,i=e([]),a={update:function(n){(n=n||i).each(function(n,r){var a,o=e(r),s=o.data("liveRelativeDate");if(s){a=s.date?o.data(s.date):o.attr("datetime");var l=o.html(),u=t(a).fromNow();if(l!==u){var c=e.Event("change.liveRelativeDate");o.trigger(c,[l,u]),c.isDefaultPrevented()||o.html(u)}}else i=i.not(r)})},pause:function(){clearTimeout(n),n=null},resume:function(){n||function e(){i.length&&(n=setTimeout(e,r),a.update())}()},interval:function(e){if(void 0===e)return r;r=e}},o={add:function(e,t){return e&&0!==e.length?(t=t||{},e.data("liveRelativeDate",JSON.stringify(t)),i=i.add(e),a.resume(),e):e},destroy:function(e){return i=i.not(e),e.removeAttr("data-live-relative-date"),e},isLiveRelativeDate:function(t){var n=!0;return e.each(t,function(t){if(void 0===e(t).data("liveRelativeDate"))return n=!1,!0}),n}};e.liverelativedate=a,e.fn.liverelativedate=function(e,t){return o[e]||(t=e,e="add"),o[e](this,t)}}(window.jQuery||window.Zepto,r)},function(e,t,n){"use strict";!function(e){e.analytics=e.analytics||{},e.analytics.connectors=e.analytics.connectors||{},e.analytics.connectors.Pendo={initialize:function(){},start:function(e,t){!function(e){!function(t,n,r,i,a){var o,s,l,u,c;for((a=t[i]=t[i]||{})._q=[],s=0,l=(o=["initialize","identify","updateOptions","pageLoad"]).length;s<l;++s)!function(e){a[e]=a[e]||function(){a._q[e===o[0]?"unshift":"push"]([e].concat([].slice.call(arguments,0)))}}(o[s]);(u=n.createElement(r)).async=!0,u.src="https://cdn.pendo.io/agent/static/"+e+"/pendo.js",(c=n.getElementsByTagName(r)[0]).parentNode.insertBefore(u,c)}(window,document,"script","pendo")}(e)},configure:function(){var t=e.user.get("site_user_id")||"unknown_user",n=e.user.get("type")||"unknown_user_type",r=e.user.getLanguage()||"unknown_language",i=e.user.get("roles");i=Array.isArray(i)?i.length>=1?i.join(","):"no_roles":"unknown_roles";var a=e.metadata.getServerInfo(),o=a.site_id||"unknown_account",s=_.isFunction(e.utils.getSiteUrl)?e.utils.getSiteUrl():"unknown_domain",l=a.version||"unknown_version",u=a.flavor||"unknown_edition";pendo.initialize({visitor:{id:t,user_type:n,language:r,roles:i},account:{id:o,domain:s,edition:u,version:l}})},track:function(e,t){pendo.track(e,t)},trackPageView:function(e){},trackEvent:function(e){},set:function(e,t){}}}(SUGAR.App)},function(e,t,n){"use strict";!function(e){e.analytics=e.analytics||{},e.analytics.connectors=e.analytics.connectors||{},e.analytics.connectors.GoogleAnalytics={initialize:function(){SUGAR.App.logger.warn("The method App.analytics.connectors.GoogleAnalytics.initialize() is deprecated and will be removed in a future Sugar release."),function(e,t,n,r,i,a,o){e.GoogleAnalyticsObject=i,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,a=t.createElement(n),o=t.getElementsByTagName(n)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(a,o)}(window,document,"script",0,"ga")},start:function(e,t){SUGAR.App.logger.warn("The method App.analytics.connectors.GoogleAnalytics.start() is deprecated and will be removed in a future Sugar release."),t.gaOptions=t.gaOptions||{},_.defaults(t.gaOptions,{cookieDomain:"none",forceSSL:!0}),ga("create",e,t.gaOptions),this.enableIPAnonymization(),t.optOut&&(window["ga-disable-"+e]=!0)},trackPageView:function(e){SUGAR.App.logger.warn("The method App.analytics.connectors.GoogleAnalytics.trackPageView() is deprecated and will be removed in a future Sugar release."),ga("send","pageview",e)},trackEvent:function(e){SUGAR.App.logger.warn("The method App.analytics.connectors.GoogleAnalytics.trackEvent() is deprecated and will be removed in a future Sugar release."),ga("send","event",e.category,e.action,e.label,e.value)},set:function(e,t){SUGAR.App.logger.warn("The method App.analytics.connectors.GoogleAnalytics.set() is deprecated and will be removed in a future Sugar release."),ga("set",e,t)},enableIPAnonymization:function(){SUGAR.App.logger.warn("The method App.analytics.connectors.GoogleAnalytics.enableIPAnonymization() is deprecated and will be removed in a future Sugar release."),this.set("anonymizeIp",!0)}}}(SUGAR.App)},function(e,t,n){"use strict";!function(e){var t={eventSplitter:/\s{2,}/,currentViewId:"",_eventsHash:{click:"[track^=click]",swipeleft:"[track^=swipeleft]",swiperight:"[track^=swiperight]"},init:function(){if(!(e.config.analytics&&e.config.analytics.enabled&&e.config.analytics.connector&&"GoogleAnalytics"!==e.config.analytics.connector&&e.analytics.connectors[e.config.analytics.connector]))return this.trackPageView=function(){},this.trackEvent=function(){},void(this.track=function(){});var t=this;e.on("app:init",function(){e.events.register("app:analytics:init",this),e.analytics.connector=e.analytics.connectors[e.config.analytics.connector],e.analytics.connector.initialize(),_.each(t._eventsHash,function(n,r){$("html").on(r,n,function(n){var i=t._parseTrackTag($(this).attr("track"));e.analytics.trackEvent(r,i.action,n,i.value)})})}).on("app:start",function(){e.trigger("app:analytics:init");var t=e.config.analytics.id;_.isObject(t)&&(e.logger.warn("Analytics config id needs to be a valid tracking ID."),t=e.isNative?t.native:t.web),e.analytics.connector.start(t,e.config.analytics)}).on("app:sync:complete",function(){e.analytics.configure()}).on("app:locale:change",function(){e.analytics.connector.set("language",e.user.getLanguage())}).on("app:view:change",function(t,n){e.analytics.currentViewId=t+(n.module?"/"+n.module:""),e.analytics.trackPageView(e.analytics.currentViewId)})},configure:function(){if(_.isFunction(e.analytics.connector.configure))e.analytics.connector.configure();else{var t=e.metadata.getServerInfo();e.analytics.connector.set("appName","SugarCRM:"+e.config.platform+":"+(t.flavor||"").toLowerCase()),e.analytics.connector.set("appVersion",t.version+":"+t.build)}},track:function(t,n){if(t=t||"",n=n||{},_.isFunction(e.analytics.connector.track))e.analytics.connector.track(t,n);else if("pageview"!==t||_.isEmpty(n.page)){if("event"===t){var r=_.isEmpty(n.category)?"":n.category,i=_.isEmpty(n.action)?"":n.action,a=_.isEmpty(n.event)?null:n.event,o=_.isEmpty(n.value)?"":n.value;e.analytics.trackEvent(r,i,a,o)}}else e.analytics.trackPageView(n.page)},trackPageView:function(t){e.logger.debug("GAN-page: "+t),e.analytics.connector.trackPageView(t)},trackEvent:function(t,n,r,i){n=(_.isEmpty(n)&&r?r.currentTarget.id:n)||"[unknown]",e.logger.debug("GAN-event: "+t+":"+n+"("+i+") on "+this.currentViewId),e.analytics.connector.trackEvent({category:t,action:n,label:this.currentViewId,value:i})},_parseTrackTag:function(e){var t={action:"",value:null},n=e.split(":");if(!n[1])return t;var r=n[1].split(".");return t.action=r[0],r[1]&&(t.value=r[1]),t},_attachEvents:function(t,n,r,i){t&&(i.off(t),i.on(t,function(t){e.analytics.trackEvent(t.type,n,t,r&&$(this).hasClass(r)?1:0)}))},dispose:function(){e.off(null,null,this)}};e.augment("analytics",t)}(SUGAR.App)},function(e,t){var n,r={read:"GET",update:"PUT",create:"POST",delete:"DELETE"},i=["read","update","create","delete"],a=function(e){e()},o={},s={},l=function(e,t,n){if((e=e||{}).xhr=e.xhr||{},this.request=e,this.status=e.xhr.status,this.responseText=e.xhr.responseText,this.textStatus=t,this.errorThrown=n,"string"==typeof this.responseText&&this.responseText.length>0)try{var r=this.request.xhr.getResponseHeader("Content-Type");r&&0===r.indexOf("application/json")&&(this.payload=JSON.parse(this.responseText),this.code=this.payload.error,this.message=this.payload.error_message)}catch(e){}};_.extend(l.prototype,{toString:function(){return"HTTP error: "+this.status+"\ntype: "+this.textStatus+"\nerror: "+this.errorThrown+"\nresponse: "+this.responseText+"\ncode: "+this.code+"\nmessage: "+this.message}});var u=function(e,t){this.params=e,this.debug=t,this.state={}};_.extend(u.prototype,{execute:function(e,t,n){if(e&&(this.params.headers=this.params.headers||{},this.params.headers["OAuth-Token"]=e),t&&(this.params.headers=this.params.headers||{},this.params.headers["X-Metadata-Hash"]=t),n&&(this.params.headers=this.params.headers||{},this.params.headers["X-Userpref-Hash"]=n),this.state=_.extend(this.state,s),this.debug){console.log("====== Ajax Request Begin ======"),console.log(this.params.type+" "+this.params.url);var r=this.params.data?JSON.parse(this.params.data):null;r&&r.password&&(r.password="***"),console.log("Payload: ",this.params.data?r:"N/A");var i=$.extend({},this.params);delete i.data,console.log("params: ",i),console.log("====== Request End ======")}this.xhr=$.ajax(this.params)}});var c=function(e,t){var n=e.contents||{};this.status=e.status||200,this.statusText=e.status_text||"",this.responseText=_.isObject(n)?JSON.stringify(n):n,this.readyState=4,this._parent=t.xhr,this.headers=e.headers};function h(e){var t,n,h,d,f,p,m,g,v,y=null,b=null,w=null,x=null,k=[],A={},S=0;if(h=e&&e.keyValueStore,t=e&&e.serverUrl||"/rest/v10",m=e&&e.defaultErrorHandler||null,n=e&&e.platform||"",d=e&&e.clientID||"sugar",f=1e3*(e&&e.timeout||30),g=!1,v=!(e&&e.disableBulkApi),e&&e.externalLoginUICallback&&_.isFunction(e.externalLoginUICallback)&&(y=e.externalLoginUICallback),h){if(!$.isFunction(h.set)||!$.isFunction(h.get)||!$.isFunction(h.cut))throw new Error("Failed to initialize Sugar API: key/value store provider is invalid");var T=function(){b=h.get("AuthAccessToken"),w=h.get("AuthRefreshToken"),x=h.get("DownloadToken")};$.isFunction(h.initAsync)?h.initAsync(T):T(),$.isFunction(h.on)&&h.on("cache:clean",function(e){e(["AuthAccessToken","AuthRefreshToken","DownloadToken"])})}p=!1;var E=function(e){e?(b=e.access_token,w=e.refresh_token,x=e.download_token,h&&(h.set("AuthAccessToken",b),h.set("AuthRefreshToken",w),h.set("DownloadToken",x))):(b=null,w=null,x=null,h&&(h.cut("AuthAccessToken"),h.cut("AuthRefreshToken"),h.cut("DownloadToken")))};return{clientID:d,serverUrl:t,defaultErrorHandler:m,timeout:f,debug:!1,abortRequest:function(e){var t=A[e];t&&(t.aborted=!0,t.xhr&&(t.xhr.aborted=!0,t.xhr.abort()))},getRequest:function(e){return A[e]},setRefreshTokenSuccessCallback:function(e){_.isFunction(e)&&(a=e)},call:function(e,t,i,s,c){var h,d,f=r[e],m=this.getOAuthToken();s=s||{};var y={type:f,dataType:"json",headers:{},timeout:(c=c||{}).timeout||this.timeout,contentType:"application/json"};if(c.url||(y.url=t),s.success&&(y.success=function(e,t){h.status=e&&e.status?e.status:t,s.success(e,h)}),y.complete=function(){A[h.uid]=null,!p&&s.complete&&s.complete(h)},!0===c.iframe?m&&((i=i||{})["OAuth-Token"]=m,y.data=i):!i||"create"!=e&&"update"!=e&&"delete"!=e||(i instanceof FormData?y.data=i:y.data=JSON.stringify(i)),"GET"!==y.type&&(y.processData=!1),h=new u(_.extend(y,c),this.debug),y.error=function(e,t,r){return function(i,o,s){if(!i.aborted&&!t.aborted){var u,c=new l(t,o,s),h=function(){if(!k.length||e.refreshingToken(t.params.url))r.error?r.error(c):$.isFunction(e.defaultErrorHandler)&&e.defaultErrorHandler(c);else for(var n=0;n<k.length;++n)k[n]._oerror&&k[n]._oerror(c);e.setRefreshingToken(!1)},d=!0;if(e.needRefreshAuthToken(t.params.url,c.code)){if(t._dequeuing)return t._oerror&&t._oerror(c),void e.resetAuth();k.push(t),e.setRefreshingToken(!0);var f={complete:function(){if(d)for(u=k.shift();u;)u._ocomplete&&u._ocomplete.call(this,u),u=k.shift()},success:function(){e.setRefreshingToken(!1),d=!1,a(function(){for(u=k.shift();u;)u._dequeuing=!0,u.execute(e.getOAuthToken()),u=k.shift()})},error:h};if(!("crosstab"in window&&crosstab.supported))return void e.login(null,{refresh:!0},{complete:f.complete,success:f.success,error:f.error});crosstab(function(){crosstab.on("auth:refresh:complete",function(e){switch(e.data){case"success":f.success();break;case"error":f.error();break;case"complete":f.complete(),crosstab.off("auth:refresh:complete")}}),crosstab.broadcastMaster("auth:refresh")})}else e.needQueue(t.params.url)?k.push(t):g&&401==c.status&&c.payload&&c.payload.url&&c.payload.platform==n?e.handleExternalLogin(t,c,h):h()}}}(this,h,s),h._oerror=s.error,h._ocomplete=s.complete,h.uid=S++,A[h.uid]=h,d=[m,c.skipMetadataHash?null:this.getMetadataHash(),c.skipMetadataHash?null:this.getUserprefHash()],this.isLoginRequest(t))h.execute();else if(this.isAuthRequest(t))h.execute(m);else if(y.bulk&&v){var b=o[y.bulk]||[];o[y.bulk]||(o[y.bulk]=b),b.push({request:h,args:d})}else h.execute.apply(h,d);return h},triggerBulkCall:function(e){if(v){var t=o[e=e||!0],n=[],r=_.last(this.serverUrl.split("/"));t&&(_.each(t,function(e){var t=e.request.params,i=e.args,a=i[0],o=i[1],s=i[2];a&&(t.headers=t.headers||{},t.headers["OAuth-Token"]=a),o&&(t.headers=t.headers||{},t.headers["X-Metadata-Hash"]=o),s&&(t.headers=t.headers||{},t.headers["X-Userpref-Hash"]=s),_.isEmpty(t.url)||(t.url=r+t.url.substring(this.serverUrl.length)),n.push(t)},this),this.call("create",this.buildURL("bulk"),{requests:n},{success:function(e,n){_.each(t,function(t,r){var i=t.request,a=e[r],o=a.contents||{},s=new c(a,n);i.xhr=s,!0===i.aborted||o.error?(i.status="error",_.isFunction(i.params.error)&&i.params.error.call(i.params,i,"error",s.statusText)):_.isFunction(i.params.success)&&i.params.success.call(i.params,o,"success"),_.isFunction(i.params.complete)&&i.params.complete.call(i.params,i)})}}),o[e]=null)}},clearBulkQueue:function(){o={}},buildURL:function(e,t,n,r){r=r||{};var a,o=[];return o.push(this.serverUrl),e&&o.push(e),"create"!=t&&n&&n.id&&o.push(n.id),n&&n.link&&"file"!=t&&(o.push("link"),_.isString(n.link)&&o.push(n.link)),t&&-1===$.inArray(t,i)&&o.push(t),n&&(n.relatedId&&o.push(n.relatedId),"file"==t&&n.field?(o.push(n.field),n.fileId&&o.push(n.fileId)):"collection"===t&&n.field&&o.push(n.field)),a=o.join("/"),_.each(r,function(e,t){null==e&&delete r[t]}),(r=$.param(r)).length>0&&(a+="?"+r),a},buildFileURL:function(e,t){var r={};return t=t||{},e.field&&!1!==t.htmlJsonFormat&&(r.format="sugar-html-json"),!0===t.deleteIfFails&&(r.delete_if_fails=!0),t.passDownloadToken&&(r.download_token=this.getDownloadToken()),_.isUndefined(t.forceDownload)||(r.force_download=t.forceDownload?1:0),!0===t.cleanCache&&(r[(new Date).getTime()]=1),void 0!==t.platform?r.platform=t.platform:n&&(r.platform=n),!0===t.keep&&(r.keep=1),this.buildURL(e.module,"file",e,r)},getOAuthToken:function(){return h&&h.get("AuthAccessToken")||b},getRefreshToken:function(){return h&&h.get("AuthRefreshToken")||w},getDownloadToken:function(){return h&&h.get("DownloadToken")||x},getMetadataHash:function(){return h?h.get("meta:hash"):null},getUserprefHash:function(){return h?h.get("userpref:hash"):null},getMetadata:function(e){if(_.isString(e)){console.warn("`Api::getMetadata` has changed signature and will drop support for the old signature in a future release. Please update your code.");var t=arguments[4]||{};e={types:arguments[1],modules:arguments[2],callbacks:arguments[3],public:t.getPublic,params:t.params}}var r=(e=e||{}).params||{};e.types&&(r.type_filter=e.types.join(",")),e.modules&&(r.module_filter=e.modules.join(",")),n&&(r.platform=n);var i="read";e.public?i="public":(e.callbacks=e.callbacks||{},e.callbacks.success=_.wrap(e.callbacks.success,function(e,t,n){t&&(this._serverInfo=t.server_info),e&&e(t,n)})),r.module_dependencies=1;var a=this.buildURL("metadata",i,null,r);return this.call(i,a,null,e.callbacks)},records:function(e,t,n,r,i,a){var o=this.buildURL(t,e,n,r);return this.call(e,o,n,i,a)},relationships:function(e,t,n,r,i,a){var o=this.buildURL(t,null,n,r);return this.call(e,o,n.related,i,a)},collection:function(e,t,n,r,i){var a=this.buildURL(e,"collection",t,n);return this.call("read",a,null,r,i)},favorite:function(e,t,n,r,i){var a=n?"favorite":"unfavorite",o=this.buildURL(e,a,{id:t});return this.call("update",o,null,r,i)},follow:function(e,t,n,r,i){r=r||{},i=i||{};var a=n?"create":"delete",o=n?"subscribe":"unsubscribe",s=this.buildURL(e,o,{id:t});return this.call(a,s,null,r,i)},enumOptions:function(e,t,n,r){var i=this.buildURL(e+"/enum/"+t);return this.call("read",i,null,n,r)},bulk:function(e,t,n){var r=this.buildURL("bulk");return this.call("create",r,e,t,n)},fileDownload:function(e,t,n){t=t||{},n=n||{};var r={success:function(r){n.iframe?n.iframe.prepend('<iframe class="hide" src="'+e+'"></iframe>'):window.location.href=e,_.isFunction(t.success)&&t.success.apply(arguments)}};return _.isFunction(t.error)&&(r.error=t.error),_.isFunction(t.complete)&&(r.complete=t.complete),this.call("read",this.buildURL("ping"),{},r,{processData:!1})},xhrDownloadFile:function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){var e,r,i,a,o,s,l,u="";200===this.status&&(e=n.getResponseHeader("Content-Disposition"),i=n.getResponseHeader("Content-Type"),e&&-1!==e.indexOf("attachment")&&null!=(r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(e))&&r[1]&&(u=r[1].replace(/['"]/g,"")),a="function"==typeof File?new File([this.response],u,{type:i}):new Blob([this.response],{type:i}),void 0!==window.navigator.msSaveBlob?window.navigator.msSaveBlob(a,u):(o=window.URL||window.webkitURL,s=o.createObjectURL(a),u?((l=document.createElement("a")).download=u,l.target="_blank",l.href=s,document.body.appendChild(l),l.click()):window.location=s,setTimeout(function(){o.revokeObjectURL(s)},100)),_.isFunction(t)&&t(u))},n.setRequestHeader("OAuth-Token",this.getOAuthToken()),n.setRequestHeader("Content-type","application/json"),n.send()},file:function(e,t,n,r,i){let a=new FormData;if(t.field&&n){let e=n[0];!_.isUndefined(e)&&e.files&&e.files.length&&a.append(t.field,e.files[0])}return(i=i||{}).htmlJsonFormat=!1,!1!==i.deleteIfFails&&(i.deleteIfFails=!0),r.success=_.wrap(r.success,function(e,t){t.error&&_.isFunction(r.error)?r.error(t):_.isFunction(e)&&e(t)}),this.call(e,this.buildFileURL(t,i),a,r,{processData:!1,contentType:!1})},count:function(e,t,n,r){r=r||{};var i=this.buildURL(e,"count",t,r);return this.call("read",i,null,n)},exportRecords:function(e,t,r,i){var a=this,o=this.buildURL(e.module,"record_list");return i=i||{},this.call("create",o,{records:e.uid},{success:function(o){e=_.omit(e,["uid","module"]),void 0!==i.platform?e.platform=i.platform:n&&(e.platform=n),a.fileDownload(a.buildURL(o.module_name,"export",{relatedId:o.id},e),r,{iframe:t})}})},search:function(e,t,n){var r=null;(n=n||{}).data&&(r=n.data,delete n.data);var i="read";n.fetchWithPost&&(i="create");var a=n.useNewApi?"globalsearch":"search",o=this.buildURL(null,a,null,e);return this.call(i,o,r,t,n)},login:function(e,t,r){var i,o,s,l,u=this;return e=e||{},r=r||{},o=function(e){E(e),g&&(u.setRefreshingToken(!1),a(function(){for(var e=k.shift();e;)e._dequeuing=!0,e.execute(u.getOAuthToken()),e=k.shift()})),r.success&&r.success(e)},s=function(e){E(),r.error&&r.error(e)},t&&t.refresh?i=_.extend({grant_type:"refresh_token",client_id:this.clientID,client_secret:"",refresh_token:this.getRefreshToken(),platform:n||"base"},t):(i=_.extend({grant_type:"password",username:e.username,password:e.password,client_id:this.clientID,platform:n||"base",client_secret:""},t)).client_info=t,"create",l=this.buildURL("oauth2","token",i,{platform:n}),this.call("create",l,i,{success:o,error:s,complete:r.complete})},me:function(e,t,n,r){var i=this.buildURL("me",e,t,n);return this.call(e,i,t,r)},css:function(e,t,n){var r={platform:e,themeName:t},i=this.buildURL("css","read",{},r);return this.call("read",i,{},n)},logout:function(e,t){e=e||{};var n={token:this.getOAuthToken(),refresh_token:this.getRefreshToken()};this._serverInfo&&"6"===this._serverInfo.version.charAt(0)&&delete n.refresh_token;var r=this.buildURL("oauth2","logout",n),i=e.complete;return e.complete=function(){E(),i&&i()},this.call("create",r,n,e,t)},ping:function(e,t,r){return this.call("read",this.buildURL("ping",e,null,{platform:n}),null,t,_.extend({skipMetadataHash:!0},r||{}))},signup:function(e,t,n){var r=e;r.client_info=t;var i=this.buildURL("Leads","register",r);return this.call("create",i,r,n)},verifyPassword:function(e,t){var n={password_to_verify:e},r=this.buildURL("me/password","create");return this.call("create",r,n,t)},updatePassword:function(e,t,n){var r={new_password:t,old_password:e},i=this.buildURL("me/password","update");return this.call("update",i,r,n)},info:function(e){var t=this.buildURL("ServerInfo");return this.call("read",t,null,e)},isAuthenticated:function(){return"string"==typeof this.getOAuthToken()&&this.getOAuthToken().length>0},resetAuth:function(){E()},needRefreshAuthToken:function(e,t){return!p&&"string"==typeof this.getRefreshToken()&&this.getRefreshToken().length>0&&!this.isAuthRequest(e)&&"invalid_grant"===t},needQueue:function(e){return p&&!this.isAuthRequest(e)},isAuthRequest:function(e){return new RegExp("/oauth2/").test(e)},isLoginRequest:function(e){return new RegExp("/oauth2/token").test(e)},refreshingToken:function(e){return p&&this.isAuthRequest(e)},setRefreshingToken:function(e){p=e},handleExternalLogin:function(e,t,n){var r=this;r.isLoginRequest(e.params.url)||k.push(e),r.setRefreshingToken(!0),$(window).on("message",function(e){if(e.originalEvent.origin&&e.originalEvent.origin===window.location.origin){var t=$.parseJSON(e.originalEvent.data);if(t.external_login){$(window).on("message",null);var i=!t||!t.access_token;i&&n(),r.setRefreshingToken(!1),E(t),i||a(function(){for(var e=k.shift();e;)e.execute(r.getOAuthToken()),e=k.shift()})}}}),_.isFunction(y)&&y(t.payload.url,"_blank","width=600,height=400,centerscreen=1,resizable=1")},isExternalLogin:function(){return g},setExternalLogin:function(e){g=e},setExternalLoginUICallback:function(e){_.isFunction(e)&&(y=e)},getStateProperty:function(e){return s[e]},setStateProperty:function(e,t){s[e]=t},clearStateProperty:function(e){delete s[e]},resetState:function(){s={}}}}_.extend(c.prototype,{isResolved:function(){return this._parent.isResolved()},getResponseHeader:function(e){return this.headers[e]},getAllResponseHeaders:function(){return _.reduce(this.headers,function(e,t,n){return e.concat(n+": "+t+"\n")},"")}}),e.exports={getInstance:function(e){return n||this.createInstance(e)},createInstance:function(e){return n=new h(e),"crosstab"in window&&crosstab.supported?(crosstab(function(){crosstab.on("auth:refresh",_.bind(function(){if(!this._runningRefreshToken){this._runningRefreshToken=!0;var e=this;this.login(null,{refresh:!0},{complete:function(){crosstab.broadcast("auth:refresh:complete","complete")},success:function(){delete e._runningRefreshToken,crosstab.broadcast("auth:refresh:complete","success")},error:function(){delete e._runningRefreshToken,crosstab.broadcast("auth:refresh:complete","error")}})}},n))}),n):n},HttpError:l,HttpRequest:u}},function(e,t,n){var r=window.SUGAR,i=n(15),a=n(34),o=n(33),s=n(0),l=n(32),u=n(2),c=n(22),h=n(31);(r=r||{}).App=function(){var e,t={},n=!1,d=[],f=function(e){return e instanceof $?e:$(e)};return{init:function(t){e=e||_.extend(this,new function(e){var t=_.uniqueId("SugarApp_");return e=e||{},_.extend({appId:t,$rootEl:f(e.el||"body"),$contentEl:f(e.contentEl||"#content"),additionalComponents:{}},this,Backbone.Events)}(t)),_.extend(e,i),e.events.register("app:init",this),e.events.register("app:start",this),e.events.register("app:sync",this),e.events.register("app:sync:complete",this),e.events.register("app:sync:error",this),e.events.register("app:sync:public:error",this),e.events.register("app:login",this),e.events.register("app:login:success",this),e.events.register("app:logout",this),e.events.register("app:view:change",this),e.events.register("app:locale:change",this),e.events.register("lang:direction:change",this),e.cache&&e.cache.init(this);var n=this[s.capitalize(e.config?e.config.appId:"")+"Controller"]||l;return this.controller=new n,e.api=r.Api.getInstance({defaultErrorHandler:t&&t.defaultErrorHandler?t.defaultErrorHandler:r.App.error.handleHttpError,serverUrl:e.config.serverUrl,platform:e.config.platform,timeout:e.config.serverTimeout,keyValueStore:e[e.config.authStore||"cache"],clientID:e.config.clientID,disableBulkApi:e.config.disableBulkApi,externalLoginUICallback:t&&t.externalLoginUICallback}),this._init(t),e},_init:function(t){var n=this,r=function(r){e&&(r?n.trigger("app:sync:public:error",r):(n._initModules(),t.silent||(e.controller.setElement(e.$rootEl),e.trigger("app:init",n)),t.callback&&_.isFunction(t.callback)&&t.callback(e)))},i=function(t){e.config.loadCss?e.loadCss(t):t()};if(!1!==e.config.syncConfig){var a={getPublic:!0};i(function(){h.sync(r,a)})}else i(function(){r()});return e},_initModules:function(){_.each(t,function(e){_.isFunction(e.init)&&e.init(this)},this)},_loadConfig:function(){this.logger.warn("`App._loadConfig` is deprecated since 7.10. Please use `App.setConfig` instead."),e.config=e.config||{},e.config=_.extend(e.config,h.getConfig())},setConfig:function(e){this.config=this.config||{},this.config=_.extend(this.config,e),this.logger=a(this.config.logger),this.cache=o({uniqueKey:this.config.uniqueKey,env:this.config.env,appId:this.config.appId})},loadCss:function(t){e.api.css(e.config.platform,e.config.themeName,{success:function(n){"url"===e.config.loadCss?_.each(n.url,function(e){$("<link>").attr({rel:"stylesheet",href:s.buildUrl(e)}).appendTo("head")}):_.each(n.text,function(e){$("<style>").html(e).appendTo("head")}),_.isFunction(t)&&t()}})},start:function(){e.events.registerAjaxEvents(),e.controller.loadAdditionalComponents(e.config.additionalComponents),e.trigger("app:start",this),c.start()},destroy:function(){Backbone.history&&Backbone.history.stop(),e=null},augment:function(n,r,i){this[n]=r,t[n]=r,"config"===n&&this.setConfig(r),i&&r.init&&_.isFunction(r.init)&&r.init.call(r,e)},sync:function(t){var r=this;if((t=t||{}).getPublic)return r.syncPublic(t);t.callback&&d.push(t.callback),n||(n=!0,async.waterfall([function(n){if(r.isSynced=!1,r.trigger("app:sync"),!t.noUserUpdate&&(t.language||r.cache.get("langHasChanged"))){var i=t.language||u.getLanguage();r.user.updateLanguage(i,n),e.cache.cut("langHasChanged")}else n()},function(e){async.parallel([function(e){r.user.load(e)},function(e){r.metadata.sync(function(t){r.data.declareModels(),e(t)},t)}],function(t){e(t)})},function(e){var t=r.metadata.getServerInfo();r.config.sugarLogic=r.config.sugarLogic||{},t&&r.config.sugarLogic.enabled&&r.utils.versionCompare(t.version,r.config.sugarLogic.minServerVersion,">=")?r.fetchSugarLogic(e):(r.config.sugarLogic.enabled=!1,e())}],function(e){e?r.trigger("app:sync:error",e):(r.isSynced=!0,r.trigger("app:sync:complete"),window.jQuery&&(jQuery.migrateMute=r.logger.getLevel().value>r.logger.levels.WARN.value)),_.each(d,function(t){t(e)}),n=!1,d=[]}))},syncPublic:function(e){(e=e||{}).getPublic=!0,this.metadata.sync(e.callback,e)},navigate:function(t,n,r){var i,a,o;t=t||e.controller.context,a=(n=n||t.get("model")).id,o=t.get("module")||n.module,i=this.router.buildRoute(o,a,r),this.router.navigate(i,{trigger:!0})},login:function(t,n,r){r=r||{},(n=n||{}).current_language=u.getLanguage(),e.api.login(t,n,{success:function(n){e.trigger("app:login:success",n,t.username),r.success&&r.success(n)},error:function(t){e.error.handleHttpError(t),r.error&&r.error(t)},complete:r.complete})},logout:function(t,n,r){var i,a;return i=(t=t||{}).complete,a=t.error,t.complete=function(t){e.trigger("app:logout",n),i&&i(t)},t.error=function(t){e.error.handleHttpError(t),a&&a(t)},e.api.logout(t,r)},fetchSugarLogic:function(t){e.config.sugarLogic.isDynamic?e.api.call("read",e.api.buildURL("ExpressionEngine","functions"),null,{success:function(n){e.cacheSugarLogicExpressions(n),e.loadSugarLogic(n,t)},error:function(e){t(e)}},{dataType:"application/text"}):t()},cacheSugarLogicExpressions:function(t){e.cache.set("sugarlogic",t)},_loadSugarLogic:function(){return e.cache.get("sugarlogic")},loadSugarLogic:function(t,n){return e.compileJs(t||e._loadSugarLogic(),n)},compileJs:function(e,t){try{eval.call(window,e),t&&t()}catch(e){return a.fatal("Failed to compile js"),t&&t(e),e}return null},isServerCompatible:function(e){var t,n,r,i=this.config.supportedServerFlavors,a=this.config.minServerVersion;return!(!_.isEmpty(i)||a)||(t=!!(_.isEmpty(i)||e&&_.contains(i,e.flavor)),n=!!(!a||e&&this.utils.versionCompare(e.version,a,">=")),!(!t||!n)||((r=n?{code:"server_flavor_incompatible",label:"ERR_SERVER_FLAVOR_INCOMPATIBLE"}:{code:"server_version_incompatible",label:"ERR_SERVER_VERSION_INCOMPATIBLE"}).server_info=e,r))},modules:t}}();var d=n(25);r.App.Context=d;var f={getContext:function(e){return r.App.logger.warn("The function `app.context.getContext()` is deprecated in 7.10. Please use the `new` keyword to create a context."),new d(e)}};r.App.augment("Bean",n(10)),r.App.augment("BeanCollection",n(11)),r.App.augment("MixedBeanCollection",n(23)),r.App.augment("error",n(21)),r.App.augment("context",f),r.App.augment("utils",s),r.App.augment("cookie",n(29)),r.App.augment("Controller",l),r.App.augment("events",n(5)),r.App.augment("acl",n(7)),r.App.augment("metadata",h),r.App.augment("currency",n(20)),r.App.augment("date",n(12)),r.App.augment("math",n(19)),r.App.augment("plugins",n(8)),_.mixin(n(28)),r.App.augment("user",n(1)),Handlebars.registerHelper(n(27)),r.App.augment("validation",n(24)),r.App.augment("data",n(14)),r.App.augment("lang",u),r.App.augment("template",n(4)),r.App.Router=n(26),r.App.augment("routing",c);var p=n(6);r.App.augment("view",p),p.Component=n(9),r.App.augment("alert",n(13)),p.AlertView=n(30),p.Field=n(18),p.Layout=n(17),p.View=n(16),e.exports=r},function(e,t,n){"use strict";var r=n(40);window.SUGAR=r,r.Api=n(39),n(0),n(12),n(19),n(20),n(15),n(33),n(5),n(21),n(4),n(25),n(32),n(26),n(22),n(2),n(31),n(7),n(1),n(8),n(34),n(10),n(11),n(23),n(14),n(24),n(27),n(6),n(9),n(16),n(18),n(17),n(13),n(28)},function(e,t){e.exports="/* big.js v3.1.3 https://github.com/MikeMcl/big.js/LICENCE */\r\n;(function (global) {\r\n    'use strict';\r\n\r\n/*\r\n  big.js v3.1.3\r\n  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\r\n  https://github.com/MikeMcl/big.js/\r\n  Copyright (c) 2014 Michael Mclaughlin <M8ch88l@gmail.com>\r\n  MIT Expat Licence\r\n*/\r\n\r\n/***************************** EDITABLE DEFAULTS ******************************/\r\n\r\n    // The default values below must be integers within the stated ranges.\r\n\r\n    /*\r\n     * The maximum number of decimal places of the results of operations\r\n     * involving division: div and sqrt, and pow with negative exponents.\r\n     */\r\n    var DP = 20,                           // 0 to MAX_DP\r\n\r\n        /*\r\n         * The rounding mode used when rounding to the above decimal places.\r\n         *\r\n         * 0 Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\r\n         * 1 To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\r\n         * 2 To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\r\n         * 3 Away from zero.                                  (ROUND_UP)\r\n         */\r\n        RM = 1,                            // 0, 1, 2 or 3\r\n\r\n        // The maximum value of DP and Big.DP.\r\n        MAX_DP = 1E6,                      // 0 to 1000000\r\n\r\n        // The maximum magnitude of the exponent argument to the pow method.\r\n        MAX_POWER = 1E6,                   // 1 to 1000000\r\n\r\n        /*\r\n         * The exponent value at and beneath which toString returns exponential\r\n         * notation.\r\n         * JavaScript's Number type: -7\r\n         * -1000000 is the minimum recommended exponent value of a Big.\r\n         */\r\n        E_NEG = -7,                   // 0 to -1000000\r\n\r\n        /*\r\n         * The exponent value at and above which toString returns exponential\r\n         * notation.\r\n         * JavaScript's Number type: 21\r\n         * 1000000 is the maximum recommended exponent value of a Big.\r\n         * (This limit is not enforced or checked.)\r\n         */\r\n        E_POS = 21,                   // 0 to 1000000\r\n\r\n/******************************************************************************/\r\n\r\n        // The shared prototype object.\r\n        P = {},\r\n        isValid = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i,\r\n        Big;\r\n\r\n\r\n    /*\r\n     * Create and return a Big constructor.\r\n     *\r\n     */\r\n    function bigFactory() {\r\n\r\n        /*\r\n         * The Big constructor and exported function.\r\n         * Create and return a new instance of a Big number object.\r\n         *\r\n         * n {number|string|Big} A numeric value.\r\n         */\r\n        function Big(n) {\r\n            var x = this;\r\n\r\n            // Enable constructor usage without new.\r\n            if (!(x instanceof Big)) {\r\n                return n === void 0 ? bigFactory() : new Big(n);\r\n            }\r\n\r\n            // Duplicate.\r\n            if (n instanceof Big) {\r\n                x.s = n.s;\r\n                x.e = n.e;\r\n                x.c = n.c.slice();\r\n            } else {\r\n                parse(x, n);\r\n            }\r\n\r\n            /*\r\n             * Retain a reference to this Big constructor, and shadow\r\n             * Big.prototype.constructor which points to Object.\r\n             */\r\n            x.constructor = Big;\r\n        }\r\n\r\n        Big.prototype = P;\r\n        Big.DP = DP;\r\n        Big.RM = RM;\r\n        Big.E_NEG = E_NEG;\r\n        Big.E_POS = E_POS;\r\n\r\n        return Big;\r\n    }\r\n\r\n\r\n    // Private functions\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of Big x in normal or exponential\r\n     * notation to dp fixed decimal places or significant digits.\r\n     *\r\n     * x {Big} The Big to format.\r\n     * dp {number} Integer, 0 to MAX_DP inclusive.\r\n     * toE {number} 1 (toExponential), 2 (toPrecision) or undefined (toFixed).\r\n     */\r\n    function format(x, dp, toE) {\r\n        var Big = x.constructor,\r\n\r\n            // The index (normal notation) of the digit that may be rounded up.\r\n            i = dp - (x = new Big(x)).e,\r\n            c = x.c;\r\n\r\n        // Round?\r\n        if (c.length > ++dp) {\r\n            rnd(x, i, Big.RM);\r\n        }\r\n\r\n        if (!c[0]) {\r\n            ++i;\r\n        } else if (toE) {\r\n            i = dp;\r\n\r\n        // toFixed\r\n        } else {\r\n            c = x.c;\r\n\r\n            // Recalculate i as x.e may have changed if value rounded up.\r\n            i = x.e + i + 1;\r\n        }\r\n\r\n        // Append zeros?\r\n        for (; c.length < i; c.push(0)) {\r\n        }\r\n        i = x.e;\r\n\r\n        /*\r\n         * toPrecision returns exponential notation if the number of\r\n         * significant digits specified is less than the number of digits\r\n         * necessary to represent the integer part of the value in normal\r\n         * notation.\r\n         */\r\n        return toE === 1 || toE && (dp <= i || i <= Big.E_NEG) ?\r\n\r\n          // Exponential notation.\r\n          (x.s < 0 && c[0] ? '-' : '') +\r\n            (c.length > 1 ? c[0] + '.' + c.join('').slice(1) : c[0]) +\r\n              (i < 0 ? 'e' : 'e+') + i\r\n\r\n          // Normal notation.\r\n          : x.toString();\r\n    }\r\n\r\n\r\n    /*\r\n     * Parse the number or string value passed to a Big constructor.\r\n     *\r\n     * x {Big} A Big number instance.\r\n     * n {number|string} A numeric value.\r\n     */\r\n    function parse(x, n) {\r\n        var e, i, nL;\r\n\r\n        // Minus zero?\r\n        if (n === 0 && 1 / n < 0) {\r\n            n = '-0';\r\n\r\n        // Ensure n is string and check validity.\r\n        } else if (!isValid.test(n += '')) {\r\n            throwErr(NaN);\r\n        }\r\n\r\n        // Determine sign.\r\n        x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\r\n\r\n        // Decimal point?\r\n        if ((e = n.indexOf('.')) > -1) {\r\n            n = n.replace('.', '');\r\n        }\r\n\r\n        // Exponential form?\r\n        if ((i = n.search(/e/i)) > 0) {\r\n\r\n            // Determine exponent.\r\n            if (e < 0) {\r\n                e = i;\r\n            }\r\n            e += +n.slice(i + 1);\r\n            n = n.substring(0, i);\r\n\r\n        } else if (e < 0) {\r\n\r\n            // Integer.\r\n            e = n.length;\r\n        }\r\n\r\n        // Determine leading zeros.\r\n        for (i = 0; n.charAt(i) == '0'; i++) {\r\n        }\r\n\r\n        if (i == (nL = n.length)) {\r\n\r\n            // Zero.\r\n            x.c = [ x.e = 0 ];\r\n        } else {\r\n\r\n            // Determine trailing zeros.\r\n            for (; n.charAt(--nL) == '0';) {\r\n            }\r\n\r\n            x.e = e - i - 1;\r\n            x.c = [];\r\n\r\n            // Convert string to array of digits without leading/trailing zeros.\r\n            for (e = 0; i <= nL; x.c[e++] = +n.charAt(i++)) {\r\n            }\r\n        }\r\n\r\n        return x;\r\n    }\r\n\r\n\r\n    /*\r\n     * Round Big x to a maximum of dp decimal places using rounding mode rm.\r\n     * Called by div, sqrt and round.\r\n     *\r\n     * x {Big} The Big to round.\r\n     * dp {number} Integer, 0 to MAX_DP inclusive.\r\n     * rm {number} 0, 1, 2 or 3 (DOWN, HALF_UP, HALF_EVEN, UP)\r\n     * [more] {boolean} Whether the result of division was truncated.\r\n     */\r\n    function rnd(x, dp, rm, more) {\r\n        var u,\r\n            xc = x.c,\r\n            i = x.e + dp + 1;\r\n\r\n        if (rm === 1) {\r\n\r\n            // xc[i] is the digit after the digit that may be rounded up.\r\n            more = xc[i] >= 5;\r\n        } else if (rm === 2) {\r\n            more = xc[i] > 5 || xc[i] == 5 &&\r\n              (more || i < 0 || xc[i + 1] !== u || xc[i - 1] & 1);\r\n        } else if (rm === 3) {\r\n            more = more || xc[i] !== u || i < 0;\r\n        } else {\r\n            more = false;\r\n\r\n            if (rm !== 0) {\r\n                throwErr('!Big.RM!');\r\n            }\r\n        }\r\n\r\n        if (i < 1 || !xc[0]) {\r\n\r\n            if (more) {\r\n\r\n                // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n                x.e = -dp;\r\n                x.c = [1];\r\n            } else {\r\n\r\n                // Zero.\r\n                x.c = [x.e = 0];\r\n            }\r\n        } else {\r\n\r\n            // Remove any digits after the required decimal places.\r\n            xc.length = i--;\r\n\r\n            // Round up?\r\n            if (more) {\r\n\r\n                // Rounding up may mean the previous digit has to be rounded up.\r\n                for (; ++xc[i] > 9;) {\r\n                    xc[i] = 0;\r\n\r\n                    if (!i--) {\r\n                        ++x.e;\r\n                        xc.unshift(1);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Remove trailing zeros.\r\n            for (i = xc.length; !xc[--i]; xc.pop()) {\r\n            }\r\n        }\r\n\r\n        return x;\r\n    }\r\n\r\n\r\n    /*\r\n     * Throw a BigError.\r\n     *\r\n     * message {string} The error message.\r\n     */\r\n    function throwErr(message) {\r\n        var err = new Error(message);\r\n        err.name = 'BigError';\r\n\r\n        throw err;\r\n    }\r\n\r\n\r\n    // Prototype/instance methods\r\n\r\n\r\n    /*\r\n     * Return a new Big whose value is the absolute value of this Big.\r\n     */\r\n    P.abs = function () {\r\n        var x = new this.constructor(this);\r\n        x.s = 1;\r\n\r\n        return x;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return\r\n     * 1 if the value of this Big is greater than the value of Big y,\r\n     * -1 if the value of this Big is less than the value of Big y, or\r\n     * 0 if they have the same value.\r\n    */\r\n    P.cmp = function (y) {\r\n        var xNeg,\r\n            x = this,\r\n            xc = x.c,\r\n            yc = (y = new x.constructor(y)).c,\r\n            i = x.s,\r\n            j = y.s,\r\n            k = x.e,\r\n            l = y.e;\r\n\r\n        // Either zero?\r\n        if (!xc[0] || !yc[0]) {\r\n            return !xc[0] ? !yc[0] ? 0 : -j : i;\r\n        }\r\n\r\n        // Signs differ?\r\n        if (i != j) {\r\n            return i;\r\n        }\r\n        xNeg = i < 0;\r\n\r\n        // Compare exponents.\r\n        if (k != l) {\r\n            return k > l ^ xNeg ? 1 : -1;\r\n        }\r\n\r\n        i = -1;\r\n        j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n        // Compare digit by digit.\r\n        for (; ++i < j;) {\r\n\r\n            if (xc[i] != yc[i]) {\r\n                return xc[i] > yc[i] ^ xNeg ? 1 : -1;\r\n            }\r\n        }\r\n\r\n        // Compare lengths.\r\n        return k == l ? 0 : k > l ^ xNeg ? 1 : -1;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new Big whose value is the value of this Big divided by the\r\n     * value of Big y, rounded, if necessary, to a maximum of Big.DP decimal\r\n     * places using rounding mode Big.RM.\r\n     */\r\n    P.div = function (y) {\r\n        var x = this,\r\n            Big = x.constructor,\r\n            // dividend\r\n            dvd = x.c,\r\n            //divisor\r\n            dvs = (y = new Big(y)).c,\r\n            s = x.s == y.s ? 1 : -1,\r\n            dp = Big.DP;\r\n\r\n        if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n            throwErr('!Big.DP!');\r\n        }\r\n\r\n        // Either 0?\r\n        if (!dvd[0] || !dvs[0]) {\r\n\r\n            // If both are 0, throw NaN\r\n            if (dvd[0] == dvs[0]) {\r\n                throwErr(NaN);\r\n            }\r\n\r\n            // If dvs is 0, throw +-Infinity.\r\n            if (!dvs[0]) {\r\n                throwErr(s / 0);\r\n            }\r\n\r\n            // dvd is 0, return +-0.\r\n            return new Big(s * 0);\r\n        }\r\n\r\n        var dvsL, dvsT, next, cmp, remI, u,\r\n            dvsZ = dvs.slice(),\r\n            dvdI = dvsL = dvs.length,\r\n            dvdL = dvd.length,\r\n            // remainder\r\n            rem = dvd.slice(0, dvsL),\r\n            remL = rem.length,\r\n            // quotient\r\n            q = y,\r\n            qc = q.c = [],\r\n            qi = 0,\r\n            digits = dp + (q.e = x.e - y.e) + 1;\r\n\r\n        q.s = s;\r\n        s = digits < 0 ? 0 : digits;\r\n\r\n        // Create version of divisor with leading zero.\r\n        dvsZ.unshift(0);\r\n\r\n        // Add zeros to make remainder as long as divisor.\r\n        for (; remL++ < dvsL; rem.push(0)) {\r\n        }\r\n\r\n        do {\r\n\r\n            // 'next' is how many times the divisor goes into current remainder.\r\n            for (next = 0; next < 10; next++) {\r\n\r\n                // Compare divisor and remainder.\r\n                if (dvsL != (remL = rem.length)) {\r\n                    cmp = dvsL > remL ? 1 : -1;\r\n                } else {\r\n\r\n                    for (remI = -1, cmp = 0; ++remI < dvsL;) {\r\n\r\n                        if (dvs[remI] != rem[remI]) {\r\n                            cmp = dvs[remI] > rem[remI] ? 1 : -1;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // If divisor < remainder, subtract divisor from remainder.\r\n                if (cmp < 0) {\r\n\r\n                    // Remainder can't be more than 1 digit longer than divisor.\r\n                    // Equalise lengths using divisor with extra leading zero?\r\n                    for (dvsT = remL == dvsL ? dvs : dvsZ; remL;) {\r\n\r\n                        if (rem[--remL] < dvsT[remL]) {\r\n                            remI = remL;\r\n\r\n                            for (; remI && !rem[--remI]; rem[remI] = 9) {\r\n                            }\r\n                            --rem[remI];\r\n                            rem[remL] += 10;\r\n                        }\r\n                        rem[remL] -= dvsT[remL];\r\n                    }\r\n                    for (; !rem[0]; rem.shift()) {\r\n                    }\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            // Add the 'next' digit to the result array.\r\n            qc[qi++] = cmp ? next : ++next;\r\n\r\n            // Update the remainder.\r\n            if (rem[0] && cmp) {\r\n                rem[remL] = dvd[dvdI] || 0;\r\n            } else {\r\n                rem = [ dvd[dvdI] ];\r\n            }\r\n\r\n        } while ((dvdI++ < dvdL || rem[0] !== u) && s--);\r\n\r\n        // Leading zero? Do not remove if result is simply zero (qi == 1).\r\n        if (!qc[0] && qi != 1) {\r\n\r\n            // There can't be more than one zero.\r\n            qc.shift();\r\n            q.e--;\r\n        }\r\n\r\n        // Round?\r\n        if (qi > digits) {\r\n            rnd(q, dp, Big.RM, rem[0] !== u);\r\n        }\r\n\r\n        return q;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this Big is equal to the value of Big y,\r\n     * otherwise returns false.\r\n     */\r\n    P.eq = function (y) {\r\n        return !this.cmp(y);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this Big is greater than the value of Big y,\r\n     * otherwise returns false.\r\n     */\r\n    P.gt = function (y) {\r\n        return this.cmp(y) > 0;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this Big is greater than or equal to the\r\n     * value of Big y, otherwise returns false.\r\n     */\r\n    P.gte = function (y) {\r\n        return this.cmp(y) > -1;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this Big is less than the value of Big y,\r\n     * otherwise returns false.\r\n     */\r\n    P.lt = function (y) {\r\n        return this.cmp(y) < 0;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this Big is less than or equal to the value\r\n     * of Big y, otherwise returns false.\r\n     */\r\n    P.lte = function (y) {\r\n         return this.cmp(y) < 1;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new Big whose value is the value of this Big minus the value\r\n     * of Big y.\r\n     */\r\n    P.sub = P.minus = function (y) {\r\n        var i, j, t, xLTy,\r\n            x = this,\r\n            Big = x.constructor,\r\n            a = x.s,\r\n            b = (y = new Big(y)).s;\r\n\r\n        // Signs differ?\r\n        if (a != b) {\r\n            y.s = -b;\r\n            return x.plus(y);\r\n        }\r\n\r\n        var xc = x.c.slice(),\r\n            xe = x.e,\r\n            yc = y.c,\r\n            ye = y.e;\r\n\r\n        // Either zero?\r\n        if (!xc[0] || !yc[0]) {\r\n\r\n            // y is non-zero? x is non-zero? Or both are zero.\r\n            return yc[0] ? (y.s = -b, y) : new Big(xc[0] ? x : 0);\r\n        }\r\n\r\n        // Determine which is the bigger number.\r\n        // Prepend zeros to equalise exponents.\r\n        if (a = xe - ye) {\r\n\r\n            if (xLTy = a < 0) {\r\n                a = -a;\r\n                t = xc;\r\n            } else {\r\n                ye = xe;\r\n                t = yc;\r\n            }\r\n\r\n            t.reverse();\r\n            for (b = a; b--; t.push(0)) {\r\n            }\r\n            t.reverse();\r\n        } else {\r\n\r\n            // Exponents equal. Check digit by digit.\r\n            j = ((xLTy = xc.length < yc.length) ? xc : yc).length;\r\n\r\n            for (a = b = 0; b < j; b++) {\r\n\r\n                if (xc[b] != yc[b]) {\r\n                    xLTy = xc[b] < yc[b];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        // x < y? Point xc to the array of the bigger number.\r\n        if (xLTy) {\r\n            t = xc;\r\n            xc = yc;\r\n            yc = t;\r\n            y.s = -y.s;\r\n        }\r\n\r\n        /*\r\n         * Append zeros to xc if shorter. No need to add zeros to yc if shorter\r\n         * as subtraction only needs to start at yc.length.\r\n         */\r\n        if (( b = (j = yc.length) - (i = xc.length) ) > 0) {\r\n\r\n            for (; b--; xc[i++] = 0) {\r\n            }\r\n        }\r\n\r\n        // Subtract yc from xc.\r\n        for (b = i; j > a;){\r\n\r\n            if (xc[--j] < yc[j]) {\r\n\r\n                for (i = j; i && !xc[--i]; xc[i] = 9) {\r\n                }\r\n                --xc[i];\r\n                xc[j] += 10;\r\n            }\r\n            xc[j] -= yc[j];\r\n        }\r\n\r\n        // Remove trailing zeros.\r\n        for (; xc[--b] === 0; xc.pop()) {\r\n        }\r\n\r\n        // Remove leading zeros and adjust exponent accordingly.\r\n        for (; xc[0] === 0;) {\r\n            xc.shift();\r\n            --ye;\r\n        }\r\n\r\n        if (!xc[0]) {\r\n\r\n            // n - n = +0\r\n            y.s = 1;\r\n\r\n            // Result must be zero.\r\n            xc = [ye = 0];\r\n        }\r\n\r\n        y.c = xc;\r\n        y.e = ye;\r\n\r\n        return y;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new Big whose value is the value of this Big modulo the\r\n     * value of Big y.\r\n     */\r\n    P.mod = function (y) {\r\n        var yGTx,\r\n            x = this,\r\n            Big = x.constructor,\r\n            a = x.s,\r\n            b = (y = new Big(y)).s;\r\n\r\n        if (!y.c[0]) {\r\n            throwErr(NaN);\r\n        }\r\n\r\n        x.s = y.s = 1;\r\n        yGTx = y.cmp(x) == 1;\r\n        x.s = a;\r\n        y.s = b;\r\n\r\n        if (yGTx) {\r\n            return new Big(x);\r\n        }\r\n\r\n        a = Big.DP;\r\n        b = Big.RM;\r\n        Big.DP = Big.RM = 0;\r\n        x = x.div(y);\r\n        Big.DP = a;\r\n        Big.RM = b;\r\n\r\n        return this.minus( x.times(y) );\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new Big whose value is the value of this Big plus the value\r\n     * of Big y.\r\n     */\r\n    P.add = P.plus = function (y) {\r\n        var t,\r\n            x = this,\r\n            Big = x.constructor,\r\n            a = x.s,\r\n            b = (y = new Big(y)).s;\r\n\r\n        // Signs differ?\r\n        if (a != b) {\r\n            y.s = -b;\r\n            return x.minus(y);\r\n        }\r\n\r\n        var xe = x.e,\r\n            xc = x.c,\r\n            ye = y.e,\r\n            yc = y.c;\r\n\r\n        // Either zero?\r\n        if (!xc[0] || !yc[0]) {\r\n\r\n            // y is non-zero? x is non-zero? Or both are zero.\r\n            return yc[0] ? y : new Big(xc[0] ? x : a * 0);\r\n        }\r\n        xc = xc.slice();\r\n\r\n        // Prepend zeros to equalise exponents.\r\n        // Note: Faster to use reverse then do unshifts.\r\n        if (a = xe - ye) {\r\n\r\n            if (a > 0) {\r\n                ye = xe;\r\n                t = yc;\r\n            } else {\r\n                a = -a;\r\n                t = xc;\r\n            }\r\n\r\n            t.reverse();\r\n            for (; a--; t.push(0)) {\r\n            }\r\n            t.reverse();\r\n        }\r\n\r\n        // Point xc to the longer array.\r\n        if (xc.length - yc.length < 0) {\r\n            t = yc;\r\n            yc = xc;\r\n            xc = t;\r\n        }\r\n        a = yc.length;\r\n\r\n        /*\r\n         * Only start adding at yc.length - 1 as the further digits of xc can be\r\n         * left as they are.\r\n         */\r\n        for (b = 0; a;) {\r\n            b = (xc[--a] = xc[a] + yc[a] + b) / 10 | 0;\r\n            xc[a] %= 10;\r\n        }\r\n\r\n        // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n\r\n        if (b) {\r\n            xc.unshift(b);\r\n            ++ye;\r\n        }\r\n\r\n         // Remove trailing zeros.\r\n        for (a = xc.length; xc[--a] === 0; xc.pop()) {\r\n        }\r\n\r\n        y.c = xc;\r\n        y.e = ye;\r\n\r\n        return y;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a Big whose value is the value of this Big raised to the power n.\r\n     * If n is negative, round, if necessary, to a maximum of Big.DP decimal\r\n     * places using rounding mode Big.RM.\r\n     *\r\n     * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\r\n     */\r\n    P.pow = function (n) {\r\n        var x = this,\r\n            one = new x.constructor(1),\r\n            y = one,\r\n            isNeg = n < 0;\r\n\r\n        if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\r\n            throwErr('!pow!');\r\n        }\r\n\r\n        n = isNeg ? -n : n;\r\n\r\n        for (;;) {\r\n\r\n            if (n & 1) {\r\n                y = y.times(x);\r\n            }\r\n            n >>= 1;\r\n\r\n            if (!n) {\r\n                break;\r\n            }\r\n            x = x.times(x);\r\n        }\r\n\r\n        return isNeg ? one.div(y) : y;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new Big whose value is the value of this Big rounded to a\r\n     * maximum of dp decimal places using rounding mode rm.\r\n     * If dp is not specified, round to 0 decimal places.\r\n     * If rm is not specified, use Big.RM.\r\n     *\r\n     * [dp] {number} Integer, 0 to MAX_DP inclusive.\r\n     * [rm] 0, 1, 2 or 3 (ROUND_DOWN, ROUND_HALF_UP, ROUND_HALF_EVEN, ROUND_UP)\r\n     */\r\n    P.round = function (dp, rm) {\r\n        var x = this,\r\n            Big = x.constructor;\r\n\r\n        if (dp == null) {\r\n            dp = 0;\r\n        } else if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n            throwErr('!round!');\r\n        }\r\n        rnd(x = new Big(x), dp, rm == null ? Big.RM : rm);\r\n\r\n        return x;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new Big whose value is the square root of the value of this Big,\r\n     * rounded, if necessary, to a maximum of Big.DP decimal places using\r\n     * rounding mode Big.RM.\r\n     */\r\n    P.sqrt = function () {\r\n        var estimate, r, approx,\r\n            x = this,\r\n            Big = x.constructor,\r\n            xc = x.c,\r\n            i = x.s,\r\n            e = x.e,\r\n            half = new Big('0.5');\r\n\r\n        // Zero?\r\n        if (!xc[0]) {\r\n            return new Big(x);\r\n        }\r\n\r\n        // If negative, throw NaN.\r\n        if (i < 0) {\r\n            throwErr(NaN);\r\n        }\r\n\r\n        // Estimate.\r\n        i = Math.sqrt(x.toString());\r\n\r\n        // Math.sqrt underflow/overflow?\r\n        // Pass x to Math.sqrt as integer, then adjust the result exponent.\r\n        if (i === 0 || i === 1 / 0) {\r\n            estimate = xc.join('');\r\n\r\n            if (!(estimate.length + e & 1)) {\r\n                estimate += '0';\r\n            }\r\n\r\n            r = new Big( Math.sqrt(estimate).toString() );\r\n            r.e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\r\n        } else {\r\n            r = new Big(i.toString());\r\n        }\r\n\r\n        i = r.e + (Big.DP += 4);\r\n\r\n        // Newton-Raphson iteration.\r\n        do {\r\n            approx = r;\r\n            r = half.times( approx.plus( x.div(approx) ) );\r\n        } while ( approx.c.slice(0, i).join('') !==\r\n                       r.c.slice(0, i).join('') );\r\n\r\n        rnd(r, Big.DP -= 4, Big.RM);\r\n\r\n        return r;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new Big whose value is the value of this Big times the value of\r\n     * Big y.\r\n     */\r\n    P.mul = P.times = function (y) {\r\n        var c,\r\n            x = this,\r\n            Big = x.constructor,\r\n            xc = x.c,\r\n            yc = (y = new Big(y)).c,\r\n            a = xc.length,\r\n            b = yc.length,\r\n            i = x.e,\r\n            j = y.e;\r\n\r\n        // Determine sign of result.\r\n        y.s = x.s == y.s ? 1 : -1;\r\n\r\n        // Return signed 0 if either 0.\r\n        if (!xc[0] || !yc[0]) {\r\n            return new Big(y.s * 0);\r\n        }\r\n\r\n        // Initialise exponent of result as x.e + y.e.\r\n        y.e = i + j;\r\n\r\n        // If array xc has fewer digits than yc, swap xc and yc, and lengths.\r\n        if (a < b) {\r\n            c = xc;\r\n            xc = yc;\r\n            yc = c;\r\n            j = a;\r\n            a = b;\r\n            b = j;\r\n        }\r\n\r\n        // Initialise coefficient array of result with zeros.\r\n        for (c = new Array(j = a + b); j--; c[j] = 0) {\r\n        }\r\n\r\n        // Multiply.\r\n\r\n        // i is initially xc.length.\r\n        for (i = b; i--;) {\r\n            b = 0;\r\n\r\n            // a is yc.length.\r\n            for (j = a + i; j > i;) {\r\n\r\n                // Current sum of products at this digit position, plus carry.\r\n                b = c[j] + yc[i] * xc[j - i - 1] + b;\r\n                c[j--] = b % 10;\r\n\r\n                // carry\r\n                b = b / 10 | 0;\r\n            }\r\n            c[j] = (c[j] + b) % 10;\r\n        }\r\n\r\n        // Increment result exponent if there is a final carry.\r\n        if (b) {\r\n            ++y.e;\r\n        }\r\n\r\n        // Remove any leading zero.\r\n        if (!c[0]) {\r\n            c.shift();\r\n        }\r\n\r\n        // Remove trailing zeros.\r\n        for (i = c.length; !c[--i]; c.pop()) {\r\n        }\r\n        y.c = c;\r\n\r\n        return y;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of this Big.\r\n     * Return exponential notation if this Big has a positive exponent equal to\r\n     * or greater than Big.E_POS, or a negative exponent equal to or less than\r\n     * Big.E_NEG.\r\n     */\r\n    P.toString = P.valueOf = P.toJSON = function () {\r\n        var x = this,\r\n            Big = x.constructor,\r\n            e = x.e,\r\n            str = x.c.join(''),\r\n            strL = str.length;\r\n\r\n        // Exponential notation?\r\n        if (e <= Big.E_NEG || e >= Big.E_POS) {\r\n            str = str.charAt(0) + (strL > 1 ? '.' + str.slice(1) : '') +\r\n              (e < 0 ? 'e' : 'e+') + e;\r\n\r\n        // Negative exponent?\r\n        } else if (e < 0) {\r\n\r\n            // Prepend zeros.\r\n            for (; ++e; str = '0' + str) {\r\n            }\r\n            str = '0.' + str;\r\n\r\n        // Positive exponent?\r\n        } else if (e > 0) {\r\n\r\n            if (++e > strL) {\r\n\r\n                // Append zeros.\r\n                for (e -= strL; e-- ; str += '0') {\r\n                }\r\n            } else if (e < strL) {\r\n                str = str.slice(0, e) + '.' + str.slice(e);\r\n            }\r\n\r\n        // Exponent zero.\r\n        } else if (strL > 1) {\r\n            str = str.charAt(0) + '.' + str.slice(1);\r\n        }\r\n\r\n        // Avoid '-0'\r\n        return x.s < 0 && x.c[0] ? '-' + str : str;\r\n    };\r\n\r\n\r\n    /*\r\n     ***************************************************************************\r\n     * If toExponential, toFixed, toPrecision and format are not required they\r\n     * can safely be commented-out or deleted. No redundant code will be left.\r\n     * format is used only by toExponential, toFixed and toPrecision.\r\n     ***************************************************************************\r\n     */\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of this Big in exponential\r\n     * notation to dp fixed decimal places and rounded, if necessary, using\r\n     * Big.RM.\r\n     *\r\n     * [dp] {number} Integer, 0 to MAX_DP inclusive.\r\n     */\r\n    P.toExponential = function (dp) {\r\n\r\n        if (dp == null) {\r\n            dp = this.c.length - 1;\r\n        } else if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n            throwErr('!toExp!');\r\n        }\r\n\r\n        return format(this, dp, 1);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of this Big in normal notation\r\n     * to dp fixed decimal places and rounded, if necessary, using Big.RM.\r\n     *\r\n     * [dp] {number} Integer, 0 to MAX_DP inclusive.\r\n     */\r\n    P.toFixed = function (dp) {\r\n        var str,\r\n            x = this,\r\n            Big = x.constructor,\r\n            neg = Big.E_NEG,\r\n            pos = Big.E_POS;\r\n\r\n        // Prevent the possibility of exponential notation.\r\n        Big.E_NEG = -(Big.E_POS = 1 / 0);\r\n\r\n        if (dp == null) {\r\n            str = x.toString();\r\n        } else if (dp === ~~dp && dp >= 0 && dp <= MAX_DP) {\r\n            str = format(x, x.e + dp);\r\n\r\n            // (-0).toFixed() is '0', but (-0.1).toFixed() is '-0'.\r\n            // (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\r\n            if (x.s < 0 && x.c[0] && str.indexOf('-') < 0) {\r\n        //E.g. -0.5 if rounded to -0 will cause toString to omit the minus sign.\r\n                str = '-' + str;\r\n            }\r\n        }\r\n        Big.E_NEG = neg;\r\n        Big.E_POS = pos;\r\n\r\n        if (!str) {\r\n            throwErr('!toFix!');\r\n        }\r\n\r\n        return str;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of this Big rounded to sd\r\n     * significant digits using Big.RM. Use exponential notation if sd is less\r\n     * than the number of digits necessary to represent the integer part of the\r\n     * value in normal notation.\r\n     *\r\n     * sd {number} Integer, 1 to MAX_DP inclusive.\r\n     */\r\n    P.toPrecision = function (sd) {\r\n\r\n        if (sd == null) {\r\n            return this.toString();\r\n        } else if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\r\n            throwErr('!toPre!');\r\n        }\r\n\r\n        return format(this, sd - 1, 2);\r\n    };\r\n\r\n\r\n    // Export\r\n\r\n\r\n    Big = bigFactory();\r\n\r\n    //AMD.\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(function () {\r\n            return Big;\r\n        });\r\n\r\n    // Node and other CommonJS-like environments that support module.exports.\r\n    } else if (typeof module !== 'undefined' && module.exports) {\r\n        module.exports = Big;\r\n\r\n    //Browser.\r\n    } else {\r\n        global.Big = Big;\r\n    }\r\n})(this);\r\n"},function(e,t,n){n(3)(n(42))},function(e,t){e.exports="'use strict';\n\n/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\nfunction version_compare(v1, v2, operator) {\n  // http://kevin.vanzonneveld.net\n  // +      original by: Philippe Jausions (http://pear.php.net/user/jausions)\n  // +      original by: Aidan Lister (http://aidanlister.com/)\n  // + reimplemented by: Kankrelune (http://www.webfaktory.info/)\n  // +      improved by: Brett Zamir (http://brett-zamir.me)\n  // +      improved by: Scott Baker\n  // +      improved by: Theriault\n  // *        example 1: version_compare('8.2.5rc', '8.2.5a');\n  // *        returns 1: 1\n  // *        example 2: version_compare('8.2.50', '8.2.52', '<');\n  // *        returns 2: true\n  // *        example 3: version_compare('5.3.0-dev', '5.3.0');\n  // *        returns 3: -1\n  // *        example 4: version_compare('4.1.0.52','4.01.0.51');\n  // *        returns 4: 1\n  // BEGIN REDUNDANT\n  this.php_js = this.php_js || {};\n  this.php_js.ENV = this.php_js.ENV || {};\n  // END REDUNDANT\n  // Important: compare must be initialized at 0.\n  var i = 0,\n      x = 0,\n      compare = 0,\n\n  // vm maps textual PHP versions to negatives so they're less than 0.\n  // PHP currently defines these as CASE-SENSITIVE. It is important to\n  // leave these as negatives so that they can come before numerical versions\n  // and as if no letters were there to begin with.\n  // (1alpha is < 1 and < 1.1 but > 1dev1)\n  // If a non-numerical value can't be mapped to this table, it receives\n  // -7 as its value.\n  vm = {\n    'dev': -6,\n    'alpha': -5,\n    'a': -5,\n    'beta': -4,\n    'b': -4,\n    'RC': -3,\n    'rc': -3,\n    '#': -2,\n    'p': -1,\n    'pl': -1\n  },\n\n  // This function will be called to prepare each version argument.\n  // It replaces every _, -, and + with a dot.\n  // It surrounds any nonsequence of numbers/dots with dots.\n  // It replaces sequences of dots with a single dot.\n  //    version_compare('4..0', '4.0') == 0\n  // Important: A string of 0 length needs to be converted into a value\n  // even less than an unexisting value in vm (-7), hence [-8].\n  // It's also important to not strip spaces because of this.\n  //   version_compare('', ' ') == 1\n  prepVersion = function prepVersion(v) {\n    v = ('' + v).replace(/[_\\-+]/g, '.');\n    v = v.replace(/([^.\\d]+)/g, '.$1.').replace(/\\.{2,}/g, '.');\n    return !v.length ? [-8] : v.split('.');\n  },\n\n  // This converts a version component to a number.\n  // Empty component becomes 0.\n  // Non-numerical component becomes a negative number.\n  // Numerical component becomes itself as an integer.\n  numVersion = function numVersion(v) {\n    return !v ? 0 : isNaN(v) ? vm[v] || -7 : parseInt(v, 10);\n  };\n  v1 = prepVersion(v1);\n  v2 = prepVersion(v2);\n  x = Math.max(v1.length, v2.length);\n  for (i = 0; i < x; i++) {\n    if (v1[i] == v2[i]) {\n      continue;\n    }\n    v1[i] = numVersion(v1[i]);\n    v2[i] = numVersion(v2[i]);\n    if (v1[i] < v2[i]) {\n      compare = -1;\n      break;\n    } else if (v1[i] > v2[i]) {\n      compare = 1;\n      break;\n    }\n  }\n  if (!operator) {\n    return compare;\n  }\n\n  // Important: operator is CASE-SENSITIVE.\n  // \"No operator\" seems to be treated as \"<.\"\n  // Any other values seem to make the function return null.\n  switch (operator) {\n    case '>':\n    case 'gt':\n      return compare > 0;\n    case '>=':\n    case 'ge':\n      return compare >= 0;\n    case '<=':\n    case 'le':\n      return compare <= 0;\n    case '==':\n    case '=':\n    case 'eq':\n      return compare === 0;\n    case '<>':\n    case '!=':\n    case 'ne':\n      return compare !== 0;\n    case '':\n    case '<':\n    case 'lt':\n      return compare < 0;\n    default:\n      return null;\n  }\n}"},function(e,t,n){n(3)(n(44))},function(e,t){e.exports='/* Copyright (c) 2010-2013 Marcus Westin */\n"use strict";(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?module.exports=t():e.store=t()})(this,function(){function o(){try{return r in t&&t[r]}catch(e){return!1}}var e={},t=typeof window!="undefined"?window:global,n=t.document,r="localStorage",i="script",s;e.disabled=!1,e.version="1.3.20",e.set=function(e,t){},e.get=function(e,t){},e.has=function(t){return e.get(t)!==undefined},e.remove=function(e){},e.clear=function(){},e.transact=function(t,n,r){r==null&&(r=n,n=null),n==null&&(n={});var i=e.get(t,n);r(i),e.set(t,i)},e.getAll=function(){},e.forEach=function(){},e.serialize=function(e){return JSON.stringify(e)},e.deserialize=function(e){if(typeof e!="string")return undefined;try{return JSON.parse(e)}catch(t){return e||undefined}};if(o())s=t[r],e.set=function(t,n){return n===undefined?e.remove(t):(s.setItem(t,e.serialize(n)),n)},e.get=function(t,n){var r=e.deserialize(s.getItem(t));return r===undefined?n:r},e.remove=function(e){s.removeItem(e)},e.clear=function(){s.clear()},e.getAll=function(){var t={};return e.forEach(function(e,n){t[e]=n}),t},e.forEach=function(t){for(var n=0;n<s.length;n++){var r=s.key(n);t(r,e.get(r))}};else if(n&&n.documentElement.addBehavior){var u,a;try{a=new ActiveXObject("htmlfile"),a.open(),a.write("<"+i+">document.w=window</"+i+\'><iframe src="/favicon.ico"></iframe>\'),a.close(),u=a.w.frames[0].document,s=u.createElement("div")}catch(f){s=n.createElement("div"),u=n.body}var l=function(t){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(s),u.appendChild(s),s.addBehavior("#default#userData"),s.load(r);var i=t.apply(e,n);return u.removeChild(s),i}},c=new RegExp("[!\\"#$%&\'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]","g"),h=function(e){return e.replace(/^d/,"___$&").replace(c,"___")};e.set=l(function(t,n,i){return n=h(n),i===undefined?e.remove(n):(t.setAttribute(n,e.serialize(i)),t.save(r),i)}),e.get=l(function(t,n,r){n=h(n);var i=e.deserialize(t.getAttribute(n));return i===undefined?r:i}),e.remove=l(function(e,t){t=h(t),e.removeAttribute(t),e.save(r)}),e.clear=l(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(r)}),e.getAll=function(t){var n={};return e.forEach(function(e,t){n[e]=t}),n},e.forEach=l(function(t,n){var r=t.XMLDocument.documentElement.attributes;for(var i=0,s;s=r[i];++i)n(s.name,e.deserialize(t.getAttribute(s.name)))})}try{var p="__storejs__";e.set(p,p),e.get(p)!=p&&(e.disabled=!0),e.remove(p)}catch(f){e.disabled=!0}return e.enabled=!e.disabled,e});'},function(e,t,n){n(3)(n(46))},function(e,t){e.exports='!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,i;function c(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function u(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e){return void 0===e}function d(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,s=[];for(n=0;n<e.length;++n)s.push(t(e[n],n));return s}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){for(var n in t)m(t,n)&&(e[n]=t[n]);return m(t,"toString")&&(e.toString=t.toString),m(t,"valueOf")&&(e.valueOf=t.valueOf),e}function y(e,t,n,s){return Ot(e,t,n,s,!0).utc()}function g(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function p(e){if(null==e._isValid){var t=g(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function v(e){var t=y(NaN);return null!=e?_(g(t),e):g(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};var r=c.momentProperties=[];function w(e,t){var n,s,i;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=g(t)),l(t._locale)||(e._locale=t._locale),0<r.length)for(n=0;n<r.length;n++)l(i=t[s=r[n]])||(e[s]=i);return e}var t=!1;function M(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,c.updateOffset(this),t=!1)}function S(e){return e instanceof M||null!=e&&null!=e._isAMomentObject}function D(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function k(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=D(t)),n}function a(e,t,n){var s,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&k(e[s])!==k(t[s]))&&a++;return a+r}function Y(e){!1===c.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(i,r){var a=!0;return _(function(){if(null!=c.deprecationHandler&&c.deprecationHandler(null,i),a){for(var e,t=[],n=0;n<arguments.length;n++){if(e="","object"==typeof arguments[n]){for(var s in e+="\\n["+n+"] ",arguments[0])e+=s+": "+arguments[0][s]+", ";e=e.slice(0,-2)}else e=arguments[n];t.push(e)}Y(i+"\\nArguments: "+Array.prototype.slice.call(t).join("")+"\\n"+(new Error).stack),a=!1}return r.apply(this,arguments)},r)}var s,O={};function T(e,t){null!=c.deprecationHandler&&c.deprecationHandler(e,t),O[e]||(Y(t),O[e]=!0)}function x(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function b(e,t){var n,s=_({},e);for(n in t)m(t,n)&&(u(e[n])&&u(t[n])?(s[n]={},_(s[n],e[n]),_(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)m(e,n)&&!m(t,n)&&u(e[n])&&(s[n]=_({},s[n]));return s}function P(e){null!=e&&this.set(e)}c.suppressDeprecationWarnings=!1,c.deprecationHandler=null,s=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)m(e,t)&&n.push(t);return n};var W={};function H(e,t){var n=e.toLowerCase();W[n]=W[n+"s"]=W[t]=e}function R(e){return"string"==typeof e?W[e]||W[e.toLowerCase()]:void 0}function C(e){var t,n,s={};for(n in e)m(e,n)&&(t=R(n))&&(s[t]=e[n]);return s}var F={};function L(e,t){F[e]=t}function U(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var N=/(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,G=/(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,V={},E={};function I(e,t,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),e&&(E[e]=i),t&&(E[t[0]]=function(){return U(i.apply(this,arguments),t[1],t[2])}),n&&(E[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function A(e,t){return e.isValid()?(t=j(t,e.localeData()),V[t]=V[t]||function(s){var e,i,t,r=s.match(N);for(e=0,i=r.length;e<i;e++)E[r[e]]?r[e]=E[r[e]]:r[e]=(t=r[e]).match(/\\[[\\s\\S]/)?t.replace(/^\\[|\\]$/g,""):t.replace(/\\\\/g,"");return function(e){var t,n="";for(t=0;t<i;t++)n+=x(r[t])?r[t].call(e,s):r[t];return n}}(t),V[t](e)):e.localeData().invalidDate()}function j(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(G.lastIndex=0;0<=n&&G.test(e);)e=e.replace(G,s),G.lastIndex=0,n-=1;return e}var Z=/\\d/,z=/\\d\\d/,$=/\\d{3}/,q=/\\d{4}/,J=/[+-]?\\d{6}/,B=/\\d\\d?/,Q=/\\d\\d\\d\\d?/,X=/\\d\\d\\d\\d\\d\\d?/,K=/\\d{1,3}/,ee=/\\d{1,4}/,te=/[+-]?\\d{1,6}/,ne=/\\d+/,se=/[+-]?\\d+/,ie=/Z|[+-]\\d\\d:?\\d\\d/gi,re=/Z|[+-]\\d\\d(?::?\\d\\d)?/gi,ae=/[0-9]{0,256}[\'a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i,oe={};function ue(e,n,s){oe[e]=x(n)?n:function(e,t){return e&&s?s:n}}function le(e,t){return m(oe,e)?oe[e](t._strict,t._locale):new RegExp(de(e.replace("\\\\","").replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function de(e){return e.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,"\\\\$&")}var he={};function ce(e,n){var t,s=n;for("string"==typeof e&&(e=[e]),d(n)&&(s=function(e,t){t[n]=k(e)}),t=0;t<e.length;t++)he[e[t]]=s}function fe(e,i){ce(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var me=0,_e=1,ye=2,ge=3,pe=4,ve=5,we=6,Me=7,Se=8;function De(e){return ke(e)?366:365}function ke(e){return e%4==0&&e%100!=0||e%400==0}I("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),H("year","y"),L("year",1),ue("Y",se),ue("YY",B,z),ue("YYYY",ee,q),ue("YYYYY",te,J),ue("YYYYYY",te,J),ce(["YYYYY","YYYYYY"],me),ce("YYYY",function(e,t){t[me]=2===e.length?c.parseTwoDigitYear(e):k(e)}),ce("YY",function(e,t){t[me]=c.parseTwoDigitYear(e)}),ce("Y",function(e,t){t[me]=parseInt(e,10)}),c.parseTwoDigitYear=function(e){return k(e)+(68<k(e)?1900:2e3)};var Ye,Oe=Te("FullYear",!0);function Te(t,n){return function(e){return null!=e?(be(this,t,e),c.updateOffset(this,n),this):xe(this,t)}}function xe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function be(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ke(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Pe(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Pe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1===s?ke(e)?29:28:31-s%7%2}Ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),I("MMMM",0,0,function(e){return this.localeData().months(this,e)}),H("month","M"),L("month",8),ue("M",B),ue("MM",B,z),ue("MMM",function(e,t){return t.monthsShortRegex(e)}),ue("MMMM",function(e,t){return t.monthsRegex(e)}),ce(["M","MM"],function(e,t){t[_e]=k(e)-1}),ce(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[_e]=i:g(n).invalidMonth=e});var We=/D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/,He="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Re="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ce(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\\d+$/.test(t))t=k(t);else if(!d(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Pe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Fe(e){return null!=e?(Ce(this,e),c.updateOffset(this,!0),this):xe(this,"Month")}var Le=ae;var Ue=ae;function Ne(){function e(e,t){return t.length-e.length}var t,n,s=[],i=[],r=[];for(t=0;t<12;t++)n=y([2e3,t]),s.push(this.monthsShort(n,"")),i.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(s.sort(e),i.sort(e),r.sort(e),t=0;t<12;t++)s[t]=de(s[t]),i[t]=de(i[t]);for(t=0;t<24;t++)r[t]=de(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ge(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&0<=e&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Ve(e,t,n){var s=7+t-n;return-((7+Ge(e,0,s).getUTCDay()-t)%7)+s-1}function Ee(e,t,n,s,i){var r,a,o=1+7*(t-1)+(7+n-s)%7+Ve(e,s,i);return o<=0?a=De(r=e-1)+o:o>De(e)?(r=e+1,a=o-De(e)):(r=e,a=o),{year:r,dayOfYear:a}}function Ie(e,t,n){var s,i,r=Ve(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+Ae(i=e.year()-1,t,n):a>Ae(e.year(),t,n)?(s=a-Ae(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function Ae(e,t,n){var s=Ve(e,t,n),i=Ve(e+1,t,n);return(De(e)-s+i)/7}I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),H("week","w"),H("isoWeek","W"),L("week",5),L("isoWeek",5),ue("w",B),ue("ww",B,z),ue("W",B),ue("WW",B,z),fe(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=k(e)});I("d",0,"do","day"),I("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),I("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),I("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),H("day","d"),H("weekday","e"),H("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),ue("d",B),ue("e",B),ue("E",B),ue("dd",function(e,t){return t.weekdaysMinRegex(e)}),ue("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ue("dddd",function(e,t){return t.weekdaysRegex(e)}),fe(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e}),fe(["d","e","E"],function(e,t,n,s){t[s]=k(e)});var je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var ze="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var $e=ae;var qe=ae;var Je=ae;function Be(){function e(e,t){return t.length-e.length}var t,n,s,i,r,a=[],o=[],u=[],l=[];for(t=0;t<7;t++)n=y([2e3,1]).day(t),s=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),r=this.weekdays(n,""),a.push(s),o.push(i),u.push(r),l.push(s),l.push(i),l.push(r);for(a.sort(e),o.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)o[t]=de(o[t]),u[t]=de(u[t]),l[t]=de(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Qe(){return this.hours()%12||12}function Xe(e,t){I(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ke(e,t){return t._meridiemParse}I("H",["HH",2],0,"hour"),I("h",["hh",2],0,Qe),I("k",["kk",2],0,function(){return this.hours()||24}),I("hmm",0,0,function(){return""+Qe.apply(this)+U(this.minutes(),2)}),I("hmmss",0,0,function(){return""+Qe.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)}),I("Hmm",0,0,function(){return""+this.hours()+U(this.minutes(),2)}),I("Hmmss",0,0,function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)}),Xe("a",!0),Xe("A",!1),H("hour","h"),L("hour",13),ue("a",Ke),ue("A",Ke),ue("H",B),ue("h",B),ue("k",B),ue("HH",B,z),ue("hh",B,z),ue("kk",B,z),ue("hmm",Q),ue("hmmss",X),ue("Hmm",Q),ue("Hmmss",X),ce(["H","HH"],ge),ce(["k","kk"],function(e,t,n){var s=k(e);t[ge]=24===s?0:s}),ce(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ce(["h","hh"],function(e,t,n){t[ge]=k(e),g(n).bigHour=!0}),ce("hmm",function(e,t,n){var s=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s)),g(n).bigHour=!0}),ce("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s,2)),t[ve]=k(e.substr(i)),g(n).bigHour=!0}),ce("Hmm",function(e,t,n){var s=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s))}),ce("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s,2)),t[ve]=k(e.substr(i))});var et,tt=Te("Hours",!0),nt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:He,monthsShort:Re,week:{dow:0,doy:6},weekdays:je,weekdaysMin:ze,weekdaysShort:Ze,meridiemParse:/[ap]\\.?m?\\.?/i},st={},it={};function rt(e){return e?e.toLowerCase().replace("_","-"):e}function at(e){var t=null;if(!st[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=et._abbr,require("./locale/"+e),ot(t)}catch(e){}return st[e]}function ot(e,t){var n;return e&&((n=l(t)?lt(e):ut(e,t))?et=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),et._abbr}function ut(e,t){if(null!==t){var n,s=nt;if(t.abbr=e,null!=st[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=st[e]._config;else if(null!=t.parentLocale)if(null!=st[t.parentLocale])s=st[t.parentLocale]._config;else{if(null==(n=at(t.parentLocale)))return it[t.parentLocale]||(it[t.parentLocale]=[]),it[t.parentLocale].push({name:e,config:t}),null;s=n._config}return st[e]=new P(b(s,t)),it[e]&&it[e].forEach(function(e){ut(e.name,e.config)}),ot(e),st[e]}return delete st[e],null}function lt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return et;if(!o(e)){if(t=at(e))return t;e=[e]}return function(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=rt(e[r]).split("-")).length,n=(n=rt(e[r+1]))?n.split("-"):null;0<t;){if(s=at(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&a(i,n,!0)>=t-1)break;t--}r++}return et}(e)}function dt(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[_e]<0||11<n[_e]?_e:n[ye]<1||n[ye]>Pe(n[me],n[_e])?ye:n[ge]<0||24<n[ge]||24===n[ge]&&(0!==n[pe]||0!==n[ve]||0!==n[we])?ge:n[pe]<0||59<n[pe]?pe:n[ve]<0||59<n[ve]?ve:n[we]<0||999<n[we]?we:-1,g(e)._overflowDayOfYear&&(t<me||ye<t)&&(t=ye),g(e)._overflowWeeks&&-1===t&&(t=Me),g(e)._overflowWeekday&&-1===t&&(t=Se),g(e).overflow=t),e}function ht(e,t,n){return null!=e?e:null!=t?t:n}function ct(e){var t,n,s,i,r,a=[];if(!e._d){var o,u;for(o=e,u=new Date(c.now()),s=o._useUTC?[u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()]:[u.getFullYear(),u.getMonth(),u.getDate()],e._w&&null==e._a[ye]&&null==e._a[_e]&&function(e){var t,n,s,i,r,a,o,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)r=1,a=4,n=ht(t.GG,e._a[me],Ie(Tt(),1,4).year),s=ht(t.W,1),((i=ht(t.E,1))<1||7<i)&&(u=!0);else{r=e._locale._week.dow,a=e._locale._week.doy;var l=Ie(Tt(),r,a);n=ht(t.gg,e._a[me],l.year),s=ht(t.w,l.week),null!=t.d?((i=t.d)<0||6<i)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(u=!0)):i=r}s<1||s>Ae(n,r,a)?g(e)._overflowWeeks=!0:null!=u?g(e)._overflowWeekday=!0:(o=Ee(n,s,i,r,a),e._a[me]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=ht(e._a[me],s[me]),(e._dayOfYear>De(r)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=Ge(r,0,e._dayOfYear),e._a[_e]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=s[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ge]&&0===e._a[pe]&&0===e._a[ve]&&0===e._a[we]&&(e._nextDay=!0,e._a[ge]=0),e._d=(e._useUTC?Ge:function(e,t,n,s,i,r,a){var o=new Date(e,t,n,s,i,r,a);return e<100&&0<=e&&isFinite(o.getFullYear())&&o.setFullYear(e),o}).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ge]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}var ft=/^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,mt=/^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,_t=/Z|[+-]\\d\\d(?::?\\d\\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\\d{6}-\\d\\d-\\d\\d/],["YYYY-MM-DD",/\\d{4}-\\d\\d-\\d\\d/],["GGGG-[W]WW-E",/\\d{4}-W\\d\\d-\\d/],["GGGG-[W]WW",/\\d{4}-W\\d\\d/,!1],["YYYY-DDD",/\\d{4}-\\d{3}/],["YYYY-MM",/\\d{4}-\\d\\d/,!1],["YYYYYYMMDD",/[+-]\\d{10}/],["YYYYMMDD",/\\d{8}/],["GGGG[W]WWE",/\\d{4}W\\d{3}/],["GGGG[W]WW",/\\d{4}W\\d{2}/,!1],["YYYYDDD",/\\d{7}/]],gt=[["HH:mm:ss.SSSS",/\\d\\d:\\d\\d:\\d\\d\\.\\d+/],["HH:mm:ss,SSSS",/\\d\\d:\\d\\d:\\d\\d,\\d+/],["HH:mm:ss",/\\d\\d:\\d\\d:\\d\\d/],["HH:mm",/\\d\\d:\\d\\d/],["HHmmss.SSSS",/\\d\\d\\d\\d\\d\\d\\.\\d+/],["HHmmss,SSSS",/\\d\\d\\d\\d\\d\\d,\\d+/],["HHmmss",/\\d\\d\\d\\d\\d\\d/],["HHmm",/\\d\\d\\d\\d/],["HH",/\\d\\d/]],pt=/^\\/?Date\\((\\-?\\d+)/i;function vt(e){var t,n,s,i,r,a,o=e._i,u=ft.exec(o)||mt.exec(o);if(u){for(g(e).iso=!0,t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(u[1])){i=yt[t][0],s=!1!==yt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[3])){r=(u[2]||" ")+gt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!_t.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),kt(e)}else e._isValid=!1}var wt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/;function Mt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(e),Re.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}var St={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Dt(e){var t,n,s,i=wt.exec(e._i.replace(/\\([^)]*\\)|[\\n\\t]/g," ").replace(/(\\s\\s+)/g," ").replace(/^\\s\\s*/,"").replace(/\\s\\s*$/,""));if(i){var r=Mt(i[4],i[3],i[2],i[5],i[6],i[7]);if(t=i[1],n=r,s=e,t&&Ze.indexOf(t)!==new Date(n[0],n[1],n[2]).getDay()&&(g(s).weekdayMismatch=!0,!(s._isValid=!1)))return;e._a=r,e._tzm=function(e,t,n){if(e)return St[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}(i[8],i[9],i[10]),e._d=Ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function kt(e){if(e._f!==c.ISO_8601)if(e._f!==c.RFC_2822){e._a=[],g(e).empty=!0;var t,n,s,i,r,a,o,u,l=""+e._i,d=l.length,h=0;for(s=j(e._f,e._locale).match(N)||[],t=0;t<s.length;t++)i=s[t],(n=(l.match(le(i,e))||[])[0])&&(0<(r=l.substr(0,l.indexOf(n))).length&&g(e).unusedInput.push(r),l=l.slice(l.indexOf(n)+n.length),h+=n.length),E[i]?(n?g(e).empty=!1:g(e).unusedTokens.push(i),a=i,u=e,null!=(o=n)&&m(he,a)&&he[a](o,u._a,u,a)):e._strict&&!n&&g(e).unusedTokens.push(i);g(e).charsLeftOver=d-h,0<l.length&&g(e).unusedInput.push(l),e._a[ge]<=12&&!0===g(e).bigHour&&0<e._a[ge]&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[ge]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0)),t)}(e._locale,e._a[ge],e._meridiem),ct(e),dt(e)}else Dt(e);else vt(e)}function Yt(e){var t,n,s,i,r=e._i,a=e._f;return e._locale=e._locale||lt(e._l),null===r||void 0===a&&""===r?v({nullInput:!0}):("string"==typeof r&&(e._i=r=e._locale.preparse(r)),S(r)?new M(dt(r)):(h(r)?e._d=r:o(a)?function(e){var t,n,s,i,r;if(0===e._f.length)return g(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)r=0,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],kt(t),p(t)&&(r+=g(t).charsLeftOver,r+=10*g(t).unusedTokens.length,g(t).score=r,(null==s||r<s)&&(s=r,n=t));_(e,n||t)}(e):a?kt(e):l(n=(t=e)._i)?t._d=new Date(c.now()):h(n)?t._d=new Date(n.valueOf()):"string"==typeof n?(s=t,null===(i=pt.exec(s._i))?(vt(s),!1===s._isValid&&(delete s._isValid,Dt(s),!1===s._isValid&&(delete s._isValid,c.createFromInputFallback(s)))):s._d=new Date(+i[1])):o(n)?(t._a=f(n.slice(0),function(e){return parseInt(e,10)}),ct(t)):u(n)?function(e){if(!e._d){var t=C(e._i);e._a=f([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ct(e)}}(t):d(n)?t._d=new Date(n):c.createFromInputFallback(t),p(e)||(e._d=null),e))}function Ot(e,t,n,s,i){var r,a={};return!0!==n&&!1!==n||(s=n,n=void 0),(u(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=s,(r=new M(dt(Yt(a))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function Tt(e,t,n,s){return Ot(e,t,n,s,!1)}c.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),c.ISO_8601=function(){},c.RFC_2822=function(){};var xt=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()}),bt=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:v()});function Pt(e,t){var n,s;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Tt();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Wt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ht(e){var t=C(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,d=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Ye.call(Wt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,s=0;s<Wt.length;++s)if(e[Wt[s]]){if(n)return!1;parseFloat(e[Wt[s]])!==k(e[Wt[s]])&&(n=!0)}return!0}(t),this._milliseconds=+d+1e3*l+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=lt(),this._bubble()}function Rt(e){return e instanceof Ht}function Ct(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){I(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+U(~~(e/60),2)+n+U(~~e%60,2)})}Ft("Z",":"),Ft("ZZ",""),ue("Z",re),ue("ZZ",re),ce(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ut(re,e)});var Lt=/([\\+\\-]|\\d\\d)/gi;function Ut(e,t){var n=(t||"").match(e);if(null===n)return null;var s=((n[n.length-1]||[])+"").match(Lt)||["-",0,0],i=60*s[1]+k(s[2]);return 0===i?0:"+"===s[0]?i:-i}function Nt(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(S(e)||h(e)?e.valueOf():Tt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),c.updateOffset(n,!1),n):Tt(e).local()}function Gt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Vt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}c.updateOffset=function(){};var Et=/^(\\-|\\+)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)(\\.\\d*)?)?$/,It=/^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function At(e,t){var n,s,i,r=e,a=null;return Rt(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:d(e)?(r={},t?r[t]=e:r.milliseconds=e):(a=Et.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:k(a[ye])*n,h:k(a[ge])*n,m:k(a[pe])*n,s:k(a[ve])*n,ms:k(Ct(1e3*a[we]))*n}):(a=It.exec(e))?(n="-"===a[1]?-1:(a[1],1),r={y:jt(a[2],n),M:jt(a[3],n),w:jt(a[4],n),d:jt(a[5],n),h:jt(a[6],n),m:jt(a[7],n),s:jt(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Nt(t,e),e.isBefore(t)?n=Zt(e,t):((n=Zt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Tt(r.from),Tt(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new Ht(r),Rt(e)&&m(e,"_locale")&&(s._locale=e._locale),s}function jt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Zt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function zt(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(T(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),$t(this,At(e="string"==typeof e?+e:e,t),s),this}}function $t(e,t,n,s){var i=t._milliseconds,r=Ct(t._days),a=Ct(t._months);e.isValid()&&(s=null==s||s,a&&Ce(e,xe(e,"Month")+a*n),r&&be(e,"Date",xe(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&c.updateOffset(e,r||a))}At.fn=Ht.prototype,At.invalid=function(){return At(NaN)};var qt=zt(1,"add"),Jt=zt(-1,"subtract");function Bt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(n+1,"months")-s)))||0}function Qt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=lt(e))&&(this._locale=t),this)}c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xt=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Kt(){return this._locale}function en(e,t){I(0,[e,e.length],0,t)}function tn(e,t,n,s,i){var r;return null==e?Ie(this,s,i).year:((r=Ae(e,s,i))<t&&(t=r),function(e,t,n,s,i){var r=Ee(e,t,n,s,i),a=Ge(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),en("gggg","weekYear"),en("ggggg","weekYear"),en("GGGG","isoWeekYear"),en("GGGGG","isoWeekYear"),H("weekYear","gg"),H("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),ue("G",se),ue("g",se),ue("GG",B,z),ue("gg",B,z),ue("GGGG",ee,q),ue("gggg",ee,q),ue("GGGGG",te,J),ue("ggggg",te,J),fe(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=k(e)}),fe(["gg","GG"],function(e,t,n,s){t[s]=c.parseTwoDigitYear(e)}),I("Q",0,"Qo","quarter"),H("quarter","Q"),L("quarter",7),ue("Q",Z),ce("Q",function(e,t){t[_e]=3*(k(e)-1)}),I("D",["DD",2],"Do","date"),H("date","D"),L("date",9),ue("D",B),ue("DD",B,z),ue("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ce(["D","DD"],ye),ce("Do",function(e,t){t[ye]=k(e.match(B)[0])});var nn=Te("Date",!0);I("DDD",["DDDD",3],"DDDo","dayOfYear"),H("dayOfYear","DDD"),L("dayOfYear",4),ue("DDD",K),ue("DDDD",$),ce(["DDD","DDDD"],function(e,t,n){n._dayOfYear=k(e)}),I("m",["mm",2],0,"minute"),H("minute","m"),L("minute",14),ue("m",B),ue("mm",B,z),ce(["m","mm"],pe);var sn=Te("Minutes",!1);I("s",["ss",2],0,"second"),H("second","s"),L("second",15),ue("s",B),ue("ss",B,z),ce(["s","ss"],ve);var rn,an=Te("Seconds",!1);for(I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),I(0,["SSS",3],0,"millisecond"),I(0,["SSSS",4],0,function(){return 10*this.millisecond()}),I(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),I(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),I(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),I(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),I(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),H("millisecond","ms"),L("millisecond",16),ue("S",K,Z),ue("SS",K,z),ue("SSS",K,$),rn="SSSS";rn.length<=9;rn+="S")ue(rn,ne);function on(e,t){t[we]=k(1e3*("0."+e))}for(rn="S";rn.length<=9;rn+="S")ce(rn,on);var un=Te("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var ln=M.prototype;function dn(e){return e}ln.add=qt,ln.calendar=function(e,t){var n=e||Tt(),s=Nt(n,this).startOf("day"),i=c.calendarFormat(this,s)||"sameElse",r=t&&(x(t[i])?t[i].call(this,n):t[i]);return this.format(r||this.localeData().calendar(i,this,Tt(n)))},ln.clone=function(){return new M(this)},ln.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Nt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=R(t)){case"year":r=Bt(this,s)/12;break;case"month":r=Bt(this,s);break;case"quarter":r=Bt(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:D(r)},ln.endOf=function(e){return void 0===(e=R(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},ln.format=function(e){e||(e=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var t=A(this,e);return this.localeData().postformat(t)},ln.from=function(e,t){return this.isValid()&&(S(e)&&e.isValid()||Tt(e).isValid())?At({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ln.fromNow=function(e){return this.from(Tt(),e)},ln.to=function(e,t){return this.isValid()&&(S(e)&&e.isValid()||Tt(e).isValid())?At({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ln.toNow=function(e){return this.to(Tt(),e)},ln.get=function(e){return x(this[e=R(e)])?this[e]():this},ln.invalidAt=function(){return g(this).overflow},ln.isAfter=function(e,t){var n=S(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=R(l(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},ln.isBefore=function(e,t){var n=S(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=R(l(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},ln.isBetween=function(e,t,n,s){return("("===(s=s||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===s[1]?this.isBefore(t,n):!this.isAfter(t,n))},ln.isSame=function(e,t){var n,s=S(e)?e:Tt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=R(t||"millisecond"))?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},ln.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ln.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ln.isValid=function(){return p(this)},ln.lang=Xt,ln.locale=Qt,ln.localeData=Kt,ln.max=bt,ln.min=xt,ln.parsingFlags=function(){return _({},g(this))},ln.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:F[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=C(e)),s=0;s<n.length;s++)this[n[s].unit](e[n[s].unit]);else if(x(this[e=R(e)]))return this[e](t);return this},ln.startOf=function(e){switch(e=R(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},ln.subtract=Jt,ln.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ln.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ln.toDate=function(){return new Date(this.valueOf())},ln.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?A(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):x(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",A(n,"Z")):A(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ln.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+\'("]\',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+\'[")]\';return this.format(n+s+"-MM-DD[T]HH:mm:ss.SSS"+i)},ln.toJSON=function(){return this.isValid()?this.toISOString():null},ln.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ln.unix=function(){return Math.floor(this.valueOf()/1e3)},ln.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ln.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ln.year=Oe,ln.isLeapYear=function(){return ke(this.year())},ln.weekYear=function(e){return tn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ln.isoWeekYear=function(e){return tn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ln.quarter=ln.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ln.month=Fe,ln.daysInMonth=function(){return Pe(this.year(),this.month())},ln.week=ln.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ln.isoWeek=ln.isoWeeks=function(e){var t=Ie(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ln.weeksInYear=function(){var e=this.localeData()._week;return Ae(this.year(),e.dow,e.doy)},ln.isoWeeksInYear=function(){return Ae(this.year(),1,4)},ln.date=nn,ln.day=ln.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},ln.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ln.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=(n=e,s=this.localeData(),"string"==typeof n?s.weekdaysParse(n)%7||7:isNaN(n)?null:n);return this.day(this.day()%7?t:t-7)}return this.day()||7;var n,s},ln.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ln.hour=ln.hours=tt,ln.minute=ln.minutes=sn,ln.second=ln.seconds=an,ln.millisecond=ln.milliseconds=un,ln.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ut(re,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Gt(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?$t(this,At(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Gt(this)},ln.utc=function(e){return this.utcOffset(0,e)},ln.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Gt(this),"m")),this},ln.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ut(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ln.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ln.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ln.isLocal=function(){return!!this.isValid()&&!this._isUTC},ln.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ln.isUtc=Vt,ln.isUTC=Vt,ln.zoneAbbr=function(){return this._isUTC?"UTC":""},ln.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ln.dates=n("dates accessor is deprecated. Use date instead.",nn),ln.months=n("months accessor is deprecated. Use month instead",Fe),ln.years=n("years accessor is deprecated. Use year instead",Oe),ln.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),ln.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e={};if(w(e,this),(e=Yt(e))._a){var t=e._isUTC?y(e._a):Tt(e._a);this._isDSTShifted=this.isValid()&&0<a(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var hn=P.prototype;function cn(e,t,n,s){var i=lt(),r=y().set(s,t);return i[n](r,e)}function fn(e,t,n){if(d(e)&&(t=e,e=void 0),e=e||"",null!=t)return cn(e,t,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=cn(e,s,n,"month");return i}function mn(e,t,n,s){"boolean"==typeof e?d(t)&&(n=t,t=void 0):(t=e,e=!1,d(n=t)&&(n=t,t=void 0)),t=t||"";var i,r=lt(),a=e?r._week.dow:0;if(null!=n)return cn(t,(n+a)%7,s,"day");var o=[];for(i=0;i<7;i++)o[i]=cn(t,(i+a)%7,s,"day");return o}hn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return x(s)?s.call(t,n):s},hn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},hn.invalidDate=function(){return this._invalidDate},hn.ordinal=function(e){return this._ordinal.replace("%d",e)},hn.preparse=dn,hn.postformat=dn,hn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return x(i)?i(e,t,n,s):i.replace(/%d/i,e)},hn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return x(n)?n(t):n.replace(/%s/i,t)},hn.set=function(e){var t,n;for(n in e)x(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\\d{1,2}/.source)},hn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||We).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},hn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[We.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},hn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=y([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=y([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},hn.monthsRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||Ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=Ue),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},hn.monthsShortRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||Ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Le),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},hn.week=function(e){return Ie(e,this._week.dow,this._week.doy).week},hn.firstDayOfYear=function(){return this._week.doy},hn.firstDayOfWeek=function(){return this._week.dow},hn.weekdays=function(e,t){return e?o(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:o(this._weekdays)?this._weekdays:this._weekdays.standalone},hn.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},hn.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},hn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=y([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=y([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},hn.weekdaysRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=$e),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},hn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},hn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Je),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},hn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},hn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},ot("en",{dayOfMonthOrdinalParse:/\\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===k(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),c.lang=n("moment.lang is deprecated. Use moment.locale instead.",ot),c.langData=n("moment.langData is deprecated. Use moment.localeData instead.",lt);var _n=Math.abs;function yn(e,t,n,s){var i=At(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function gn(e){return e<0?Math.floor(e):Math.ceil(e)}function pn(e){return 4800*e/146097}function vn(e){return 146097*e/4800}function wn(e){return function(){return this.as(e)}}var Mn=wn("ms"),Sn=wn("s"),Dn=wn("m"),kn=wn("h"),Yn=wn("d"),On=wn("w"),Tn=wn("M"),xn=wn("y");function bn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Pn=bn("milliseconds"),Wn=bn("seconds"),Hn=bn("minutes"),Rn=bn("hours"),Cn=bn("days"),Fn=bn("months"),Ln=bn("years");var Un=Math.round,Nn={ss:44,s:45,m:45,h:22,d:26,M:11};var Gn=Math.abs;function Vn(e){return(0<e)-(e<0)||+e}function En(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Gn(this._milliseconds)/1e3,s=Gn(this._days),i=Gn(this._months);t=D((e=D(n/60))/60),n%=60,e%=60;var r=D(i/12),a=i%=12,o=s,u=t,l=e,d=n?n.toFixed(3).replace(/\\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var c=h<0?"-":"",f=Vn(this._months)!==Vn(h)?"-":"",m=Vn(this._days)!==Vn(h)?"-":"",_=Vn(this._milliseconds)!==Vn(h)?"-":"";return c+"P"+(r?f+r+"Y":"")+(a?f+a+"M":"")+(o?m+o+"D":"")+(u||l||d?"T":"")+(u?_+u+"H":"")+(l?_+l+"M":"")+(d?_+d+"S":"")}var In=Ht.prototype;return In.isValid=function(){return this._isValid},In.abs=function(){var e=this._data;return this._milliseconds=_n(this._milliseconds),this._days=_n(this._days),this._months=_n(this._months),e.milliseconds=_n(e.milliseconds),e.seconds=_n(e.seconds),e.minutes=_n(e.minutes),e.hours=_n(e.hours),e.months=_n(e.months),e.years=_n(e.years),this},In.add=function(e,t){return yn(this,e,t,1)},In.subtract=function(e,t){return yn(this,e,t,-1)},In.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=R(e))||"year"===e)return t=this._days+s/864e5,n=this._months+pn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(vn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},In.asMilliseconds=Mn,In.asSeconds=Sn,In.asMinutes=Dn,In.asHours=kn,In.asDays=Yn,In.asWeeks=On,In.asMonths=Tn,In.asYears=xn,In.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12):NaN},In._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return 0<=r&&0<=a&&0<=o||r<=0&&a<=0&&o<=0||(r+=864e5*gn(vn(o)+a),o=a=0),u.milliseconds=r%1e3,e=D(r/1e3),u.seconds=e%60,t=D(e/60),u.minutes=t%60,n=D(t/60),u.hours=n%24,o+=i=D(pn(a+=D(n/24))),a-=gn(vn(i)),s=D(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},In.clone=function(){return At(this)},In.get=function(e){return e=R(e),this.isValid()?this[e+"s"]():NaN},In.milliseconds=Pn,In.seconds=Wn,In.minutes=Hn,In.hours=Rn,In.days=Cn,In.weeks=function(){return D(this.days()/7)},In.months=Fn,In.years=Ln,In.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,n,s,i,r,a,o,u,l,d,h,c=this.localeData(),f=(n=!e,s=c,i=At(t=this).abs(),r=Un(i.as("s")),a=Un(i.as("m")),o=Un(i.as("h")),u=Un(i.as("d")),l=Un(i.as("M")),d=Un(i.as("y")),(h=r<=Nn.ss&&["s",r]||r<Nn.s&&["ss",r]||a<=1&&["m"]||a<Nn.m&&["mm",a]||o<=1&&["h"]||o<Nn.h&&["hh",o]||u<=1&&["d"]||u<Nn.d&&["dd",u]||l<=1&&["M"]||l<Nn.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=n,h[3]=0<+t,h[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,h));return e&&(f=c.pastFuture(+this,f)),c.postformat(f)},In.toISOString=En,In.toString=En,In.toJSON=En,In.locale=Qt,In.localeData=Kt,In.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",En),In.lang=Xt,I("X",0,0,"unix"),I("x",0,0,"valueOf"),ue("x",se),ue("X",/[+-]?\\d+(\\.\\d{1,3})?/),ce("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ce("x",function(e,t,n){n._d=new Date(k(e))}),c.version="2.22.2",e=Tt,c.fn=ln,c.min=function(){return Pt("isBefore",[].slice.call(arguments,0))},c.max=function(){return Pt("isAfter",[].slice.call(arguments,0))},c.now=function(){return Date.now?Date.now():+new Date},c.utc=y,c.unix=function(e){return Tt(1e3*e)},c.months=function(e,t){return fn(e,t,"months")},c.isDate=h,c.locale=ot,c.invalid=v,c.duration=At,c.isMoment=S,c.weekdays=function(e,t,n){return mn(e,t,n,"weekdays")},c.parseZone=function(){return Tt.apply(null,arguments).parseZone()},c.localeData=lt,c.isDuration=Rt,c.monthsShort=function(e,t){return fn(e,t,"monthsShort")},c.weekdaysMin=function(e,t,n){return mn(e,t,n,"weekdaysMin")},c.defineLocale=ut,c.updateLocale=function(e,t){if(null!=t){var n,s,i=nt;null!=(s=at(e))&&(i=s._config),(n=new P(t=b(i,t))).parentLocale=st[e],st[e]=n,ot(e)}else null!=st[e]&&(null!=st[e].parentLocale?st[e]=st[e].parentLocale:null!=st[e]&&delete st[e]);return st[e]},c.locales=function(){return s(st)},c.weekdaysShort=function(e,t,n){return mn(e,t,n,"weekdaysShort")},c.normalizeUnits=R,c.relativeTimeRounding=function(e){return void 0===e?Un:"function"==typeof e&&(Un=e,!0)},c.relativeTimeThreshold=function(e,t){return void 0!==Nn[e]&&(void 0===t?Nn[e]:(Nn[e]=t,"s"===e&&(Nn.ss=t-1),!0))},c.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},c.prototype=ln,c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},c});'},function(e,t,n){n(3)(n(48))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&f())}function f(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(t){!function(){var n={},r=this,i=r.async;void 0!==e&&e.exports?e.exports=n:r.async=n,n.noConflict=function(){return r.async=i,n};var a=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},o=function(e,t){if(e.map)return e.map(t);var n=[];return a(e,function(e,r,i){n.push(t(e,r,i))}),n},s=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};void 0!==t&&t.nextTick?n.nextTick=t.nextTick:n.nextTick=function(e){setTimeout(e,0)},n.forEach=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0;a(e,function(i){t(i,function(t){t?(n(t),n=function(){}):(r+=1)===e.length&&n()})})},n.forEachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1)===e.length?n():i()})};i()},n.forEachLimit=function(e,t,n,r){if(r=r||function(){},!e.length||t<=0)return r();var i=0,a=0,o=0;!function s(){if(i===e.length)return r();for(;o<t&&a<e.length;)n(e[a],function(t){t?(r(t),r=function(){}):(o-=1,(i+=1)===e.length?r():s())}),a+=1,o+=1}()};var l=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.forEach].concat(t))}},u=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.forEachSeries].concat(t))}},c=function(e,t,n,r){var i=[];e(t=o(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})};n.map=l(c),n.mapSeries=u(c),n.reduce=function(e,t,r,i){n.forEachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){i(e,t)})},n.inject=n.reduce,n.foldl=n.reduce,n.reduceRight=function(e,t,r,i){var a=o(e,function(e){return e}).reverse();n.reduce(a,t,r,i)},n.foldr=n.reduceRight;var h=function(e,t,n,r){var i=[];e(t=o(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(e){r(o(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.filter=l(h),n.filterSeries=u(h),n.select=n.filter,n.selectSeries=n.filterSeries;var d=function(e,t,n,r){var i=[];e(t=o(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(e){r(o(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.reject=l(d),n.rejectSeries=u(d);var f=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(e){r()})};n.detect=l(f),n.detectSeries=u(f),n.some=function(e,t,r){n.forEach(e,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(e){r(!1)})},n.any=n.some,n.every=function(e,t,r){n.forEach(e,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(e){r(!0)})},n.all=n.every,n.sortBy=function(e,t,r){n.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return r(e);r(null,o(t.sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),function(e){return e.value}))})},n.auto=function(e,t){t=t||function(){};var n=s(e);if(!n.length)return t(null);var r={},i=[],o=function(e){i.unshift(e)};o(function(){s(r).length===n.length&&(t(null,r),t=function(){})}),a(n,function(n){var s=e[n]instanceof Function?[e[n]]:e[n],l=function(e){if(e)t(e),t=function(){};else{var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),r[n]=o,a(i.slice(0),function(e){e()})}},u=s.slice(0,Math.abs(s.length-1))||[],c=function(){return function(e,t,n){return e.reduce?e.reduce(t,n):(a(e,function(e,r,i){n=t(n,e,r,i)}),n)}(u,function(e,t){return e&&r.hasOwnProperty(t)},!0)};if(c())s[s.length-1](l,r);else{var h=function(){c()&&(!function(e){for(var t=0;t<i.length;t+=1)if(i[t]===e)return void i.splice(t,1)}(h),s[s.length-1](l,r))};o(h)}})},n.waterfall=function(e,t){if(t=t||function(){},!e.length)return t();var r=function(e){return function(i){if(i)t(i),t=function(){};else{var a=Array.prototype.slice.call(arguments,1),o=e.next();o?a.push(r(o)):a.push(t),n.nextTick(function(){e.apply(null,a)})}}};r(n.iterator(e))()},n.parallel=function(e,t){if(t=t||function(){},e.constructor===Array)n.map(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var r={};n.forEach(s(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(e){t(e,r)})}},n.series=function(e,t){if(t=t||function(){},e.constructor===Array)n.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var r={};n.forEachSeries(s(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(e){t(e,r)})}},n.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},n.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var p=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};n.concat=l(p),n.concatSeries=u(p),n.whilst=function(e,t,r){e()?t(function(i){if(i)return r(i);n.whilst(e,t,r)}):r()},n.until=function(e,t,r){e()?r():t(function(i){if(i)return r(i);n.until(e,t,r)})},n.queue=function(e,t){var r=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,push:function(e,r){e.constructor!==Array&&(e=[e]),a(e,function(e){i.tasks.push({data:e,callback:"function"==typeof r?r:null}),i.saturated&&i.tasks.length==t&&i.saturated(),n.nextTick(i.process)})},process:function(){if(r<i.concurrency&&i.tasks.length){var t=i.tasks.shift();i.empty&&0==i.tasks.length&&i.empty(),r+=1,e(t.data,function(){r-=1,t.callback&&t.callback.apply(t,arguments),i.drain&&i.tasks.length+r==0&&i.drain(),i.process()})}},length:function(){return i.tasks.length},running:function(){return r}};return i};var m=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&a(n,function(t){console[e](t)}))}]))}};n.log=m("log"),n.dir=m("dir"),n.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),a=i.pop(),o=t.apply(null,i);o in n?a.apply(null,n[o]):o in r?r[o].push(a):(r[o]=[a],e.apply(null,i.concat([function(){n[o]=arguments;var e=r[o];delete r[o];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.unmemoized=e,i},n.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}}()}).call(this,n(50))},function(e,t,n){e.exports=n(51)},function(e,t){e.exports='/*!\n\n handlebars v1.3.0-sugarcrm-temporary\n\nCopyright (C) 2011 by Yehuda Katz\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n@license\n*/\n/*\n\n=============================== WARNING ========================================\n\nThis is a temporary fork that we intend to discontinue using and/or remove in\na future version of Sugar.\n\nSugarCRM Inc does not recommend using this fork outside of the Sugar platform.\nAny non-Sugar use cases will not be supported.\n\n================================================================================\n*/\n\nvar Handlebars=function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"\'`=]/g,j=/[&<>"\'`=]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: \'"+a+"\'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e),g=function(a){"use strict";function b(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var c,d=a,e={ProgramNode:function(a,c,d,f){var g,h;3===arguments.length?(f=d,d=null):2===arguments.length&&(f=c,c=null),b.call(this,f),this.type="program",this.statements=a,this.strip={},d?(h=d[0],h?(g={first_line:h.firstLine,last_line:h.lastLine,last_column:h.lastColumn,first_column:h.firstColumn},this.inverse=new e.ProgramNode(d,c,g)):this.inverse=new e.ProgramNode(d,c),this.strip.right=c.left):c&&(this.strip.left=c.right)},MustacheNode:function(a,c,d,f,g){if(b.call(this,g),this.type="mustache",this.strip=f,null!=d&&d.charAt){var h=d.charAt(3)||d.charAt(2);this.escaped="{"!==h&&"&"!==h}else this.escaped=!!d;a instanceof e.SexprNode?this.sexpr=a:this.sexpr=new e.SexprNode(a,c),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,c,d){b.call(this,d),this.type="sexpr",this.hash=c;var e=this.id=a[0],f=this.params=a.slice(1),g=this.eligibleHelper=e.isSimple;this.isHelper=g&&(f.length||c)},PartialNode:function(a,c,d,e){b.call(this,e),this.type="partial",this.partialName=a,this.context=c,this.strip=d},BlockNode:function(a,c,e,f,g){if(b.call(this,g),a.sexpr.id.original!==f.path.original)throw new d(a.sexpr.id.original+" doesn\'t match "+f.path.original,this);this.type="block",this.mustache=a,this.program=c,this.inverse=e,this.strip={left:a.strip.left,right:f.strip.right},(c||e).strip.left=a.strip.right,(e||c).strip.right=f.strip.left,e&&!c&&(this.isInverse=!0)},ContentNode:function(a,c){b.call(this,c),this.type="content",this.string=a},HashNode:function(a,c){b.call(this,c),this.type="hash",this.pairs=a},IdNode:function(a,c){b.call(this,c),this.type="ID";for(var e="",f=[],g=0,h=0,i=a.length;i>h;h++){var j=a[h].part;if(e+=(a[h].separator||"")+j,".."===j||"."===j||"this"===j){if(f.length>0)throw new d("Invalid path: "+e,this);".."===j?g++:this.isScoped=!0}else f.push(j)}this.original=e,this.parts=f,this.string=f.join("."),this.depth=g,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,c){b.call(this,c),this.type="PARTIAL_NAME",this.name=a.original},DataNode:function(a,c){b.call(this,c),this.type="DATA",this.id=a},StringNode:function(a,c){b.call(this,c),this.type="STRING",this.original=this.string=this.stringModeValue=a},IntegerNode:function(a,c){b.call(this,c),this.type="INTEGER",this.original=this.integer=a,this.stringModeValue=Number(a)},BooleanNode:function(a,c){b.call(this,c),this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},CommentNode:function(a,c){b.call(this,c),this.type="comment",this.comment=a}};return c=e}(c),h=function(){"use strict";var a,b=function(){function a(a,b){return{left:"~"===a.charAt(2),right:"~"===b.charAt(0)||"~"===b.charAt(1)}}function b(){this.yy={}}var c={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(b,c,d,e,f,g,h){var i=g.length-1;switch(f){case 1:return new e.ProgramNode(g[i-1],this._$);case 2:return new e.ProgramNode([],this._$);case 3:this.$=new e.ProgramNode([],g[i-1],g[i],this._$);break;case 4:this.$=new e.ProgramNode(g[i-2],g[i-1],g[i],this._$);break;case 5:this.$=new e.ProgramNode(g[i-1],g[i],[],this._$);break;case 6:this.$=new e.ProgramNode(g[i],this._$);break;case 7:this.$=new e.ProgramNode([],this._$);break;case 8:this.$=new e.ProgramNode([],this._$);break;case 9:this.$=[g[i]];break;case 10:g[i-1].push(g[i]),this.$=g[i-1];break;case 11:this.$=new e.BlockNode(g[i-2],g[i-1].inverse,g[i-1],g[i],this._$);break;case 12:this.$=new e.BlockNode(g[i-2],g[i-1],g[i-1].inverse,g[i],this._$);break;case 13:this.$=g[i];break;case 14:this.$=g[i];break;case 15:this.$=new e.ContentNode(g[i],this._$);break;case 16:this.$=new e.CommentNode(g[i],this._$);break;case 17:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 18:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 19:this.$={path:g[i-1],strip:a(g[i-2],g[i])};break;case 20:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 21:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 22:this.$=new e.PartialNode(g[i-2],g[i-1],a(g[i-3],g[i]),this._$);break;case 23:this.$=a(g[i-1],g[i]);break;case 24:this.$=new e.SexprNode([g[i-2]].concat(g[i-1]),g[i],this._$);break;case 25:this.$=new e.SexprNode([g[i]],null,this._$);break;case 26:this.$=g[i];break;case 27:this.$=new e.StringNode(g[i],this._$);break;case 28:this.$=new e.IntegerNode(g[i],this._$);break;case 29:this.$=new e.BooleanNode(g[i],this._$);break;case 30:this.$=g[i];break;case 31:g[i-1].isHelper=!0,this.$=g[i-1];break;case 32:this.$=new e.HashNode(g[i],this._$);break;case 33:this.$=[g[i-2],g[i]];break;case 34:this.$=new e.PartialNameNode(g[i],this._$);break;case 35:this.$=new e.PartialNameNode(new e.StringNode(g[i],this._$),this._$);break;case 36:this.$=new e.PartialNameNode(new e.IntegerNode(g[i],this._$));break;case 37:this.$=new e.DataNode(g[i],this._$);break;case 38:this.$=new e.IdNode(g[i],this._$);break;case 39:g[i-2].push({part:g[i],separator:g[i-1]}),this.$=g[i-2];break;case 40:this.$=[{part:g[i]}];break;case 43:this.$=[];break;case 44:g[i-1].push(g[i]);break;case 47:this.$=[g[i]];break;case 48:g[i-1].push(g[i])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("\'"+this.terminals_[s]+"\'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\\n"+this.lexer.showPosition()+"\\nExpecting "+v.join(", ")+", got \'"+(this.terminals_[n]||n)+"\'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"\'"+(this.terminals_[n]||n)+"\'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},d=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\\r\\n?|\\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\\r\\n?|\\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\\r\\n?|\\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\\r\\n?|\\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\\r?\\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return e(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return e(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return b.yytext=e(1,2).replace(/\\\\"/g,\'"\'),32;case 24:return b.yytext=e(1,2).replace(/\\\\\'/g,"\'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return b.yytext=e(1,2),40;case 31:return"INVALID";case 32:return 5}},a.rules=[/^(?:[^\\x00]*?(?=(\\{\\{)))/,/^(?:[^\\x00]+)/,/^(?:[^\\x00]{2,}?(?=(\\{\\{|\\\\\\{\\{|\\\\\\\\\\{\\{|$)))/,/^(?:[\\s\\S]*?--\\}\\})/,/^(?:\\()/,/^(?:\\))/,/^(?:\\{\\{(~)?>)/,/^(?:\\{\\{(~)?#)/,/^(?:\\{\\{(~)?\\/)/,/^(?:\\{\\{(~)?\\^)/,/^(?:\\{\\{(~)?\\s*else\\b)/,/^(?:\\{\\{(~)?\\{)/,/^(?:\\{\\{(~)?&)/,/^(?:\\{\\{!--)/,/^(?:\\{\\{![\\s\\S]*?\\}\\})/,/^(?:\\{\\{(~)?)/,/^(?:=)/,/^(?:\\.\\.)/,/^(?:\\.(?=([=~}\\s\\/.)])))/,/^(?:[\\/.])/,/^(?:\\s+)/,/^(?:\\}(~)?\\}\\})/,/^(?:(~)?\\}\\})/,/^(?:"(\\\\["]|[^"])*")/,/^(?:\'(\\\\[\']|[^\'])*\')/,/^(?:@)/,/^(?:true(?=([~}\\s)])))/,/^(?:false(?=([~}\\s)])))/,/^(?:-?[0-9]+(?=([~}\\s)])))/,/^(?:([^\\s!"#%-,\\.\\/;->@\\[-\\^`\\{-~]+(?=([=~}\\s\\/.)]))))/,/^(?:\\[[^\\]]*\\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},a}();return c.lexer=d,b.prototype=c,c.Parser=b,new b}();return a=b}(),i=function(a,b){"use strict";function c(a){return a.constructor===f.ProgramNode?a:(e.yy=f,e.parse(a))}var d={},e=a,f=b;return d.parser=e,d.parse=c,d}(h,g),j=function(a){"use strict";function b(){}function c(a,b,c){if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function d(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var e;return function(a,b){return e||(e=d()),e.call(this,a,b)}}var e={},f=a;return e.Compiler=b,b.prototype={compiler:b,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;g>f;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c=\'"\'+c.replace("\\n","\\\\n")+\'"\'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){var b,c=a.strip||{};return c.left&&this.opcode("strip"),b=this[a.type](a),c.right&&this.opcode("strip"),b},program:function(a){for(var b=a.statements,c=0,d=b.length;d>c;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);"helper"===f?this.helperSexpr(e,c,d):"simple"===f?(this.simpleSexpr(e),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(e,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;f>e;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type),"sexpr"===c.type&&this.sexpr(c)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){this.sexpr(a.sexpr),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw new f("You specified knownHelpersOnly, but used the unknown helper "+e,a);this.opcode("invokeHelper",d.length,e,a.isRoot)}},sexpr:function(a){var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;d>c;c++)this.opcode("lookup",a.parts[c])},DATA:function(a){if(this.options.data=!0,a.id.isScoped||a.id.depth)throw new f("Scoped data references are not supported: "+a.original,a);this.opcode("lookupData");for(var b=a.id.parts,c=0,d=b.length;d>c;c++)this.opcode("lookup",b[c])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type),"sexpr"===b.type&&this.sexpr(b)):this[b.type](b)},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}},e.precompile=c,e.compile=d,e}(c),k=function(a,b){"use strict";function c(a){this.value=a}function d(){}var e,f=a.COMPILER_REVISION,g=a.REVISION_CHANGES,h=a.log,i=b;d.prototype={nameLookup:function(a,b){var c,e;return 0===a.indexOf("depth")&&(c=!0),e=/^[0-9]+$/.test(b)?a+"["+b+"]":d.isValidJavaScriptVariableName(b)?a+"."+b:a+"[\'"+b+"\']",c?"("+a+" && "+e+")":e},compilerInfo:function(){var a=f,b=g[a];return"this.compilerInfo = ["+a+",\'"+b+"\'];\\n"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},h("debug",this.environment.disassemble()+"\\n\\n"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]\n},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b);var e,f=a.opcodes;this.i=0;for(var g=f.length;this.i<g;this.i++)e=f[this.i],"DECLARE"===e.opcode?this[e.name]=e.value:this[e.opcode].apply(this,e.args),e.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new i("Compile completed with content left on stack");return this.createFunctionContext(d)},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);"),this.options.data&&(c+=" data = data || {};"),a.push(c)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);if(b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", ")),!this.isChild)for(var c in this.context.aliases)this.context.aliases.hasOwnProperty(c)&&(this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\\n"+this.context.programs.join("\\n")+"\\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],e=0,f=this.environment.depths.list.length;f>e;e++)d.push("depth"+this.environment.depths.list[e]);var g=this.mergeSource();if(this.isChild||(g=this.compilerInfo()+g),a)return d.push(g),Function.apply(this,d);var i="function "+(this.name||"")+"("+d.join(",")+") {\\n  "+g+"}";return h("debug",i+"\\n\\n"),i},mergeSource:function(){for(var a,b="",c=0,d=this.source.length;d>c;c++){var e=this.source[c];e.appendToBuffer?a=a?a+"\\n    + "+e.content:e.content:(a&&(b+="buffer += "+a+";\\n  ",a=void 0),b+=e+"\\n  ")}return b},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),this.pushSource("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.stripNext&&(a=a.replace(/^\\s+/,"")),this.pendingContent=a},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("\'\'")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType=\'"function"\',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"sexpr"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+a.contexts.join(",")+"}"),this.push("{"+a.types.join(",")+"}")),this.push("{\\n    "+a.values.join(",\\n    ")+"\\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b,c){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var d=this.lastHelper=this.setupHelper(a,b,!0),e=this.nameLookup("depth"+this.lastContext,b,"context"),f="helper = "+d.name+" || "+e;d.paramsInit&&(f+=","+d.paramsInit),this.push("("+f+",helper ? helper.call("+d.callParams+") : helperMissing.call("+d.helperMissingParams+"))"),c||this.flushInline()},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType=\'"function"\',this.useRegister("helper"),this.emptyHash();var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();c.paramsInit&&this.pushSource(c.paramsInit),this.pushSource("if (helper = "+d+") { "+f+" = helper.call("+c.callParams+"); }"),this.pushSource("else { helper = "+e+"; "+f+" = typeof helper === functionType ? helper.call("+c.callParams+") : helper; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"\'"+a+"\'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("\'"+a+"\': "+b),c&&e.types.push("\'"+a+"\': "+c),e.values.push("\'"+a+"\': ("+d+")")},compiler:d,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;g>f;f++)b=d[f],1===b?e.push("depth0"):e.push("depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.pushSource(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new c(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.pushSource(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,d,e,f="",g=this.isInline();if(g){var h=this.popStack(!0);if(h instanceof c)b=h.value,e=!0;else{d=!this.stackSlot;var i=d?this.incrStack():this.topStackName();f="("+this.push(i)+" = "+h+"),",b=this.topStack()}}else b=this.topStack();var j=a.call(this,b);return g?(e||this.popStack(),d&&this.stackSlot--,this.push("("+f+j+")")):(/^stack/.test(b)||(b=this.nextStack()),this.pushSource(b+" = ("+f+j+");")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,d=a.length;d>b;b++){var e=a[b];e instanceof c?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),d=(b?this.inlineStack:this.compileStack).pop();if(!a&&d instanceof c)return d.value;if(!b){if(!this.stackSlot)throw new i("Invalid stack pop");this.stackSlot--}return d},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,d=b[b.length-1];return!a&&d instanceof c?d.value:d},quotedString:function(a){return\'"\'+a.replace(/\\\\/g,"\\\\\\\\").replace(/"/g,\'\\\\"\').replace(/\\n/g,"\\\\n").replace(/\\r/g,"\\\\r").replace(/\\u2028/g,"\\\\u2028").replace(/\\u2029/g,"\\\\u2029")+\'"\'},setupHelper:function(a,b,c){var d=[],e=this.setupParams(a,d,c),f=this.nameLookup("helpers",b,"helper");return{params:d,paramsInit:e,name:f,callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupOptions:function(a,b){var c,d,e,f=[],g=[],h=[];f.push("hash:"+this.popStack()),this.options.stringParams&&(f.push("hashTypes:"+this.popStack()),f.push("hashContexts:"+this.popStack())),d=this.popStack(),e=this.popStack(),(e||d)&&(e||(this.context.aliases.self="this",e="self.noop"),d||(this.context.aliases.self="this",d="self.noop"),f.push("inverse:"+d),f.push("fn:"+e));for(var i=0;a>i;i++)c=this.popStack(),b.push(c),this.options.stringParams&&(h.push(this.popStack()),g.push(this.popStack()));return this.options.stringParams&&(f.push("contexts:["+g.join(",")+"]"),f.push("types:["+h.join(",")+"]")),this.options.data&&f.push("data:data"),f},setupParams:function(a,b,c){var d="{"+this.setupOptions(a,b).join(",")+"}";return c?(this.useRegister("options"),b.push("options"),"options="+d):(b.push(d),"")}};for(var j="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),k=d.RESERVED_WORDS={},l=0,m=j.length;m>l;l++)k[j[l]]=!0;return d.isValidJavaScriptVariableName=function(a){return!d.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)?!0:!1},e=d}(d,c),l=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c.parser,j=c.parse,k=d.Compiler,l=d.compile,m=d.precompile,n=e,o=g.create,p=function(){var a=o();return a.compile=function(b,c){return l(b,c,a)},a.precompile=function(b,c){return m(b,c,a)},a.AST=h,a.Compiler=k,a.JavaScriptCompiler=n,a.Parser=i,a.parse=j,a};return g=p(),g.create=p,f=g}(f,g,i,j,k);return l}();'},function(e,t,n){n(3)(n(53))},function(e,t){e.exports="//     Backbone.js 1.3.3\n\n//     (c) 2010-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(factory) {\n\n  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\n  // We use `self` instead of `window` for `WebWorker` support.\n  var root = (typeof self == 'object' && self.self === self && self) ||\n            (typeof global == 'object' && global.global === global && global);\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore'), $;\n    try { $ = require('jquery'); } catch (e) {}\n    factory(root, exports, _, $);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n})(function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create a local reference to a common array method we'll want to use later.\n  var slice = Array.prototype.slice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.3.3';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... this will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Proxy Backbone class methods to Underscore functions, wrapping the model's\n  // `attributes` object or collection's `models` array behind the scenes.\n  //\n  // collection.filter(function(model) { return model.get('age') > 10 });\n  // collection.each(this.addView);\n  //\n  // `Function#apply` can be slow so we use the method's arg count, if we know it.\n  var addMethod = function(length, method, attribute) {\n    switch (length) {\n      case 1: return function() {\n        return _[method](this[attribute]);\n      };\n      case 2: return function(value) {\n        return _[method](this[attribute], value);\n      };\n      case 3: return function(iteratee, context) {\n        return _[method](this[attribute], cb(iteratee, this), context);\n      };\n      case 4: return function(iteratee, defaultVal, context) {\n        return _[method](this[attribute], cb(iteratee, this), defaultVal, context);\n      };\n      default: return function() {\n        var args = slice.call(arguments);\n        args.unshift(this[attribute]);\n        return _[method].apply(_, args);\n      };\n    }\n  };\n  var addUnderscoreMethods = function(Class, methods, attribute) {\n    _.each(methods, function(length, method) {\n      if (_[method]) Class.prototype[method] = addMethod(length, method, attribute);\n    });\n  };\n\n  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\n  var cb = function(iteratee, instance) {\n    if (_.isFunction(iteratee)) return iteratee;\n    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\n    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\n    return iteratee;\n  };\n  var modelMatcher = function(attrs) {\n    var matcher = _.matches(attrs);\n    return function(model) {\n      return matcher(model.attributes);\n    };\n  };\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // a custom event channel. You may bind a callback to an event with `on` or\n  // remove with `off`; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {};\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Iterates over the standard `event, callback` (as well as the fancy multiple\n  // space-separated events `\"change blur\", callback` and jQuery-style event\n  // maps `{event: callback}`).\n  var eventsApi = function(iteratee, events, name, callback, opts) {\n    var i = 0, names;\n    if (name && typeof name === 'object') {\n      // Handle event maps.\n      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\n      for (names = _.keys(name); i < names.length ; i++) {\n        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\n      }\n    } else if (name && eventSplitter.test(name)) {\n      // Handle space-separated event names by delegating them individually.\n      for (names = name.split(eventSplitter); i < names.length; i++) {\n        events = iteratee(events, names[i], callback, opts);\n      }\n    } else {\n      // Finally, standard events.\n      events = iteratee(events, name, callback, opts);\n    }\n    return events;\n  };\n\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  Events.on = function(name, callback, context) {\n    return internalOn(this, name, callback, context);\n  };\n\n  // Guard the `listening` argument from the public API.\n  var internalOn = function(obj, name, callback, context, listening) {\n    obj._events = eventsApi(onApi, obj._events || {}, name, callback, {\n      context: context,\n      ctx: obj,\n      listening: listening\n    });\n\n    if (listening) {\n      var listeners = obj._listeners || (obj._listeners = {});\n      listeners[listening.id] = listening;\n    }\n\n    return obj;\n  };\n\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\n  // an event in another object... keeping track of what it's listening to\n  // for easier unbinding later.\n  Events.listenTo = function(obj, name, callback) {\n    if (!obj) return this;\n    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\n    var listening = listeningTo[id];\n\n    // This object is not listening to any other events on `obj` yet.\n    // Setup the necessary references to track the listening callbacks.\n    if (!listening) {\n      var thisId = this._listenId || (this._listenId = _.uniqueId('l'));\n      listening = listeningTo[id] = {obj: obj, objId: id, id: thisId, listeningTo: listeningTo, count: 0};\n    }\n\n    // Bind callbacks on obj, and keep track of them on listening.\n    internalOn(obj, name, callback, this, listening);\n    return this;\n  };\n\n  // The reducing API that adds a callback to the `events` object.\n  var onApi = function(events, name, callback, options) {\n    if (callback) {\n      var handlers = events[name] || (events[name] = []);\n      var context = options.context, ctx = options.ctx, listening = options.listening;\n      if (listening) listening.count++;\n\n      handlers.push({callback: callback, context: context, ctx: context || ctx, listening: listening});\n    }\n    return events;\n  };\n\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  Events.off = function(name, callback, context) {\n    if (!this._events) return this;\n    this._events = eventsApi(offApi, this._events, name, callback, {\n      context: context,\n      listeners: this._listeners\n    });\n    return this;\n  };\n\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  Events.stopListening = function(obj, name, callback) {\n    var listeningTo = this._listeningTo;\n    if (!listeningTo) return this;\n\n    var ids = obj ? [obj._listenId] : _.keys(listeningTo);\n\n    for (var i = 0; i < ids.length; i++) {\n      var listening = listeningTo[ids[i]];\n\n      // If listening doesn't exist, this object is not currently\n      // listening to obj. Break out early.\n      if (!listening) break;\n\n      listening.obj.off(name, callback, this);\n    }\n\n    return this;\n  };\n\n  // The reducing API that removes a callback from the `events` object.\n  var offApi = function(events, name, callback, options) {\n    if (!events) return;\n\n    var i = 0, listening;\n    var context = options.context, listeners = options.listeners;\n\n    // Delete all events listeners and \"drop\" events.\n    if (!name && !callback && !context) {\n      var ids = _.keys(listeners);\n      for (; i < ids.length; i++) {\n        listening = listeners[ids[i]];\n        delete listeners[listening.id];\n        delete listening.listeningTo[listening.objId];\n      }\n      return;\n    }\n\n    var names = name ? [name] : _.keys(events);\n    for (; i < names.length; i++) {\n      name = names[i];\n      var handlers = events[name];\n\n      // Bail out if there are no events stored.\n      if (!handlers) break;\n\n      // Replace events if there are any remaining.  Otherwise, clean up.\n      var remaining = [];\n      for (var j = 0; j < handlers.length; j++) {\n        var handler = handlers[j];\n        if (\n          callback && callback !== handler.callback &&\n            callback !== handler.callback._callback ||\n              context && context !== handler.context\n        ) {\n          remaining.push(handler);\n        } else {\n          listening = handler.listening;\n          if (listening && --listening.count === 0) {\n            delete listeners[listening.id];\n            delete listening.listeningTo[listening.objId];\n          }\n        }\n      }\n\n      // Update tail event if the list has any events.  Otherwise, clean up.\n      if (remaining.length) {\n        events[name] = remaining;\n      } else {\n        delete events[name];\n      }\n    }\n    return events;\n  };\n\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, its listener will be removed. If multiple events\n  // are passed in using the space-separated syntax, the handler will fire\n  // once for each event, not once for a combination of all events.\n  Events.once = function(name, callback, context) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.off, this));\n    if (typeof name === 'string' && context == null) callback = void 0;\n    return this.on(events, callback, context);\n  };\n\n  // Inversion-of-control versions of `once`.\n  Events.listenToOnce = function(obj, name, callback) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.stopListening, this, obj));\n    return this.listenTo(obj, events);\n  };\n\n  // Reduces the event callbacks into a map of `{event: onceWrapper}`.\n  // `offer` unbinds the `onceWrapper` after it has been called.\n  var onceMap = function(map, name, callback, offer) {\n    if (callback) {\n      var once = map[name] = _.once(function() {\n        offer(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n    }\n    return map;\n  };\n\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  Events.trigger = function(name) {\n    if (!this._events) return this;\n\n    var length = Math.max(0, arguments.length - 1);\n    var args = Array(length);\n    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\n\n    eventsApi(triggerApi, this._events, name, void 0, args);\n    return this;\n  };\n\n  // Handles triggering the appropriate event callbacks.\n  var triggerApi = function(objEvents, name, callback, args) {\n    if (objEvents) {\n      var events = objEvents[name];\n      var allEvents = objEvents.all;\n      if (events && allEvents) allEvents = allEvents.slice();\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, [name].concat(args));\n    }\n    return objEvents;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId(this.cidPrefix);\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    var defaults = _.result(this, 'defaults');\n    attrs = _.defaults(_.extend({}, defaults, attrs), defaults);\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // The prefix is used to create the client id which is used to identify models locally.\n    // You may want to override this if you're experiencing name clashes with model ids.\n    cidPrefix: 'c',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Special-cased proxy to underscore's `_.matches` method.\n    matches: function(attrs) {\n      return !!_.iteratee(attrs, this)(this.attributes);\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      var unset      = options.unset;\n      var silent     = options.silent;\n      var changes    = [];\n      var changing   = this._changing;\n      this._changing = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n\n      var current = this.attributes;\n      var changed = this.changed;\n      var prev    = this._previousAttributes;\n\n      // For each `set` attribute, update or delete the current value.\n      for (var attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          changed[attr] = val;\n        } else {\n          delete changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Update the `id`.\n      if (this.idAttribute in attrs) this.id = this.get(this.idAttribute);\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0; i < changes.length; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      var changed = {};\n      for (var attr in diff) {\n        var val = diff[attr];\n        if (_.isEqual(old[attr], val)) continue;\n        changed[attr] = val;\n      }\n      return _.size(changed) ? changed : false;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server, merging the response with the model's\n    // local attributes. Any changed attributes will trigger a \"change\" event.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (!model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true, parse: true}, options);\n      var wait = options.wait;\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !wait) {\n        if (!this.set(attrs, options)) return false;\n      } else if (!this._validate(attrs, options)) {\n        return false;\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      var model = this;\n      var success = options.success;\n      var attributes = this.attributes;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\n        if (serverAttrs && !model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      // Set temporary attributes if `{wait: true}` to properly find new ids.\n      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\n\n      var method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method === 'patch' && !options.attrs) options.attrs = attrs;\n      var xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n      var wait = options.wait;\n\n      var destroy = function() {\n        model.stopListening();\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (wait) destroy();\n        if (success) success.call(options.context, model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      var xhr = false;\n      if (this.isNew()) {\n        _.defer(options.success);\n      } else {\n        wrapError(this, options);\n        xhr = this.sync('delete', this, options);\n      }\n      if (!wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      var id = this.get(this.idAttribute);\n      return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.extend({}, options, {validate: true}));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Model, mapped to the\n  // number of arguments they take.\n  var modelMethods = {keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\n      omit: 0, chain: 1, isEmpty: 1};\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  addUnderscoreMethods(Model, modelMethods, 'attributes');\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analogous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Splices `insert` into `array` at index `at`.\n  var splice = function(array, insert, at) {\n    at = Math.min(Math.max(at, 0), array.length);\n    var tail = Array(array.length - at);\n    var length = insert.length;\n    var i;\n    for (i = 0; i < tail.length; i++) tail[i] = array[i + at];\n    for (i = 0; i < length; i++) array[i + at] = insert[i];\n    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\n  };\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model) { return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set. `models` may be Backbone\n    // Models or raw JavaScript objects to be converted to Models, or any\n    // combination of the two.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      options = _.extend({}, options);\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n      var removed = this._removeModels(models, options);\n      if (!options.silent && removed.length) {\n        options.changes = {added: [], merged: [], removed: removed};\n        this.trigger('update', this, options);\n      }\n      return singular ? removed[0] : removed;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      if (models == null) return;\n\n      options = _.extend({}, setOptions, options);\n      if (options.parse && !this._isModel(models)) {\n        models = this.parse(models, options) || [];\n      }\n\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n\n      var at = options.at;\n      if (at != null) at = +at;\n      if (at > this.length) at = this.length;\n      if (at < 0) at += this.length + 1;\n\n      var set = [];\n      var toAdd = [];\n      var toMerge = [];\n      var toRemove = [];\n      var modelMap = {};\n\n      var add = options.add;\n      var merge = options.merge;\n      var remove = options.remove;\n\n      var sort = false;\n      var sortable = this.comparator && at == null && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      var model, i;\n      for (i = 0; i < models.length; i++) {\n        model = models[i];\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        var existing = this.get(model);\n        if (existing) {\n          if (merge && model !== existing) {\n            var attrs = this._isModel(model) ? model.attributes : model;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            toMerge.push(existing);\n            if (sortable && !sort) sort = existing.hasChanged(sortAttr);\n          }\n          if (!modelMap[existing.cid]) {\n            modelMap[existing.cid] = true;\n            set.push(existing);\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(model, options);\n          if (model) {\n            toAdd.push(model);\n            this._addReference(model, options);\n            modelMap[model.cid] = true;\n            set.push(model);\n          }\n        }\n      }\n\n      // Remove stale models.\n      if (remove) {\n        for (i = 0; i < this.length; i++) {\n          model = this.models[i];\n          if (!modelMap[model.cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this._removeModels(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      var orderChanged = false;\n      var replace = !sortable && add && remove;\n      if (set.length && replace) {\n        orderChanged = this.length !== set.length || _.some(this.models, function(m, index) {\n          return m !== set[index];\n        });\n        this.models.length = 0;\n        splice(this.models, set, 0);\n        this.length = this.models.length;\n      } else if (toAdd.length) {\n        if (sortable) sort = true;\n        splice(this.models, toAdd, at == null ? this.length : at);\n        this.length = this.models.length;\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort/update events.\n      if (!options.silent) {\n        for (i = 0; i < toAdd.length; i++) {\n          if (at != null) options.index = at + i;\n          model = toAdd[i];\n          model.trigger('add', model, this, options);\n        }\n        if (sort || orderChanged) this.trigger('sort', this, options);\n        if (toAdd.length || toRemove.length || toMerge.length) {\n          options.changes = {\n            added: toAdd,\n            removed: toRemove,\n            merged: toMerge\n          };\n          this.trigger('update', this, options);\n        }\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options = options ? _.clone(options) : {};\n      for (var i = 0; i < this.models.length; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      return this.remove(model, options);\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      return this.remove(model, options);\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id, cid, model object with id or cid\n    // properties, or an attributes object that is transformed through modelId.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      return this._byId[obj] ||\n        this._byId[this.modelId(obj.attributes || obj)] ||\n        obj.cid && this._byId[obj.cid];\n    },\n\n    // Returns `true` if the model is in the collection.\n    has: function(obj) {\n      return this.get(obj) != null;\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      if (index < 0) index += this.length;\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      return this[first ? 'find' : 'filter'](attrs);\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      var comparator = this.comparator;\n      if (!comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      var length = comparator.length;\n      if (_.isFunction(comparator)) comparator = _.bind(comparator, this);\n\n      // Run sort based on type of `comparator`.\n      if (length === 1 || _.isString(comparator)) {\n        this.models = this.sortBy(comparator);\n      } else {\n        this.models.sort(comparator);\n      }\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return this.map(attr + '');\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success.call(options.context, collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      var wait = options.wait;\n      model = this._prepareModel(model, options);\n      if (!model) return false;\n      if (!wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(m, resp, callbackOpts) {\n        if (wait) collection.add(m, callbackOpts);\n        if (success) success.call(callbackOpts.context, m, resp, callbackOpts);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models, {\n        model: this.model,\n        comparator: this.comparator\n      });\n    },\n\n    // Define how to uniquely identify models in the collection.\n    modelId: function(attrs) {\n      return attrs[this.model.prototype.idAttribute || 'id'];\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (this._isModel(attrs)) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method called by both remove and set.\n    _removeModels: function(models, options) {\n      var removed = [];\n      for (var i = 0; i < models.length; i++) {\n        var model = this.get(models[i]);\n        if (!model) continue;\n\n        var index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n\n        // Remove references before triggering 'remove' event to prevent an\n        // infinite loop. #3693\n        delete this._byId[model.cid];\n        var id = this.modelId(model.attributes);\n        if (id != null) delete this._byId[id];\n\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n\n        removed.push(model);\n        this._removeReference(model, options);\n      }\n      return removed;\n    },\n\n    // Method for checking whether an object should be considered a model for\n    // the purposes of adding to the collection.\n    _isModel: function(model) {\n      return model instanceof Model;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      var id = this.modelId(model.attributes);\n      if (id != null) this._byId[id] = model;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      delete this._byId[model.cid];\n      var id = this.modelId(model.attributes);\n      if (id != null) delete this._byId[id];\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if (model) {\n        if ((event === 'add' || event === 'remove') && collection !== this) return;\n        if (event === 'destroy') this.remove(model, options);\n        if (event === 'change') {\n          var prevId = this.modelId(model.previousAttributes());\n          var id = this.modelId(model.attributes);\n          if (prevId !== id) {\n            if (prevId != null) delete this._byId[prevId];\n            if (id != null) this._byId[id] = model;\n          }\n        }\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var collectionMethods = {forEach: 3, each: 3, map: 3, collect: 3, reduce: 0,\n      foldl: 0, inject: 0, reduceRight: 0, foldr: 0, find: 3, detect: 3, filter: 3,\n      select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\n      contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\n      head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\n      without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\n      isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\n      sortBy: 3, indexBy: 3, findIndex: 3, findLastIndex: 3};\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  addUnderscoreMethods(Collection, collectionMethods, 'models');\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be set as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this._removeElement();\n      this.stopListening();\n      return this;\n    },\n\n    // Remove this view's element from the document and all event listeners\n    // attached to it. Exposed for subclasses using an alternative DOM\n    // manipulation API.\n    _removeElement: function() {\n      this.$el.remove();\n    },\n\n    // Change the view's element (`this.el` property) and re-delegate the\n    // view's events on the new element.\n    setElement: function(element) {\n      this.undelegateEvents();\n      this._setElement(element);\n      this.delegateEvents();\n      return this;\n    },\n\n    // Creates the `this.el` and `this.$el` references for this view using the\n    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n    // context or an element. Subclasses can override this to utilize an\n    // alternative DOM manipulation API and are only required to set the\n    // `this.el` property.\n    _setElement: function(el) {\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n      this.el = this.$el[0];\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    delegateEvents: function(events) {\n      events || (events = _.result(this, 'events'));\n      if (!events) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[method];\n        if (!method) continue;\n        var match = key.match(delegateEventSplitter);\n        this.delegate(match[1], match[2], _.bind(method, this));\n      }\n      return this;\n    },\n\n    // Add a single event listener to the view's element (or a child element\n    // using `selector`). This only works for delegate-able events: not `focus`,\n    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n    delegate: function(eventName, selector, listener) {\n      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view by `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      if (this.$el) this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // A finer-grained `undelegateEvents` for removing a single delegated event.\n    // `selector` and `listener` are both optional.\n    undelegate: function(eventName, selector, listener) {\n      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Produces a DOM element to be assigned to your view. Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _createElement: function(tagName) {\n      return document.createElement(tagName);\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        this.setElement(this._createElement(_.result(this, 'tagName')));\n        this._setAttributes(attrs);\n      } else {\n        this.setElement(_.result(this, 'el'));\n      }\n    },\n\n    // Set attributes from a hash on this view's element.  Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _setAttributes: function(attributes) {\n      this.$el.attr(attributes);\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // Pass along `textStatus` and `errorThrown` from jQuery.\n    var error = options.error;\n    options.error = function(xhr, textStatus, errorThrown) {\n      options.textStatus = textStatus;\n      options.errorThrown = errorThrown;\n      if (error) error.call(options.context, xhr, textStatus, errorThrown);\n    };\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch': 'PATCH',\n    'delete': 'DELETE',\n    'read': 'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        if (router.execute(callback, args, name) !== false) {\n          router.trigger.apply(router, ['route:' + name].concat(args));\n          router.trigger('route', name, args);\n          Backbone.history.trigger('route', router, name, args);\n        }\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args, name) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, function(match, optional) {\n                     return optional ? match : '([^/?]+)';\n                   })\n                   .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    this.checkUrl = _.bind(this.checkUrl, this);\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\n      return path === this.root && !this.getSearch();\n    },\n\n    // Does the pathname match the root?\n    matchRoot: function() {\n      var path = this.decodeFragment(this.location.pathname);\n      var rootPath = path.slice(0, this.root.length - 1) + '/';\n      return rootPath === this.root;\n    },\n\n    // Unicode characters in `location.pathname` are percent encoded so they're\n    // decoded for comparison. `%25` should not be decoded since it may be part\n    // of an encoded parameter.\n    decodeFragment: function(fragment) {\n      return decodeURI(fragment.replace(/%25/g, '%2525'));\n    },\n\n    // In IE6, the hash fragment and search params are incorrect if the\n    // fragment contains `?`.\n    getSearch: function() {\n      var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\n      return match ? match[0] : '';\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the pathname and search params, without the root.\n    getPath: function() {\n      var path = this.decodeFragment(\n        this.location.pathname + this.getSearch()\n      ).slice(this.root.length - 1);\n      return path.charAt(0) === '/' ? path.slice(1) : path;\n    },\n\n    // Get the cross-browser normalized URL fragment from the path or hash.\n    getFragment: function(fragment) {\n      if (fragment == null) {\n        if (this._usePushState || !this._wantsHashChange) {\n          fragment = this.getPath();\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error('Backbone.history has already been started');\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\n      this._useHashChange   = this._wantsHashChange && this._hasHashChange;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.history && this.history.pushState);\n      this._usePushState    = this._wantsPushState && this._hasPushState;\n      this.fragment         = this.getFragment();\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          var rootPath = this.root.slice(0, -1) || '/';\n          this.location.replace(rootPath + '#' + this.getPath());\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot()) {\n          this.navigate(this.getHash(), {replace: true});\n        }\n\n      }\n\n      // Proxy an iframe to handle location events if the browser doesn't\n      // support the `hashchange` event, HTML5 history, or the user wants\n      // `hashChange` but not `pushState`.\n      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\n        this.iframe = document.createElement('iframe');\n        this.iframe.src = 'javascript:0';\n        this.iframe.style.display = 'none';\n        this.iframe.tabIndex = -1;\n        var body = document.body;\n        // Using `appendChild` will throw on IE < 9 if the document is not ready.\n        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\n        iWindow.document.open();\n        iWindow.document.close();\n        iWindow.location.hash = '#' + this.fragment;\n      }\n\n      // Add a cross-platform `addEventListener` shim for older browsers.\n      var addEventListener = window.addEventListener || function(eventName, listener) {\n        return attachEvent('on' + eventName, listener);\n      };\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._usePushState) {\n        addEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        addEventListener('hashchange', this.checkUrl, false);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      // Add a cross-platform `removeEventListener` shim for older browsers.\n      var removeEventListener = window.removeEventListener || function(eventName, listener) {\n        return detachEvent('on' + eventName, listener);\n      };\n\n      // Remove window listeners.\n      if (this._usePushState) {\n        removeEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        removeEventListener('hashchange', this.checkUrl, false);\n      }\n\n      // Clean up the iframe if necessary.\n      if (this.iframe) {\n        document.body.removeChild(this.iframe);\n        this.iframe = null;\n      }\n\n      // Some environments will throw when clearing an undefined interval.\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n\n      // If the user pressed the back button, the iframe's hash will have\n      // changed and we should use that for comparison.\n      if (current === this.fragment && this.iframe) {\n        current = this.getHash(this.iframe.contentWindow);\n      }\n\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      // If the root doesn't match, no routes can match either.\n      if (!this.matchRoot()) return false;\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.some(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      // Normalize the fragment.\n      fragment = this.getFragment(fragment || '');\n\n      // Don't include a trailing slash on the root.\n      var rootPath = this.root;\n      if (fragment === '' || fragment.charAt(0) === '?') {\n        rootPath = rootPath.slice(0, -1) || '/';\n      }\n      var url = rootPath + fragment;\n\n      // Strip the hash and decode for matching.\n      fragment = this.decodeFragment(fragment.replace(pathStripper, ''));\n\n      if (this.fragment === fragment) return;\n      this.fragment = fragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._usePushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && fragment !== this.getHash(this.iframe.contentWindow)) {\n          var iWindow = this.iframe.contentWindow;\n\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if (!options.replace) {\n            iWindow.document.open();\n            iWindow.document.close();\n          }\n\n          this._updateHash(iWindow.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function and add the prototype properties.\n    child.prototype = _.create(parent.prototype, protoProps);\n    child.prototype.constructor = child;\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error.call(options.context, model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n});\n"},function(e,t,n){n(3)(n(55))},function(e,t){e.exports='//     Underscore.js 1.9.1\n//     http://underscorejs.org\n//     (c) 2009-2018 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n!function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},r=n._,e=Array.prototype,o=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,u=e.push,c=e.slice,p=o.toString,i=o.hasOwnProperty,t=Array.isArray,a=Object.keys,l=Object.create,f=function(){},h=function(n){return n instanceof h?n:this instanceof h?void(this._wrapped=n):new h(n)};"undefined"==typeof exports||exports.nodeType?n._=h:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=h),exports._=h),h.VERSION="1.9.1";var v,y=function(u,i,n){if(void 0===i)return u;switch(null==n?3:n){case 1:return function(n){return u.call(i,n)};case 3:return function(n,r,t){return u.call(i,n,r,t)};case 4:return function(n,r,t,e){return u.call(i,n,r,t,e)}}return function(){return u.apply(i,arguments)}},d=function(n,r,t){return h.iteratee!==v?h.iteratee(n,r):null==n?h.identity:h.isFunction(n)?y(n,r,t):h.isObject(n)&&!h.isArray(n)?h.matcher(n):h.property(n)};h.iteratee=v=function(n,r){return d(n,r,1/0)};var g=function(u,i){return i=null==i?u.length-1:+i,function(){for(var n=Math.max(arguments.length-i,0),r=Array(n),t=0;t<n;t++)r[t]=arguments[t+i];switch(i){case 0:return u.call(this,r);case 1:return u.call(this,arguments[0],r);case 2:return u.call(this,arguments[0],arguments[1],r)}var e=Array(i+1);for(t=0;t<i;t++)e[t]=arguments[t];return e[i]=r,u.apply(this,e)}},m=function(n){if(!h.isObject(n))return{};if(l)return l(n);f.prototype=n;var r=new f;return f.prototype=null,r},b=function(r){return function(n){return null==n?void 0:n[r]}},j=function(n,r){return null!=n&&i.call(n,r)},x=function(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0},_=Math.pow(2,53)-1,A=b("length"),w=function(n){var r=A(n);return"number"==typeof r&&0<=r&&r<=_};h.each=h.forEach=function(n,r,t){var e,u;if(r=y(r,t),w(n))for(e=0,u=n.length;e<u;e++)r(n[e],e,n);else{var i=h.keys(n);for(e=0,u=i.length;e<u;e++)r(n[i[e]],i[e],n)}return n},h.map=h.collect=function(n,r,t){r=d(r,t);for(var e=!w(n)&&h.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=r(n[a],a,n)}return i};var O=function(c){return function(n,r,t,e){var u=3<=arguments.length;return function(n,r,t,e){var u=!w(n)&&h.keys(n),i=(u||n).length,o=0<c?0:i-1;for(e||(t=n[u?u[o]:o],o+=c);0<=o&&o<i;o+=c){var a=u?u[o]:o;t=r(t,n[a],a,n)}return t}(n,y(r,e,4),t,u)}};h.reduce=h.foldl=h.inject=O(1),h.reduceRight=h.foldr=O(-1),h.find=h.detect=function(n,r,t){var e=(w(n)?h.findIndex:h.findKey)(n,r,t);if(void 0!==e&&-1!==e)return n[e]},h.filter=h.select=function(n,e,r){var u=[];return e=d(e,r),h.each(n,function(n,r,t){e(n,r,t)&&u.push(n)}),u},h.reject=function(n,r,t){return h.filter(n,h.negate(d(r)),t)},h.every=h.all=function(n,r,t){r=d(r,t);for(var e=!w(n)&&h.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!r(n[o],o,n))return!1}return!0},h.some=h.any=function(n,r,t){r=d(r,t);for(var e=!w(n)&&h.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(r(n[o],o,n))return!0}return!1},h.contains=h.includes=h.include=function(n,r,t,e){return w(n)||(n=h.values(n)),("number"!=typeof t||e)&&(t=0),0<=h.indexOf(n,r,t)},h.invoke=g(function(n,t,e){var u,i;return h.isFunction(t)?i=t:h.isArray(t)&&(u=t.slice(0,-1),t=t[t.length-1]),h.map(n,function(n){var r=i;if(!r){if(u&&u.length&&(n=x(n,u)),null==n)return;r=n[t]}return null==r?r:r.apply(n,e)})}),h.pluck=function(n,r){return h.map(n,h.property(r))},h.where=function(n,r){return h.filter(n,h.matcher(r))},h.findWhere=function(n,r){return h.find(n,h.matcher(r))},h.max=function(n,e,r){var t,u,i=-1/0,o=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=w(n)?n:h.values(n)).length;a<c;a++)null!=(t=n[a])&&i<t&&(i=t);else e=d(e,r),h.each(n,function(n,r,t){u=e(n,r,t),(o<u||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},h.min=function(n,e,r){var t,u,i=1/0,o=1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=w(n)?n:h.values(n)).length;a<c;a++)null!=(t=n[a])&&t<i&&(i=t);else e=d(e,r),h.each(n,function(n,r,t){((u=e(n,r,t))<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},h.shuffle=function(n){return h.sample(n,1/0)},h.sample=function(n,r,t){if(null==r||t)return w(n)||(n=h.values(n)),n[h.random(n.length-1)];var e=w(n)?h.clone(n):h.values(n),u=A(e);r=Math.max(Math.min(r,u),0);for(var i=u-1,o=0;o<r;o++){var a=h.random(o,i),c=e[o];e[o]=e[a],e[a]=c}return e.slice(0,r)},h.sortBy=function(n,e,r){var u=0;return e=d(e,r),h.pluck(h.map(n,function(n,r,t){return{value:n,index:u++,criteria:e(n,r,t)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(e<t||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index}),"value")};var k=function(o,r){return function(e,u,n){var i=r?[[],[]]:{};return u=d(u,n),h.each(e,function(n,r){var t=u(n,r,e);o(i,n,t)}),i}};h.groupBy=k(function(n,r,t){j(n,t)?n[t].push(r):n[t]=[r]}),h.indexBy=k(function(n,r,t){n[t]=r}),h.countBy=k(function(n,r,t){j(n,t)?n[t]++:n[t]=1});var S=/[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;h.toArray=function(n){return n?h.isArray(n)?c.call(n):h.isString(n)?n.match(S):w(n)?h.map(n,h.identity):h.values(n):[]},h.size=function(n){return null==n?0:w(n)?n.length:h.keys(n).length},h.partition=k(function(n,r,t){n[t?0:1].push(r)},!0),h.first=h.head=h.take=function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[0]:h.initial(n,n.length-r)},h.initial=function(n,r,t){return c.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))},h.last=function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[n.length-1]:h.rest(n,Math.max(0,n.length-r))},h.rest=h.tail=h.drop=function(n,r,t){return c.call(n,null==r||t?1:r)},h.compact=function(n){return h.filter(n,Boolean)};var M=function(n,r,t,e){for(var u=(e=e||[]).length,i=0,o=A(n);i<o;i++){var a=n[i];if(w(a)&&(h.isArray(a)||h.isArguments(a)))if(r)for(var c=0,l=a.length;c<l;)e[u++]=a[c++];else M(a,r,t,e),u=e.length;else t||(e[u++]=a)}return e};h.flatten=function(n,r){return M(n,r,!1)},h.without=g(function(n,r){return h.difference(n,r)}),h.uniq=h.unique=function(n,r,t,e){h.isBoolean(r)||(e=t,t=r,r=!1),null!=t&&(t=d(t,e));for(var u=[],i=[],o=0,a=A(n);o<a;o++){var c=n[o],l=t?t(c,o,n):c;r&&!t?(o&&i===l||u.push(c),i=l):t?h.contains(i,l)||(i.push(l),u.push(c)):h.contains(u,c)||u.push(c)}return u},h.union=g(function(n){return h.uniq(M(n,!0,!0))}),h.intersection=function(n){for(var r=[],t=arguments.length,e=0,u=A(n);e<u;e++){var i=n[e];if(!h.contains(r,i)){var o;for(o=1;o<t&&h.contains(arguments[o],i);o++);o===t&&r.push(i)}}return r},h.difference=g(function(n,r){return r=M(r,!0,!0),h.filter(n,function(n){return!h.contains(r,n)})}),h.unzip=function(n){for(var r=n&&h.max(n,A).length||0,t=Array(r),e=0;e<r;e++)t[e]=h.pluck(n,e);return t},h.zip=g(h.unzip),h.object=function(n,r){for(var t={},e=0,u=A(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t};var F=function(i){return function(n,r,t){r=d(r,t);for(var e=A(n),u=0<i?0:e-1;0<=u&&u<e;u+=i)if(r(n[u],u,n))return u;return-1}};h.findIndex=F(1),h.findLastIndex=F(-1),h.sortedIndex=function(n,r,t,e){for(var u=(t=d(t,e,1))(r),i=0,o=A(n);i<o;){var a=Math.floor((i+o)/2);t(n[a])<u?i=a+1:o=a}return i};var E=function(i,o,a){return function(n,r,t){var e=0,u=A(n);if("number"==typeof t)0<i?e=0<=t?t:Math.max(t+u,e):u=0<=t?Math.min(t+1,u):t+u+1;else if(a&&t&&u)return n[t=a(n,r)]===r?t:-1;if(r!=r)return 0<=(t=o(c.call(n,e,u),h.isNaN))?t+e:-1;for(t=0<i?e:u-1;0<=t&&t<u;t+=i)if(n[t]===r)return t;return-1}};h.indexOf=E(1,h.findIndex,h.sortedIndex),h.lastIndexOf=E(-1,h.findLastIndex),h.range=function(n,r,t){null==r&&(r=n||0,n=0),t||(t=r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),i=0;i<e;i++,n+=t)u[i]=n;return u},h.chunk=function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(c.call(n,e,e+=r));return t};var N=function(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var i=m(n.prototype),o=n.apply(i,u);return h.isObject(o)?o:i};h.bind=g(function(r,t,e){if(!h.isFunction(r))throw new TypeError("Bind must be called on a function");var u=g(function(n){return N(r,u,t,this,e.concat(n))});return u}),h.partial=g(function(u,i){var o=h.partial.placeholder,a=function(){for(var n=0,r=i.length,t=Array(r),e=0;e<r;e++)t[e]=i[e]===o?arguments[n++]:i[e];for(;n<arguments.length;)t.push(arguments[n++]);return N(u,a,this,this,t)};return a}),(h.partial.placeholder=h).bindAll=g(function(n,r){var t=(r=M(r,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=h.bind(n[e],n)}}),h.memoize=function(e,u){var i=function(n){var r=i.cache,t=""+(u?u.apply(this,arguments):n);return j(r,t)||(r[t]=e.apply(this,arguments)),r[t]};return i.cache={},i},h.delay=g(function(n,r,t){return setTimeout(function(){return n.apply(null,t)},r)}),h.defer=h.partial(h.delay,h,1),h.throttle=function(t,e,u){var i,o,a,c,l=0;u||(u={});var f=function(){l=!1===u.leading?0:h.now(),i=null,c=t.apply(o,a),i||(o=a=null)},n=function(){var n=h.now();l||!1!==u.leading||(l=n);var r=e-(n-l);return o=this,a=arguments,r<=0||e<r?(i&&(clearTimeout(i),i=null),l=n,c=t.apply(o,a),i||(o=a=null)):i||!1===u.trailing||(i=setTimeout(f,r)),c};return n.cancel=function(){clearTimeout(i),l=0,i=o=a=null},n},h.debounce=function(t,e,u){var i,o,a=function(n,r){i=null,r&&(o=t.apply(n,r))},n=g(function(n){if(i&&clearTimeout(i),u){var r=!i;i=setTimeout(a,e),r&&(o=t.apply(this,n))}else i=h.delay(a,e,this,n);return o});return n.cancel=function(){clearTimeout(i),i=null},n},h.wrap=function(n,r){return h.partial(r,n)},h.negate=function(n){return function(){return!n.apply(this,arguments)}},h.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},h.after=function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},h.before=function(n,r){var t;return function(){return 0<--n&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}},h.once=h.partial(h.before,2),h.restArguments=g;var I=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],B=function(n,r){var t=T.length,e=n.constructor,u=h.isFunction(e)&&e.prototype||o,i="constructor";for(j(n,i)&&!h.contains(r,i)&&r.push(i);t--;)(i=T[t])in n&&n[i]!==u[i]&&!h.contains(r,i)&&r.push(i)};h.keys=function(n){if(!h.isObject(n))return[];if(a)return a(n);var r=[];for(var t in n)j(n,t)&&r.push(t);return I&&B(n,r),r},h.allKeys=function(n){if(!h.isObject(n))return[];var r=[];for(var t in n)r.push(t);return I&&B(n,r),r},h.values=function(n){for(var r=h.keys(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e},h.mapObject=function(n,r,t){r=d(r,t);for(var e=h.keys(n),u=e.length,i={},o=0;o<u;o++){var a=e[o];i[a]=r(n[a],a,n)}return i},h.pairs=function(n){for(var r=h.keys(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},h.invert=function(n){for(var r={},t=h.keys(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r},h.functions=h.methods=function(n){var r=[];for(var t in n)h.isFunction(n[t])&&r.push(t);return r.sort()};var R=function(c,l){return function(n){var r=arguments.length;if(l&&(n=Object(n)),r<2||null==n)return n;for(var t=1;t<r;t++)for(var e=arguments[t],u=c(e),i=u.length,o=0;o<i;o++){var a=u[o];l&&void 0!==n[a]||(n[a]=e[a])}return n}};h.extend=R(h.allKeys),h.extendOwn=h.assign=R(h.keys),h.findKey=function(n,r,t){r=d(r,t);for(var e,u=h.keys(n),i=0,o=u.length;i<o;i++)if(r(n[e=u[i]],e,n))return e};var q,K,z=function(n,r,t){return r in t};h.pick=g(function(n,r){var t={},e=r[0];if(null==n)return t;h.isFunction(e)?(1<r.length&&(e=y(e,r[1])),r=h.allKeys(n)):(e=z,r=M(r,!1,!1),n=Object(n));for(var u=0,i=r.length;u<i;u++){var o=r[u],a=n[o];e(a,o,n)&&(t[o]=a)}return t}),h.omit=g(function(n,t){var r,e=t[0];return h.isFunction(e)?(e=h.negate(e),1<t.length&&(r=t[1])):(t=h.map(M(t,!1,!1),String),e=function(n,r){return!h.contains(t,r)}),h.pick(n,e,r)}),h.defaults=R(h.allKeys,!0),h.create=function(n,r){var t=m(n);return r&&h.extendOwn(t,r),t},h.clone=function(n){return h.isObject(n)?h.isArray(n)?n.slice():h.extend({},n):n},h.tap=function(n,r){return r(n),n},h.isMatch=function(n,r){var t=h.keys(r),e=t.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=t[i];if(r[o]!==u[o]||!(o in u))return!1}return!0},q=function(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!=n)return r!=r;var u=typeof n;return("function"===u||"object"===u||"object"==typeof r)&&K(n,r,t,e)},K=function(n,r,t,e){n instanceof h&&(n=n._wrapped),r instanceof h&&(r=r._wrapped);var u=p.call(n);if(u!==p.call(r))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!=+n?+r!=+r:0==+n?1/+n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r;case"[object Symbol]":return s.valueOf.call(n)===s.valueOf.call(r)}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof r)return!1;var o=n.constructor,a=r.constructor;if(o!==a&&!(h.isFunction(o)&&o instanceof o&&h.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in r)return!1}e=e||[];for(var c=(t=t||[]).length;c--;)if(t[c]===n)return e[c]===r;if(t.push(n),e.push(r),i){if((c=n.length)!==r.length)return!1;for(;c--;)if(!q(n[c],r[c],t,e))return!1}else{var l,f=h.keys(n);if(c=f.length,h.keys(r).length!==c)return!1;for(;c--;)if(l=f[c],!j(r,l)||!q(n[l],r[l],t,e))return!1}return t.pop(),e.pop(),!0},h.isEqual=function(n,r){return q(n,r)},h.isEmpty=function(n){return null==n||(w(n)&&(h.isArray(n)||h.isString(n)||h.isArguments(n))?0===n.length:0===h.keys(n).length)},h.isElement=function(n){return!(!n||1!==n.nodeType)},h.isArray=t||function(n){return"[object Array]"===p.call(n)},h.isObject=function(n){var r=typeof n;return"function"===r||"object"===r&&!!n},h.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(r){h["is"+r]=function(n){return p.call(n)==="[object "+r+"]"}}),h.isArguments(arguments)||(h.isArguments=function(n){return j(n,"callee")});var D=n.document&&n.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof D&&(h.isFunction=function(n){return"function"==typeof n||!1}),h.isFinite=function(n){return!h.isSymbol(n)&&isFinite(n)&&!isNaN(parseFloat(n))},h.isNaN=function(n){return h.isNumber(n)&&isNaN(n)},h.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===p.call(n)},h.isNull=function(n){return null===n},h.isUndefined=function(n){return void 0===n},h.has=function(n,r){if(!h.isArray(r))return j(n,r);for(var t=r.length,e=0;e<t;e++){var u=r[e];if(null==n||!i.call(n,u))return!1;n=n[u]}return!!t},h.noConflict=function(){return n._=r,this},h.identity=function(n){return n},h.constant=function(n){return function(){return n}},h.noop=function(){},h.property=function(r){return h.isArray(r)?function(n){return x(n,r)}:b(r)},h.propertyOf=function(r){return null==r?function(){}:function(n){return h.isArray(n)?x(r,n):r[n]}},h.matcher=h.matches=function(r){return r=h.extendOwn({},r),function(n){return h.isMatch(n,r)}},h.times=function(n,r,t){var e=Array(Math.max(0,n));r=y(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},h.random=function(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))},h.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#x27;","`":"&#x60;"},P=h.invert(L),W=function(r){var t=function(n){return r[n]},n="(?:"+h.keys(r).join("|")+")",e=RegExp(n),u=RegExp(n,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};h.escape=W(L),h.unescape=W(P),h.result=function(n,r,t){h.isArray(r)||(r=[r]);var e=r.length;if(!e)return h.isFunction(t)?t.call(n):t;for(var u=0;u<e;u++){var i=null==n?void 0:n[r[u]];void 0===i&&(i=t,u=e),n=h.isFunction(i)?i.call(n):i}return n};var C=0;h.uniqueId=function(n){var r=++C+"";return n?n+r:r},h.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var J=/(.)^/,U={"\'":"\'","\\\\":"\\\\","\\r":"r","\\n":"n","\\u2028":"u2028","\\u2029":"u2029"},V=/\\\\|\'|\\r|\\n|\\u2028|\\u2029/g,$=function(n){return"\\\\"+U[n]};h.template=function(i,n,r){!n&&r&&(n=r),n=h.defaults({},n,h.templateSettings);var t,e=RegExp([(n.escape||J).source,(n.interpolate||J).source,(n.evaluate||J).source].join("|")+"|$","g"),o=0,a="__p+=\'";i.replace(e,function(n,r,t,e,u){return a+=i.slice(o,u).replace(V,$),o=u+n.length,r?a+="\'+\\n((__t=("+r+"))==null?\'\':_.escape(__t))+\\n\'":t?a+="\'+\\n((__t=("+t+"))==null?\'\':__t)+\\n\'":e&&(a+="\';\\n"+e+"\\n__p+=\'"),n}),a+="\';\\n",n.variable||(a="with(obj||{}){\\n"+a+"}\\n"),a="var __t,__p=\'\',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,\'\');};\\n"+a+"return __p;\\n";try{t=new Function(n.variable||"obj","_",a)}catch(n){throw n.source=a,n}var u=function(n){return t.call(this,n,h)},c=n.variable||"obj";return u.source="function("+c+"){\\n"+a+"}",u},h.chain=function(n){var r=h(n);return r._chain=!0,r};var G=function(n,r){return n._chain?h(r).chain():r};h.mixin=function(t){return h.each(h.functions(t),function(n){var r=h[n]=t[n];h.prototype[n]=function(){var n=[this._wrapped];return u.apply(n,arguments),G(this,r.apply(h,n))}}),h},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var t=e[r];h.prototype[r]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==r&&"splice"!==r||0!==n.length||delete n[0],G(this,n)}}),h.each(["concat","join","slice"],function(n){var r=e[n];h.prototype[n]=function(){return G(this,r.apply(this._wrapped,arguments))}}),h.prototype.value=function(){return this._wrapped},h.prototype.valueOf=h.prototype.toJSON=h.prototype.value,h.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return h})}();'},function(e,t,n){n(3)(n(57))},function(e,t){e.exports='// This [jQuery](https://jquery.com/) plugin implements an `<iframe>`\n// [transport](https://api.jquery.com/jQuery.ajax/#extending-ajax) so that\n// `$.ajax()` calls support the uploading of files using standard HTML file\n// input fields. This is done by switching the exchange from `XMLHttpRequest`\n// to a hidden `iframe` element containing a form that is submitted.\n\n// The [source for the plugin](https://github.com/cmlenz/jquery-iframe-transport)\n// is available on [Github](https://github.com/) and licensed under the [MIT\n// license](https://github.com/cmlenz/jquery-iframe-transport/blob/master/LICENSE).\n\n// ## Usage\n\n// To use this plugin, you simply add an `iframe` option with the value `true`\n// to the Ajax settings an `$.ajax()` call, and specify the file fields to\n// include in the submssion using the `files` option, which can be a selector,\n// jQuery object, or a list of DOM elements containing one or more\n// `<input type="file">` elements:\n\n//     $("#myform").submit(function() {\n//         $.ajax(this.action, {\n//             files: $(":file", this),\n//             iframe: true\n//         }).complete(function(data) {\n//             console.log(data);\n//         });\n//     });\n\n// The plugin will construct hidden `<iframe>` and `<form>` elements, add the\n// file field(s) to that form, submit the form, and process the response.\n\n// If you want to include other form fields in the form submission, include\n// them in the `data` option, and set the `processData` option to `false`:\n\n//     $("#myform").submit(function() {\n//         $.ajax(this.action, {\n//             data: $(":text", this).serializeArray(),\n//             files: $(":file", this),\n//             iframe: true,\n//             processData: false\n//         }).complete(function(data) {\n//             console.log(data);\n//         });\n//     });\n\n// ### Response Data Types\n\n// As the transport does not have access to the HTTP headers of the server\n// response, it is not as simple to make use of the automatic content type\n// detection provided by jQuery as with regular XHR. If you can\'t set the\n// expected response data type (for example because it may vary depending on\n// the outcome of processing by the server), you will need to employ a\n// workaround on the server side: Send back an HTML document containing just a\n// `<textarea>` element with a `data-type` attribute that specifies the MIME\n// type, and put the actual payload in the textarea:\n\n//     <textarea data-type="application/json">\n//       {"ok": true, "message": "Thanks so much"}\n//     </textarea>\n\n// The iframe transport plugin will detect this and pass the value of the\n// `data-type` attribute on to jQuery as if it was the "Content-Type" response\n// header, thereby enabling the same kind of conversions that jQuery applies\n// to regular responses. For the example above you should get a Javascript\n// object as the `data` parameter of the `complete` callback, with the\n// properties `ok: true` and `message: "Thanks so much"`.\n\n// ### Handling Server Errors\n\n// Another problem with using an `iframe` for file uploads is that it is\n// impossible for the javascript code to determine the HTTP status code of the\n// servers response. Effectively, all of the calls you make will look like they\n// are getting successful responses, and thus invoke the `done()` or\n// `complete()` callbacks. You can only communicate problems using the content\n// of the response payload. For example, consider using a JSON response such as\n// the following to indicate a problem with an uploaded file:\n\n//     <textarea data-type="application/json">\n//       {"ok": false, "message": "Please only upload reasonably sized files."}\n//     </textarea>\n\n// ### Compatibility\n\n// This plugin has primarily been tested on Safari 5 (or later), Firefox 4 (or\n// later), and Internet Explorer (all the way back to version 6). While I\n// haven\'t found any issues with it so far, I\'m fairly sure it still doesn\'t\n// work around all the quirks in all different browsers. But the code is still\n// pretty simple overall, so you should be able to fix it and contribute a\n// patch :)\n\n// ## Annotated Source\n\n(function($, undefined) {\n  "use strict";\n\n  // Register a prefilter that checks whether the `iframe` option is set, and\n  // switches to the "iframe" data type if it is `true`.\n  $.ajaxPrefilter(function(options, origOptions, jqXHR) {\n    if (options.iframe) {\n      options.originalURL = options.url;\n      return "iframe";\n    }\n  });\n\n  // Register a transport for the "iframe" data type. It will only activate\n  // when the "files" option has been set to a non-empty list of enabled file\n  // inputs.\n  $.ajaxTransport("iframe", function(options, origOptions, jqXHR) {\n    var form = null,\n        iframe = null,\n        name = "iframe-" + $.now(),\n        files = $(options.files).filter(":file:enabled"),\n        markers = null,\n        accepts = null;\n\n    // This function gets called after a successful submission or an abortion\n    // and should revert all changes made to the page to enable the\n    // submission via this transport.\n    function cleanUp() {\n      files.each(function(i, file) {\n        var $file = $(file);\n        $file.data("clone").replaceWith($file);\n      });\n      form.remove();\n      iframe.one("load", function() { iframe.remove(); });\n      iframe.attr("src", "javascript:false;");\n    }\n\n    // Remove "iframe" from the data types list so that further processing is\n    // based on the content type returned by the server, without attempting an\n    // (unsupported) conversion from "iframe" to the actual type.\n    options.dataTypes.shift();\n\n    // Use the data from the original AJAX options, as it doesn\'t seem to be \n    // copied over since jQuery 1.7.\n    // See https://github.com/cmlenz/jquery-iframe-transport/issues/6\n    options.data = origOptions.data;\n\n    if (files.length) {\n      form = $("<form enctype=\'multipart/form-data\' method=\'post\'></form>").\n        hide().attr({action: options.originalURL, target: name});\n\n      // If there is any additional data specified via the `data` option,\n      // we add it as hidden fields to the form. This (currently) requires\n      // the `processData` option to be set to false so that the data doesn\'t\n      // get serialized to a string.\n      if (typeof(options.data) === "string" && options.data.length > 0) {\n        $.error("data must not be serialized");\n      }\n      $.each(options.data || {}, function(name, value) {\n        if ($.isPlainObject(value)) {\n          name = value.name;\n          value = value.value;\n        }\n        $("<input type=\'hidden\' />").attr({name:  name, value: value}).\n          appendTo(form);\n      });\n\n      // Add a hidden `X-Requested-With` field with the value `IFrame` to the\n      // field, to help server-side code to determine that the upload happened\n      // through this transport.\n      $("<input type=\'hidden\' value=\'IFrame\' name=\'X-Requested-With\' />").\n        appendTo(form);\n\n      // Borrowed straight from the JQuery source.\n      // Provides a way of specifying the accepted data type similar to the\n      // HTTP "Accept" header\n      if (options.dataTypes[0] && options.accepts[options.dataTypes[0]]) {\n        accepts = options.accepts[options.dataTypes[0]] +\n                  (options.dataTypes[0] !== "*" ? ", */*; q=0.01" : "");\n      } else {\n        accepts = options.accepts["*"];\n      }\n      $("<input type=\'hidden\' name=\'X-HTTP-Accept\'>").\n        attr("value", accepts).appendTo(form);\n\n      // Move the file fields into the hidden form, but first remember their\n      // original locations in the document by replacing them with disabled\n      // clones. This should also avoid introducing unwanted changes to the\n      // page layout during submission.\n      markers = files.after(function(idx) {\n        var $this = $(this),\n            $clone = $this.clone().prop("disabled", true);\n        $this.data("clone", $clone);\n        return $clone;\n      }).next();\n      files.appendTo(form);\n\n      return {\n\n        // The `send` function is called by jQuery when the request should be\n        // sent.\n        send: function(headers, completeCallback) {\n          iframe = $("<iframe src=\'javascript:false;\' name=\'" + name +\n            "\' id=\'" + name + "\' style=\'display:none\'></iframe>");\n\n          // The first load event gets fired after the iframe has been injected\n          // into the DOM, and is used to prepare the actual submission.\n          iframe.one("load", function() {\n\n            // The second load event gets fired when the response to the form\n            // submission is received. The implementation detects whether the\n            // actual payload is embedded in a `<textarea>` element, and\n            // prepares the required conversions to be made in that case.\n            iframe.one("load", function() {\n              var doc = this.contentWindow ? this.contentWindow.document :\n                (this.contentDocument ? this.contentDocument : this.document),\n                root = doc.documentElement ? doc.documentElement : doc.body,\n                textarea = root.getElementsByTagName("textarea")[0],\n                type = textarea && textarea.getAttribute("data-type") || null,\n                status = textarea && textarea.getAttribute("data-status") || 200,\n                statusText = textarea && textarea.getAttribute("data-statusText") || "OK",\n                content = {\n                  html: root.innerHTML,\n                  text: type ?\n                    textarea.value :\n                    root ? (root.textContent || root.innerText) : null\n                };\n              cleanUp();\n              completeCallback(status, statusText, content, type ?\n                ("Content-Type: " + type) :\n                null);\n            });\n\n            // Now that the load handler has been set up, submit the form.\n            form[0].submit();\n          });\n\n          // After everything has been set up correctly, the form and iframe\n          // get injected into the DOM so that the submission can be\n          // initiated.\n          $("body").append(form, iframe);\n        },\n\n        // The `abort` function is called by jQuery when the request should be\n        // aborted.\n        abort: function() {\n          if (iframe !== null) {\n            iframe.unbind("load").attr("src", "javascript:false;");\n            cleanUp();\n          }\n        }\n\n      };\n    }\n  });\n\n})(jQuery);\n'},function(e,t,n){n(3)(n(59))},function(e,t){e.exports='/*! jQuery Migrate v3.0.1 | (c) jQuery Foundation and other contributors | jquery.org/license */\n\nvoid 0 === jQuery.migrateMute && (jQuery.migrateMute = !0), function(e) {\n    "function" == typeof define && define.amd ? define([ "jquery" ], window, e) : "object" == typeof module && module.exports ? module.exports = e(require("jquery"), window) : e(jQuery, window);\n}(function(e, t) {\n    "use strict";\n    function r(r) {\n        var n = t.console;\n        o[r] || (o[r] = !0, e.migrateWarnings.push(r), n && n.warn && !e.migrateMute && (n.warn("JQMIGRATE: " + r), \n        e.migrateTrace && n.trace && n.trace()));\n    }\n    function n(e, t, n, a) {\n        Object.defineProperty(e, t, {\n            configurable: !0,\n            enumerable: !0,\n            get: function() {\n                return r(a), n;\n            },\n            set: function(e) {\n                r(a), n = e;\n            }\n        });\n    }\n    function a(e, t, n, a) {\n        e[t] = function() {\n            return r(a), n.apply(this, arguments);\n        };\n    }\n    e.migrateVersion = "3.0.1", function() {\n        var r = /^[12]\\./;\n        t.console && t.console.log && (e && !r.test(e.fn.jquery) || t.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"), \n        e.migrateWarnings && t.console.log("JQMIGRATE: Migrate plugin loaded multiple times"), \n        t.console.log("JQMIGRATE: Migrate is installed" + (e.migrateMute ? "" : " with logging active") + ", version " + e.migrateVersion));\n    }();\n    var o = {};\n    e.migrateWarnings = [], void 0 === e.migrateTrace && (e.migrateTrace = !0), e.migrateReset = function() {\n        o = {}, e.migrateWarnings.length = 0;\n    }, "BackCompat" === t.document.compatMode && r("jQuery is not compatible with Quirks Mode");\n    var i = e.fn.init, s = e.isNumeric, u = e.find, c = /\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/, l = /\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/g;\n    e.fn.init = function(e) {\n        var t = Array.prototype.slice.call(arguments);\n        return "string" == typeof e && "#" === e && (r("jQuery( \'#\' ) is not a valid selector"), \n        t[0] = []), i.apply(this, t);\n    }, e.fn.init.prototype = e.fn, e.find = function(e) {\n        var n = Array.prototype.slice.call(arguments);\n        if ("string" == typeof e && c.test(e)) try {\n            t.document.querySelector(e);\n        } catch (a) {\n            e = e.replace(l, function(e, t, r, n) {\n                return "[" + t + r + \'"\' + n + \'"]\';\n            });\n            try {\n                t.document.querySelector(e), r("Attribute selector with \'#\' must be quoted: " + n[0]), \n                n[0] = e;\n            } catch (e) {\n                r("Attribute selector with \'#\' was not fixed: " + n[0]);\n            }\n        }\n        return u.apply(this, n);\n    };\n    var d;\n    for (d in u) Object.prototype.hasOwnProperty.call(u, d) && (e.find[d] = u[d]);\n    e.fn.size = function() {\n        return r("jQuery.fn.size() is deprecated and removed; use the .length property"), \n        this.length;\n    }, e.parseJSON = function() {\n        return r("jQuery.parseJSON is deprecated; use JSON.parse"), JSON.parse.apply(null, arguments);\n    }, e.isNumeric = function(t) {\n        var n = s(t), a = function(t) {\n            var r = t && t.toString();\n            return !e.isArray(t) && r - parseFloat(r) + 1 >= 0;\n        }(t);\n        return n !== a && r("jQuery.isNumeric() should not be called on constructed objects"), \n        a;\n    }, a(e, "holdReady", e.holdReady, "jQuery.holdReady is deprecated"), a(e, "unique", e.uniqueSort, "jQuery.unique is deprecated; use jQuery.uniqueSort"), \n    n(e.expr, "filters", e.expr.pseudos, "jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"), \n    n(e.expr, ":", e.expr.pseudos, "jQuery.expr[\':\'] is deprecated; use jQuery.expr.pseudos");\n    var p = e.ajax;\n    e.ajax = function() {\n        var e = p.apply(this, arguments);\n        return e.promise && (a(e, "success", e.done, "jQXHR.success is deprecated and removed"), \n        a(e, "error", e.fail, "jQXHR.error is deprecated and removed"), a(e, "complete", e.always, "jQXHR.complete is deprecated and removed")), \n        e;\n    };\n    var f = e.fn.removeAttr, y = e.fn.toggleClass, m = /\\S+/g;\n    e.fn.removeAttr = function(t) {\n        var n = this;\n        return e.each(t.match(m), function(t, a) {\n            e.expr.match.bool.test(a) && (r("jQuery.fn.removeAttr no longer sets boolean properties: " + a), \n            n.prop(a, !1));\n        }), f.apply(this, arguments);\n    }, e.fn.toggleClass = function(t) {\n        return void 0 !== t && "boolean" != typeof t ? y.apply(this, arguments) : (r("jQuery.fn.toggleClass( boolean ) is deprecated"), \n        this.each(function() {\n            var r = this.getAttribute && this.getAttribute("class") || "";\n            r && e.data(this, "__className__", r), this.setAttribute && this.setAttribute("class", r || !1 === t ? "" : e.data(this, "__className__") || "");\n        }));\n    };\n    var h = !1;\n    e.swap && e.each([ "height", "width", "reliableMarginRight" ], function(t, r) {\n        var n = e.cssHooks[r] && e.cssHooks[r].get;\n        n && (e.cssHooks[r].get = function() {\n            var e;\n            return h = !0, e = n.apply(this, arguments), h = !1, e;\n        });\n    }), e.swap = function(e, t, n, a) {\n        var o, i, s = {};\n        h || r("jQuery.swap() is undocumented and deprecated");\n        for (i in t) s[i] = e.style[i], e.style[i] = t[i];\n        o = n.apply(e, a || []);\n        for (i in t) e.style[i] = s[i];\n        return o;\n    };\n    var g = e.data;\n    e.data = function(t, n, a) {\n        var o;\n        if (n && "object" == typeof n && 2 === arguments.length) {\n            o = e.hasData(t) && g.call(this, t);\n            var i = {};\n            for (var s in n) s !== e.camelCase(s) ? (r("jQuery.data() always sets/gets camelCased names: " + s), \n            o[s] = n[s]) : i[s] = n[s];\n            return g.call(this, t, i), n;\n        }\n        return n && "string" == typeof n && n !== e.camelCase(n) && (o = e.hasData(t) && g.call(this, t)) && n in o ? (r("jQuery.data() always sets/gets camelCased names: " + n), \n        arguments.length > 2 && (o[n] = a), o[n]) : g.apply(this, arguments);\n    };\n    var v = e.Tween.prototype.run, j = function(e) {\n        return e;\n    };\n    e.Tween.prototype.run = function() {\n        e.easing[this.easing].length > 1 && (r("\'jQuery.easing." + this.easing.toString() + "\' should use only one argument"), \n        e.easing[this.easing] = j), v.apply(this, arguments);\n    }, e.fx.interval = e.fx.interval || 13, t.requestAnimationFrame && n(e.fx, "interval", e.fx.interval, "jQuery.fx.interval is deprecated");\n    var Q = e.fn.load, b = e.event.add, w = e.event.fix;\n    e.event.props = [], e.event.fixHooks = {}, n(e.event.props, "concat", e.event.props.concat, "jQuery.event.props.concat() is deprecated and removed"), \n    e.event.fix = function(t) {\n        var n, a = t.type, o = this.fixHooks[a], i = e.event.props;\n        if (i.length) for (r("jQuery.event.props are deprecated and removed: " + i.join()); i.length; ) e.event.addProp(i.pop());\n        if (o && !o._migrated_ && (o._migrated_ = !0, r("jQuery.event.fixHooks are deprecated and removed: " + a), \n        (i = o.props) && i.length)) for (;i.length; ) e.event.addProp(i.pop());\n        return n = w.call(this, t), o && o.filter ? o.filter(n, t) : n;\n    }, e.event.add = function(e, n) {\n        return e === t && "load" === n && "complete" === t.document.readyState && r("jQuery(window).on(\'load\'...) called after load event occurred"), \n        b.apply(this, arguments);\n    }, e.each([ "load", "unload", "error" ], function(t, n) {\n        e.fn[n] = function() {\n            var e = Array.prototype.slice.call(arguments, 0);\n            return "load" === n && "string" == typeof e[0] ? Q.apply(this, e) : (r("jQuery.fn." + n + "() is deprecated"), \n            e.splice(0, 0, n), arguments.length ? this.on.apply(this, e) : (this.triggerHandler.apply(this, e), \n            this));\n        };\n    }), e.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), function(t, n) {\n        e.fn[n] = function(e, t) {\n            return r("jQuery.fn." + n + "() event shorthand is deprecated"), arguments.length > 0 ? this.on(n, null, e, t) : this.trigger(n);\n        };\n    }), e(function() {\n        e(t.document).triggerHandler("ready");\n    }), e.event.special.ready = {\n        setup: function() {\n            this === t.document && r("\'ready\' event is deprecated");\n        }\n    }, e.fn.extend({\n        bind: function(e, t, n) {\n            return r("jQuery.fn.bind() is deprecated"), this.on(e, null, t, n);\n        },\n        unbind: function(e, t) {\n            return r("jQuery.fn.unbind() is deprecated"), this.off(e, null, t);\n        },\n        delegate: function(e, t, n, a) {\n            return r("jQuery.fn.delegate() is deprecated"), this.on(t, e, n, a);\n        },\n        undelegate: function(e, t, n) {\n            return r("jQuery.fn.undelegate() is deprecated"), 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n);\n        },\n        hover: function(e, t) {\n            return r("jQuery.fn.hover() is deprecated"), this.on("mouseenter", e).on("mouseleave", t || e);\n        }\n    });\n    var x = e.fn.offset;\n    e.fn.offset = function() {\n        var n, a = this[0], o = {\n            top: 0,\n            left: 0\n        };\n        return a && a.nodeType ? (n = (a.ownerDocument || t.document).documentElement, e.contains(n, a) ? x.apply(this, arguments) : (r("jQuery.fn.offset() requires an element connected to a document"), \n        o)) : (r("jQuery.fn.offset() requires a valid DOM element"), o);\n    };\n    var k = e.param;\n    e.param = function(t, n) {\n        var a = e.ajaxSettings && e.ajaxSettings.traditional;\n        return void 0 === n && a && (r("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"), \n        n = a), k.call(this, t, n);\n    };\n    var A = e.fn.andSelf || e.fn.addBack;\n    e.fn.andSelf = function() {\n        return r("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"), \n        A.apply(this, arguments);\n    };\n    var S = e.Deferred, q = [ [ "resolve", "done", e.Callbacks("once memory"), e.Callbacks("once memory"), "resolved" ], [ "reject", "fail", e.Callbacks("once memory"), e.Callbacks("once memory"), "rejected" ], [ "notify", "progress", e.Callbacks("memory"), e.Callbacks("memory") ] ];\n    return e.Deferred = function(t) {\n        var n = S(), a = n.promise();\n        return n.pipe = a.pipe = function() {\n            var t = arguments;\n            return r("deferred.pipe() is deprecated"), e.Deferred(function(r) {\n                e.each(q, function(o, i) {\n                    var s = e.isFunction(t[o]) && t[o];\n                    n[i[1]](function() {\n                        var t = s && s.apply(this, arguments);\n                        t && e.isFunction(t.promise) ? t.promise().done(r.resolve).fail(r.reject).progress(r.notify) : r[i[0] + "With"](this === a ? r.promise() : this, s ? [ t ] : arguments);\n                    });\n                }), t = null;\n            }).promise();\n        }, t && t.call(n, n), n;\n    }, e.Deferred.exceptionHook = S.exceptionHook, e;\n});'},function(e,t,n){n(3)(n(61))},function(e,t){e.exports='/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */\n!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement("script");if(o.text=e,n)for(i in v)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b="3.3.1",w=function(e,t){return new w.fn.init(e,t)},T=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)(r=!t(e[o],o))!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function C(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\\\x20\\\\t\\\\r\\\\n\\\\f]",R="(?:\\\\\\\\.|[\\\\w-]|[^\\0-\\\\xa0])+",I="\\\\["+M+"*("+R+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\"((?:\\\\\\\\.|[^\\\\\\\\\\"])*)\\"|("+R+"))|)"+M+"*\\\\]",W=":("+R+")(?:\\\\(((\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\"((?:\\\\\\\\.|[^\\\\\\\\\\"])*)\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|"+I+")*)|.*)\\\\)|)",$=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)"+M+"+$","g"),F=new RegExp("^"+M+"*,"+M+"*"),_=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp("="+M+"*([^\\\\]\'\\"]*?)"+M+"*\\\\]","g"),X=new RegExp(W),U=new RegExp("^"+R+"$"),V={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\("+M+"*(even|odd|(([+-]|)(\\\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\\\d+)|))"+M+"*\\\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\("+M+"*((?:-\\\\d)?\\\\d*)"+M+"*\\\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\\d$/i,Q=/^[^{]+\\{\\s*\\[native \\w/,J=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\\\\\([\\\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ne=function(e,t){return t?"\\0"===e?"\\ufffd":e.slice(0,-1)+"\\\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\\\"+e},re=function(){p()},ie=me(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+" "]&&(!y||!y.test(e))){if(1!==T)m=t,v=e;else if("object"!==t.nodeName.toLowerCase()){(c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=b),s=(h=a(e)).length;while(s--)h[s]="#"+c+" "+ve(h[s]);v=h.join(","),m=K.test(e)&&ge(t.parentNode)||t}if(v)try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML="<a id=\'"+b+"\'></a><select id=\'"+b+"-\\r\\\\\' msallowcapture=\'\'><option selected=\'\'></option></select>",e.querySelectorAll("[msallowcapture^=\'\']").length&&y.push("[*^$]="+M+"*(?:\'\'|\\"\\")"),e.querySelectorAll("[selected]").length||y.push("\\\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href=\'\' disabled=\'disabled\'></a><select disabled=\'disabled\'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!=\'\']:x"),v.push("!=",W)}),y=y.length&&new RegExp(y.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0;if(i===o)return ce(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,"=\'$1\']"),n.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!y||!y.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t))break;return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--)e[r=O(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=r.preFilter;while(s){n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=_.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length));for(a in r.filter)!(i=V[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||a)if(f=t[b]||(t[b]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function be(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Te(e,t,n,r,i,o){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,o)),se(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||be(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:we(g,p,e,s,u),v=n?i||(o?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){l=we(v,d),r(l,[],s,u),c=l.length;while(c--)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}if(o){if(i||e){if(i){l=[],c=v.length;while(c--)(f=v[c])&&l.push(y[c]=f);i(null,v=[],l,u)}c=v.length;while(c--)(f=v[c])&&(l=i?O(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(h,v.length):v),i?i(null,a,v,u):L.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=me(function(e){return e===t},s,!0),f=me(function(e){return O(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[me(xe(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o;i++)if(r.relative[e[i].type])break;return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}p.push(n)}return xe(p)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,y,v=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){h=0,a||f.ownerDocument===d||(p(f),s=!g);while(y=e[h++])if(y(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!y&&f)&&v--,o&&x.push(f))}if(v+=m,n&&m!==v){h=0;while(y=t[h++])y(x,b,a,s);if(o){if(v>0)while(m--)x[m]||b[m]||(b[m]=j.call(u));b=we(b)}L.apply(u,b),c&&!o&&b.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(T=E,l=w),x};return n?se(o):o}return s=oe.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=a(e)),n=t.length;while(n--)(o=Ce(t[n]))[b]?r.push(o):i.push(o);(o=S(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){if(l=u[o],r.relative[c=l.type])break;if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),K.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return L.apply(n,i),n;break}}}return(p||s(e,d))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href=\'#\'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=w.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function j(e,t,n){return g(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&D.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(w.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&w.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(r);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!D.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\\x20\\t\\r\\n\\f]+/g;function R(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}w.Callbacks=function(e){e="string"==typeof e?R(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){var n;while((n=w.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l};function I(e){return e}function W(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,I,i),a(o,n,W,i)):(o++,l.call(e,a(o,n,I,i),a(o,n,W,i),a(o,n,I,n.notifyWith))):(r!==I&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==W&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:I,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:I)),n[2][3].add(a(0,e,g(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&($(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();while(n--)$(i[n],s(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();w.fn.ready=function(e){return F.then(e)["catch"](function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(r,[w]))}}),w.ready.then=F.then;function _(){r.removeEventListener("DOMContentLoaded",_),e.removeEventListener("load",_),w.ready()}"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",_),e.addEventListener("load",_));var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n)){i=!0;for(s in n)z(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},X=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(X,"ms-").replace(U,V)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[G(t)]=n;else for(r in t)i[G(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(M)||[]).length;while(n--)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var J=new Q,K=new Q,Z=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,ee=/[A-Z]/g;function te(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=te(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),ne(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){K.set(this,e)}):z(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=K.get(o,e)))return n;if(void 0!==(n=ne(o,e)))return n}else this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:w.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},u=s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==l&&+u)&&ie.exec(w.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]+)/i,he=/^$|^module$|\\/(?:java|ecma)script/i,ge={option:[1,"<select multiple=\'multiple\'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;function ye(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?w.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}var me=/<|&#?\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))w.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(l=w.contains(o.ownerDocument,o),a=ye(f.appendChild(o),"script"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var be=r.documentElement,we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\\.(.+)|)/;function Ee(){return!0}function ke(){return!1}function Se(){try{return r.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.get(e);if(y){n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(be,i),n.guid||(n.guid=w.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return"undefined"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(M)||[""]).length;while(l--)d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.hasData(e)&&J.get(e);if(y&&(u=y.events)){l=(t=(t||"").match(M)||[""]).length;while(l--)if(s=Ce.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\\\.)"+h.join("\\\\.(?:.*\\\\.|)")+"(\\\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||w.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t=w.event.fix(e),n,r,i,o,a,s,u=new Array(arguments.length),l=(J.get(this,"events")||{})[t.type]||[],c=w.event.special[t.type]||{};for(u[0]=t,n=1;n<arguments.length;n++)u[n]=arguments[n];if(t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){s=w.event.handlers.call(this,t,l),n=0;while((o=s[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem,r=0;while((a=o.handlers[r++])&&!t.isImmediatePropagationStopped())t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Se()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)[^>]*)\\/>/gi,Ae=/<script|<style|<link/i,je=/checked\\s*(?:[^=]|=\\s*.checked.)/i,qe=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function Le(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")?w(e).children("tbody")[0]||e:e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)w.event.add(t,i,l[i][n])}K.hasData(e)&&(s=K.access(e),u=w.extend({},s),K.set(t,u))}}function Me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&pe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,y=t[0],v=g(y);if(v||p>1&&"string"==typeof y&&!h.checkClone&&je.test(y))return e.each(function(i){var o=e.eq(i);v&&(t[0]=y.call(this,i,o.html())),Re(o,t,n,r)});if(p&&(i=xe(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,"script"),He)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++)l=s[f],he.test(l.type||"")&&!J.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):m(l.textContent.replace(qe,""),c,l))}return e}function Ie(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ve(ye(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e.replace(Ne,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=w.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)Me(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Pe(o[r],a[r]);else Pe(e,s);return(a=ye(s,"script")).length>0&&ve(a,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return z(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var We=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(oe.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",be.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();function Fe(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&We.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}var ze=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Qe(e){if(e in Ye)return e;var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;while(n--)if((e=Ge[n]+t)in Ye)return e}function Je(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=Qe(e)||e),t}function Ke(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+oe[a]+"Width",!0,i))):(u+=w.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=w.css(e,"border"+oe[a]+"Width",!0,i):s+=w.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=$e(e),i=Fe(e,t,r),o="border-box"===w.css(e,"boxSizing",!1,r),a=o;if(We.test(i)){if(!n)return i;i="auto"}return a=a&&(h.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===w.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Xe.test(t),l=e.style;if(u||(t=Je(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t);return Xe.test(t)||(t=Je(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Fe(e,t,r)),"normal"===i&&t in Ve&&(i=Ve[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!ze.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ue,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=$e(e),a="border-box"===w.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&h.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(e,n,s)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}});function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=J.get(e,"fxshow");n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=J.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=w.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?"hidden"in y&&(g=y.hidden):y=J.access(e,"fxshow",{display:l}),o&&(y.hidden=!g),g&&fe([e],!0),p.done(function(){g||fe([e]),J.remove(e,"fxshow");for(r in d)w.style(e,r,d[r])})),u=lt(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}}function ft(e,t){var n,r,i,o,a;for(n in e)if(r=G(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function pt(e,t,n){var r,i,o=0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(ft(c,l.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[ct],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=pt(this,w.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),w.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx?w.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var dt,ht=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return z(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\\w+/g),function(e,t){var n=ht[t]||w.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return z(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function vt(e){return(e.match(M)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e?e.match(M)||[]:[]}w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))});if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])while(r.indexOf(" "+o+" ")>-1)r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r){i=0,o=w(this),a=xt(e);while(t=a[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+vt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:vt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=w.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,v=[i||r],m=f.call(t,"type")?t.type:t,x=f.call(t,"namespace")?t.namespace.split("."):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(m=(x=m.split(".")).shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[w.expando]?t:new w.Event(m,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\\\.)"+x.join("\\\\.(?:.*\\\\.|)")+"(\\\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!y(i)){for(l=d.delegateType||m,wt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}a=0;while((s=v[a++])&&!t.isPropagationStopped())h=s,t.type=a>1?l:d.bindType||m,(p=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&Y(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||c&&g(i[m])&&!y(i)&&((u=i[c])&&(i[c]=null),w.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Tt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var Ct=e.location,Et=Date.now(),kt=/\\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var St=/\\[\\]$/,Dt=/\\r?\\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||St.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==x(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\\r\\n")}}):{name:t.name,value:n.replace(Dt,"\\r\\n")}}).get()}});var qt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Rt=/^\\/\\//,It={},Wt={},$t="*/".concat("*"),Bt=r.createElement("a");Bt.href=Ct.href;function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(M)||[];if(g(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function _t(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Ut(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:Pt.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,w.ajaxSettings),t):zt(w.ajaxSettings,e)},ajaxPrefilter:Ft(It),ajaxTransport:Ft(Wt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,y=h.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),x=h.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Ot.exec(a))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(v.promise(E),h.url=((t||h.url||Ct.href)+"").replace(Rt,Ct.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(M)||[""],null==h.crossDomain){l=r.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),_t(It,h,n,E),c)return E;(f=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(qt,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,"$1"),d=(kt.test(o)?"&":"?")+"_="+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),i=_t(Wt,h,n,E)){if(E.readyState=1,f&&y.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,i.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(t,n,r,s){var l,p,d,b,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=Xt(h,E,r)),b=Ut(h,b,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(w.etag[o]=T)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",l?v.resolveWith(g,[p,C,E]):v.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&y.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(y.trigger("ajaxComplete",[E,h]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=w.ajaxSettings.xhr();h.cors=!!Gt&&"withCredentials"in Gt,h.ajax=Gt=!!Gt,w.ajaxTransport(function(t){var n,r;if(h.cors||Gt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Yt=[],Qt=/(=)\\?(?=&|$)|\\?\\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||w.expando+"_"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qt,"$1"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Yt.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),h.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,o,a;return t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),o=A.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=xe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes))},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=w.css(e,"position"),f=w(e),p={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=w.css(e,"top"),u=w.css(e,"left"),(l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):f.css(p)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===w.css(e,"position"))e=e.offsetParent;return e||be})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return z(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n)return n=Fe(e,t),We.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Jt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=Jt),w},t||(e.jQuery=e.$=w),w});\n'},function(e,t,n){n(3)(n(63))},function(e,t){e.exports="/*!\r\n * crosstab JavaScript Library v0.2.7\r\n * https://github.com/tejacques/crosstab\r\n *\r\n * License: Apache 2.0 https://github.com/tejacques/crosstab/blob/master/LICENSE\r\n */\r\n; (function (define) { define('crosstab', function (require, exports, module) {\r\n    'use strict';\r\n\r\n    // --- Handle Support ---\r\n    // See: http://detectmobilebrowsers.com/about\r\n    var useragent = navigator.userAgent || navigator.vendor || window.opera;\r\n    var isMobile = (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(useragent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(useragent.substr(0, 4)));\r\n\r\n    var localStorage;\r\n    try {\r\n        localStorage = window.localStorage;\r\n        localStorage = window['ie-eventlistener/storage'] || window.localStorage;\r\n    } catch (e) {\r\n        // New versions of Firefox throw a Security exception\r\n        // if cookies are disabled. See\r\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1028153\r\n    }\r\n\r\n    // When Safari on OS X or iOS is in private browsing mode,\r\n    // calling localStorage.setItem throws an exception.\r\n    //\r\n    // \"QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made\r\n    // to add something to storage that exceeded the quota.\"\r\n    var setItemAllowed = true;\r\n    try {\r\n        localStorage.setItem('__crosstab', '');\r\n        localStorage.removeItem('__crosstab');\r\n    } catch (e) {\r\n        setItemAllowed = false;\r\n    }\r\n\r\n    // Other reasons\r\n    var frozenTabEnvironment = false;\r\n\r\n    function notSupported() {\r\n        if (crosstab.supported) return;\r\n        var errorMsg = 'crosstab not supported';\r\n        var reasons = [];\r\n        if (!localStorage) {\r\n            reasons.push('localStorage not availabe');\r\n        }\r\n        if (!window.addEventListener) {\r\n            reasons.push('addEventListener not available');\r\n        }\r\n        if (isMobile) {\r\n            reasons.push('mobile browser');\r\n        }\r\n        if (frozenTabEnvironment) {\r\n            reasons.push('frozen tab environment detected');\r\n        }\r\n        if (!setItemAllowed) {\r\n            reasons.push('localStorage.setItem not allowed');\r\n        }\r\n\r\n        if (reasons.length > 0) {\r\n            errorMsg += ': ' + reasons.join(', ');\r\n        }\r\n\r\n        throw new Error(errorMsg);\r\n    }\r\n\r\n    // --- Utility ---\r\n    var util = {\r\n        keys: {\r\n            MESSAGE_KEY: 'crosstab.MESSAGE_KEY',\r\n            TABS_KEY: 'crosstab.TABS_KEY',\r\n            MASTER_TAB: 'MASTER_TAB',\r\n            SUPPORTED_KEY: 'crosstab.SUPPORTED',\r\n            FROZEN_TAB_ENVIRONMENT: 'crosstab.FROZEN_TAB_ENVIRONMENT'\r\n        }\r\n    };\r\n\r\n    var toString = Object.prototype.toString;\r\n\r\n    util.isArray = Array.isArray || function (arr) {\r\n        return arr instanceof Array;\r\n    };\r\n\r\n    util.isNumber = function (num) {\r\n        return typeof num === 'number';\r\n    };\r\n\r\n    util.isFunction = function (fn) {\r\n        return typeof fn === 'function';\r\n    };\r\n\r\n    util.forEachObj = function (obj, fn) {\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                fn.call(obj, obj[key], key);\r\n            }\r\n        }\r\n    };\r\n\r\n    util.forEachArr = function (arr, fn) {\r\n        var len = arr.length;\r\n        for (var i = 0; i < len; i++) {\r\n            fn.call(arr, arr[i], i, arr);\r\n        }\r\n    };\r\n\r\n    util.forEach = function (thing, fn) {\r\n        if (util.isArray(thing)) {\r\n            util.forEachArr(thing, fn);\r\n        } else {\r\n            util.forEachObj(thing, fn);\r\n        }\r\n    };\r\n\r\n    util.map = function (thing, fn) {\r\n        var res = [];\r\n        util.forEach(thing, function (item) {\r\n            res.push(fn(item));\r\n        });\r\n\r\n        return res;\r\n    };\r\n\r\n    util.filter = function (thing, fn) {\r\n        var isArr = util.isArray(thing);\r\n        var res = isArr ? [] : {};\r\n\r\n        if (isArr) {\r\n            util.forEachArr(thing, function (value, key) {\r\n                if (fn(value, key)) {\r\n                    res.push(value);\r\n                }\r\n            });\r\n        } else {\r\n            util.forEachObj(thing, function (value, key) {\r\n                if (fn(value, key)) {\r\n                    res[key] = value;\r\n                }\r\n            });\r\n        }\r\n\r\n        return res;\r\n    };\r\n\r\n    util.now = function () {\r\n        return (new Date()).getTime();\r\n    };\r\n\r\n    util.tabs = getStoredTabs();\r\n\r\n    util.eventTypes = {\r\n        becomeMaster: 'becomeMaster',\r\n        demoteFromMaster: 'demotedFromMaster',\r\n        tabUpdated: 'tabUpdated',\r\n        tabClosed: 'tabClosed',\r\n        tabPromoted: 'tabPromoted'\r\n    };\r\n\r\n    // --- Events ---\r\n    // node.js style events, with the main difference being able\r\n    // to add/remove events by key.\r\n    util.createEventHandler = function () {\r\n        var events = {};\r\n        var subscribeKeyToListener = {};\r\n\r\n        var findHandlerByKey = function(event, key) {\r\n            var handler;\r\n            if (subscribeKeyToListener[event]) {\r\n                handler = subscribeKeyToListener[event][key];\r\n            }\r\n            return handler;\r\n        };\r\n\r\n        var findHandlerIndex = function (event, listener) {\r\n            var listenerIndex = -1;\r\n            var eventList = events[event];\r\n            if (eventList && listener) {\r\n                var len = eventList.length || 0;\r\n                for(var i = 0; i < len; i++) {\r\n                    if (eventList[i] === listener) {\r\n                        listenerIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return listenerIndex;\r\n        };\r\n\r\n        var addListener = function (event, listener, key) {\r\n            var handlers = listeners(event);\r\n\r\n            var storedHandler = findHandlerByKey(event, key);\r\n            var listenerIndex;\r\n\r\n            if (storedHandler === undefined) {\r\n                listenerIndex = handlers.length;\r\n                handlers[listenerIndex] = listener;\r\n\r\n                if (!subscribeKeyToListener[event]) {\r\n                    (subscribeKeyToListener[event] = {});\r\n                }\r\n\r\n                if (key) {\r\n                    subscribeKeyToListener[event][key] = listener;\r\n                }\r\n            } else {\r\n                listenerIndex = findHandlerIndex(event, storedHandler);\r\n                handlers[listenerIndex] = listener;\r\n            }\r\n\r\n            return key || listener;\r\n        };\r\n\r\n        var removeListener = function (event, key) {\r\n            var handler = util.isFunction(key)\r\n                ? key\r\n                : findHandlerByKey(event, key);\r\n\r\n            var listenerIndex = findHandlerIndex(event, handler);\r\n            if (listenerIndex === -1) return false;\r\n\r\n            if (events[event] && events[event][listenerIndex]) {\r\n                events[event].splice(listenerIndex, 1);\r\n                delete subscribeKeyToListener[event][key];\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n\r\n        var removeAllListeners = function (event) {\r\n            var successful = false;\r\n            if (event) {\r\n                if (events[event]) {\r\n                    delete events[event];\r\n                    successful = true;\r\n                }\r\n                if (subscribeKeyToListener[event]) {\r\n                    delete subscribeKeyToListener[event];\r\n                    successful = successful && true;\r\n                }\r\n            } else {\r\n                events = {};\r\n                subscribeKeyToListener = {};\r\n                successful = true;\r\n            }\r\n            return successful;\r\n        };\r\n\r\n        var emit = function (event) {\r\n            var args = Array.prototype.slice.call(arguments, 1);\r\n            var handlers = listeners(event);\r\n\r\n            util.forEach(handlers, function (listener) {\r\n                if (util.isFunction(listener)) {\r\n                    listener.apply(this, args);\r\n                }\r\n            });\r\n        };\r\n\r\n        var once = function (event, listener, key) {\r\n            // Generate a unique id for this listener\r\n            while (!key || (findHandlerByKey(event, key) !== undefined)) {\r\n                key = util.generateId();\r\n            }\r\n\r\n            addListener(event, function () {\r\n                removeListener(event, key);\r\n                var args = Array.prototype.slice.call(arguments);\r\n                listener.apply(this, args);\r\n            }, key);\r\n\r\n            return key;\r\n        };\r\n\r\n        var listeners = function (event) {\r\n            var handlers = events[event] = events[event] || [];\r\n            return handlers;\r\n        };\r\n\r\n        var destructor = function() {\r\n            removeAllListeners();\r\n        };\r\n\r\n        return {\r\n            addListener: addListener,\r\n            destructor: destructor,\r\n            on: addListener,\r\n            off: function(event, key) {\r\n                var argsLen = arguments.length;\r\n                if (!argsLen) {\r\n                    return removeAllListeners();\r\n                } else if (argsLen === 1) {\r\n                    return removeAllListeners(event);\r\n                } else {\r\n                    return removeListener(event, key);\r\n                }\r\n            },\r\n            once: once,\r\n            emit: emit,\r\n            listeners: listeners,\r\n            removeListener: removeListener,\r\n            removeAllListeners: removeAllListeners\r\n        };\r\n    };\r\n\r\n    // --- Setup Events ---\r\n    var eventHandler = util.createEventHandler();\r\n\r\n    // wrap eventHandler so that setting it will not blow up\r\n    // any of the internal workings\r\n    util.events = {\r\n        addListener: eventHandler.addListener,\r\n        on: eventHandler.on,\r\n        off: eventHandler.off,\r\n        once: eventHandler.once,\r\n        emit: eventHandler.emit,\r\n        listeners: eventHandler.listeners,\r\n        removeListener: eventHandler.removeListener,\r\n        removeAllListeners: eventHandler.removeAllListeners,\r\n        destructor: eventHandler.destructor\r\n    };\r\n\r\n    var lastNewValue;\r\n    var lastOldValue;\r\n    function onStorageEvent(event) {\r\n        var eventValue;\r\n        var wasSupported = crosstab.supported;\r\n        try {\r\n            eventValue = event.newValue ? JSON.parse(event.newValue) : {};\r\n        } catch (e) {\r\n            eventValue = {};\r\n        }\r\n        if (!eventValue.id || eventValue.id === crosstab.id) {\r\n            // This is to force IE to behave properly\r\n            return;\r\n        }\r\n        if (event.newValue === lastNewValue && event.oldValue === lastOldValue) {\r\n            // Fix bug in IE11 where StorageEvents in iframes are sent twice.\r\n            return;\r\n        }\r\n        lastNewValue = event.newValue;\r\n        lastOldValue = event.oldValue;\r\n        if (event.key === util.keys.MESSAGE_KEY) {\r\n            var message = eventValue.data;\r\n            // only handle if this message was meant for this tab.\r\n            if (!message.destination || message.destination === crosstab.id) {\r\n                eventHandler.emit(message.event, message);\r\n            }\r\n        } else if (event.key === util.keys.FROZEN_TAB_ENVIRONMENT) {\r\n            frozenTabEnvironment = eventValue.data;\r\n            crosstab.supported = crosstab.supported && !eventValue.data;\r\n            //if (wasSupported) notSupported();\r\n        } else if (event.key === util.keys.SUPPORTED_KEY) {\r\n            crosstab.supported = crosstab.supported && eventValue.data;\r\n            //if(wasSupported) notSupported();\r\n        }\r\n    }\r\n\r\n    function setLocalStorageItem(key, data) {\r\n        var storageItem = {\r\n            id: crosstab.id,\r\n            data: data,\r\n            timestamp: util.now()\r\n        };\r\n\r\n        localStorage.setItem(key, JSON.stringify(storageItem));\r\n    }\r\n\r\n    function getLocalStorageItem(key) {\r\n        var item = getLocalStorageRaw(key);\r\n        return item.data;\r\n    }\r\n\r\n    function getLocalStorageRaw(key) {\r\n        var json = localStorage ? localStorage.getItem(key) : null;\r\n        var item = json ? JSON.parse(json) : {};\r\n        return item;\r\n    }\r\n\r\n    function unload() {\r\n        crosstab.stopKeepalive = true;\r\n        var numTabs = 0;\r\n        util.forEach(util.tabs, function (tab, key) {\r\n            if (key !== util.keys.MASTER_TAB) {\r\n                numTabs++;\r\n            }\r\n        });\r\n\r\n        if (numTabs === 1) {\r\n            util.tabs = {};\r\n            setStoredTabs();\r\n        } else {\r\n            broadcast(util.eventTypes.tabClosed, crosstab.id);\r\n        }\r\n\r\n    }\r\n\r\n    function restoreLoop() {\r\n        crosstab.stopKeepalive = false;\r\n        keepaliveLoop();\r\n    }\r\n\r\n    function swapUnloadEvents() {\r\n        // `beforeunload` replaced by `unload` (IE11 will be smart now)\r\n        window.removeEventListener('beforeunload', unload, false);\r\n        window.addEventListener('unload', unload, false);\r\n        restoreLoop();\r\n    }\r\n\r\n    function getMaster() {\r\n        return util.tabs[util.keys.MASTER_TAB];\r\n    }\r\n\r\n    function setMaster(newMaster) {\r\n        util.tabs[util.keys.MASTER_TAB] = newMaster;\r\n    }\r\n\r\n    function deleteMaster() {\r\n        delete util.tabs[util.keys.MASTER_TAB];\r\n    }\r\n\r\n    function getMasterId() {\r\n        var master = getMaster();\r\n\r\n        return master ? master.id : 0;\r\n    }\r\n\r\n    function isMaster() {\r\n        return getMasterId() === crosstab.id;\r\n    }\r\n\r\n    function masterTabElection() {\r\n        var maxId = null;\r\n        util.forEach(util.tabs, function (tab) {\r\n            if (!maxId || tab.id < maxId) {\r\n                maxId = tab.id;\r\n            }\r\n        });\r\n\r\n        // only broadcast the promotion if I am the new master\r\n        if (maxId === crosstab.id) {\r\n            broadcast(util.eventTypes.tabPromoted, crosstab.id);\r\n        } else {\r\n            // this is done so that in the case where multiple tabs are being\r\n            // started at the same time, and there is no current saved tab\r\n            // information, we will still have a value set for the master tab\r\n            setMaster({\r\n                id: maxId,\r\n                lastUpdated: util.now()\r\n            });\r\n        }\r\n    }\r\n\r\n    // Handle other tabs closing by updating internal tab model, and promoting\r\n    // self if we are the lowest tab id\r\n    eventHandler.addListener(util.eventTypes.tabClosed, function (message) {\r\n        var id = message.data;\r\n        if (util.tabs[id]) {\r\n            delete util.tabs[id];\r\n        }\r\n\r\n        if (!getMaster() || getMaster().id === id) {\r\n            // If the master was the closed tab, delete it and the highest\r\n            // tab ID becomes the new master, which will save the tabs\r\n            if (getMaster()) {\r\n                deleteMaster();\r\n            }\r\n            masterTabElection();\r\n        } else if (getMaster().id === crosstab.id) {\r\n            // If I am master, save the new tabs out\r\n            setStoredTabs();\r\n        }\r\n    });\r\n\r\n    eventHandler.addListener(util.eventTypes.tabUpdated, function (message) {\r\n        var tab = message.data;\r\n        util.tabs[tab.id] = tab;\r\n\r\n        // If there is no master, hold an election\r\n        if (!getMaster()) {\r\n            masterTabElection();\r\n        }\r\n\r\n        if (getMasterId() === tab.id) {\r\n            setMaster(tab);\r\n        }\r\n        if (isMaster()) {\r\n            // If I am master, save the new tabs out\r\n            setStoredTabs();\r\n        }\r\n    });\r\n\r\n    eventHandler.addListener(util.eventTypes.tabPromoted, function (message) {\r\n        var id = message.data;\r\n        var lastUpdated = message.timestamp;\r\n        var previousMaster = getMasterId();\r\n        setMaster({\r\n            id: id,\r\n            lastUpdated: lastUpdated\r\n        });\r\n\r\n        if (isMaster()\r\n            && previousMaster !== crosstab.id) {\r\n            // set the tabs in localStorage\r\n            setStoredTabs();\r\n\r\n            // emit the become master event so we can handle it accordingly\r\n            util.events.emit(util.eventTypes.becomeMaster);\r\n        } else if (!isMaster()\r\n            && previousMaster === crosstab.id) {\r\n            // emit the demoted from master event so we can clean up resources\r\n            util.events.emit(util.eventTypes.demoteFromMaster);\r\n        }\r\n    });\r\n\r\n    function pad(num, width, padChar) {\r\n        padChar = padChar || '0';\r\n        var numStr = (num.toString());\r\n\r\n        if (numStr.length >= width) {\r\n            return numStr;\r\n        }\r\n\r\n        return new Array(width - numStr.length + 1).join(padChar) + numStr;\r\n    }\r\n\r\n    util.generateId = function () {\r\n        /*jshint bitwise: false*/\r\n        return util.now().toString() + pad((Math.random() * 0x7FFFFFFF) | 0, 10);\r\n    };\r\n\r\n    // --- Setup message sending and handling ---\r\n    function broadcast(event, data, destination) {\r\n        if (!crosstab.supported) {\r\n            notSupported();\r\n        }\r\n\r\n        var message = {\r\n            id: util.generateId(),\r\n            event: event,\r\n            data: data,\r\n            destination: destination,\r\n            origin: crosstab.id,\r\n            timestamp: util.now()\r\n        };\r\n\r\n        // If the destination differs from the origin send it out, otherwise\r\n        // handle it locally\r\n        if (message.destination !== message.origin) {\r\n            setLocalStorageItem(util.keys.MESSAGE_KEY, message);\r\n        }\r\n\r\n        if (!message.destination || message.destination === message.origin) {\r\n            eventHandler.emit(event, message);\r\n        }\r\n    }\r\n\r\n    function broadcastMaster(event, data) {\r\n        broadcast(event, data, getMaster().id);\r\n    }\r\n\r\n    // ---- Return ----\r\n    var setupComplete = false;\r\n    util.events.once('setupComplete', function () {\r\n        setupComplete = true;\r\n    });\r\n\r\n    var crosstab = function (fn) {\r\n        if (setupComplete) {\r\n            fn();\r\n        } else {\r\n            util.events.once('setupComplete', fn);\r\n        }\r\n    };\r\n\r\n    crosstab.id = util.generateId();\r\n    crosstab.supported = !!localStorage && window.addEventListener && !isMobile && setItemAllowed;\r\n    crosstab.util = util;\r\n    crosstab.broadcast = broadcast;\r\n    crosstab.broadcastMaster = broadcastMaster;\r\n    crosstab.on = util.events.on;\r\n    crosstab.once = util.events.once;\r\n    crosstab.off = util.events.off;\r\n\r\n    // --- Crosstab supported ---\r\n    // Check to see if the global frozen tab environment key or supported key has been set.\r\n    if (!setupComplete && crosstab.supported) {\r\n        var frozenTabsRaw = getLocalStorageRaw(util.keys.FROZEN_TAB_ENVIRONMENT);\r\n        var frozenTabs = frozenTabsRaw.data;\r\n        if (frozenTabs === true) {\r\n            frozenTabEnvironmentDetected();\r\n        }\r\n\r\n        var supportedRaw = getLocalStorageRaw(util.keys.SUPPORTED_KEY);\r\n        var supported = supportedRaw.data;\r\n        if (supported === false || supported === true) {\r\n            // As long as it is explicitely set, use the value\r\n            crosstab.supported = supported;\r\n            util.events.emit('setupComplete');\r\n        }\r\n    }\r\n\r\n    function frozenTabEnvironmentDetected() {\r\n        crosstab.supported = false;\r\n        frozenTabEnvironment = true;\r\n        setLocalStorageItem(util.keys.FROZEN_TAB_ENVIRONMENT, true);\r\n        setLocalStorageItem(util.keys.SUPPORTED_KEY, false);\r\n    }\r\n\r\n    // --- Tab Setup ---\r\n    // 3 second keepalive\r\n    var TAB_KEEPALIVE = 3 * 1000;\r\n    // 5 second timeout\r\n    var TAB_TIMEOUT = 5 * 1000;\r\n    // 500 ms ping timeout\r\n    var PING_TIMEOUT = 500;\r\n\r\n    function getStoredTabs() {\r\n        var storedTabs = getLocalStorageItem(util.keys.TABS_KEY);\r\n        util.tabs = storedTabs || util.tabs || {};\r\n        return util.tabs;\r\n    }\r\n\r\n    function setStoredTabs() {\r\n        setLocalStorageItem(util.keys.TABS_KEY, util.tabs);\r\n    }\r\n\r\n    function keepalive() {\r\n        var now = util.now();\r\n\r\n        var myTab = {\r\n            id: crosstab.id,\r\n            lastUpdated: now\r\n        };\r\n\r\n        // broadcast tabUpdated event\r\n        broadcast(util.eventTypes.tabUpdated, myTab);\r\n\r\n        // broadcast tabClosed event for each tab that timed out\r\n        function stillAlive(tab) {\r\n            return now - tab.lastUpdated < TAB_TIMEOUT;\r\n        }\r\n\r\n        function notAlive(tab, key) {\r\n            return key !== util.keys.MASTER_TAB && !stillAlive(tab);\r\n        }\r\n\r\n        var deadTabs = util.filter(util.tabs, notAlive);\r\n        util.forEach(deadTabs, function (tab) {\r\n            broadcast(util.eventTypes.tabClosed, tab.id);\r\n        });\r\n\r\n        // check to see if setup is complete\r\n        if (!setupComplete) {\r\n            var masterTab = crosstab.util.tabs[crosstab.util.keys.MASTER_TAB];\r\n            // ping master\r\n            if (masterTab && masterTab.id !== myTab.id) {\r\n                var timeout;\r\n                var start;\r\n\r\n                crosstab.util.events.once('PONG', function () {\r\n                    if (!setupComplete) {\r\n                        clearTimeout(timeout);\r\n                        // set supported to true / frozen to false\r\n                        setLocalStorageItem(\r\n                            util.keys.SUPPORTED_KEY,\r\n                            true);\r\n                        setLocalStorageItem(\r\n                            util.keys.FROZEN_TAB_ENVIRONMENT,\r\n                            false);\r\n                        util.events.emit('setupComplete');\r\n                    }\r\n                });\r\n\r\n                start = util.now();\r\n\r\n                // There is a nested timeout here. We'll give it 100ms\r\n                // timeout, with iters \"yields\" to the event loop. So at least\r\n                // iters number of blocks of javascript will be able to run\r\n                // covering at least 100ms\r\n                var recursiveTimeout = function (iters) {\r\n                    var diff = util.now() - start;\r\n\r\n                    if (!setupComplete) {\r\n                        if (iters <= 0 && diff > PING_TIMEOUT) {\r\n                            frozenTabEnvironmentDetected();\r\n                            util.events.emit('setupComplete');\r\n                        } else {\r\n                            timeout = setTimeout(function () {\r\n                                recursiveTimeout(iters - 1);\r\n                            }, 5);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                var iterations = 5;\r\n                timeout = setTimeout(function () {\r\n                    recursiveTimeout(5);\r\n                }, PING_TIMEOUT - 5 * iterations);\r\n                crosstab.broadcastMaster('PING');\r\n            } else if (masterTab && masterTab.id === myTab.id) {\r\n                util.events.emit('setupComplete');\r\n            }\r\n        }\r\n    }\r\n\r\n    function keepaliveLoop() {\r\n        if (crosstab.supported && !crosstab.stopKeepalive) {\r\n            keepalive();\r\n        }\r\n    }\r\n\r\n    // --- Check if crosstab is supported ---\r\n    if (!crosstab.supported) {\r\n        crosstab.broadcast = notSupported;\r\n    } else {\r\n        // ---- Setup Storage Listener\r\n        window.addEventListener('storage', onStorageEvent, false);\r\n        // start with the `beforeunload` event due to IE11\r\n        window.addEventListener('beforeunload', unload, false);\r\n        // swap `beforeunload` to `unload` after DOM is loaded\r\n        window.addEventListener('DOMContentLoaded', swapUnloadEvents, false);\r\n\r\n        util.events.on('PING', function (message) {\r\n            // only handle direct messages\r\n            if (!message.destination || message.destination !== crosstab.id) {\r\n                return;\r\n            }\r\n\r\n            if (util.now() - message.timestamp < PING_TIMEOUT) {\r\n                crosstab.broadcast('PONG', null, message.origin);\r\n            }\r\n        });\r\n\r\n        setInterval(keepaliveLoop, TAB_KEEPALIVE);\r\n        keepaliveLoop();\r\n    }\r\n\r\n    module.exports = crosstab;\r\n\r\n/*!\r\n * UMD/AMD/Global context Module Loader wrapper\r\n * based off https://gist.github.com/wilsonpage/8598603\r\n *\r\n * This wrapper will try to use a module loader with the\r\n * following priority:\r\n *\r\n *  1.) AMD\r\n *  2.) CommonJS\r\n *  3.) Context Variable (window in the browser)\r\n */\r\n});})(typeof define == 'function' && define.amd ? define\r\n    : (function (context) {\r\n        'use strict';\r\n        return typeof module == 'object' ? function (name, factory) {\r\n            factory(require, exports, module);\r\n        }\r\n        : function (name, factory) {\r\n            var module = {\r\n                exports: {}\r\n            };\r\n            var require = function (n) {\r\n                if (n === 'jquery') {\r\n                    n = 'jQuery';\r\n                }\r\n                return context[n];\r\n            };\r\n\r\n            factory(require, module.exports, module);\r\n            context[name] = module.exports;\r\n        };\r\n    })(this));\r\n"},function(e,t,n){n(3)(n(65))},function(e,t,n){"use strict";n(66),n(64),n(62),n(60),n(58),n(56),n(54),window.async=n(52),n(49),n(47),n(45),n(43),n(41),n(29),n(38),n(37),n(36),n(35)},function(e,t,n){e.exports=n(67)}]);
//# sourceMappingURL=sidecar.min.js.map